{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/3-hexo/source/css/gitalk.css","path":"css/gitalk.css","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/mobile.styl","path":"css/mobile.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/alipay.jpg","path":"img/alipay.jpg","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/article-list-background.jpeg","path":"img/article-list-background.jpeg","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/avatar.jpg","path":"img/avatar.jpg","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/brown-papersq.png","path":"img/brown-papersq.png","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/gov.png","path":"img/gov.png","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/moon.jpg","path":"img/moon.jpg","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/road.png","path":"img/road.png","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/school-book.png","path":"img/school-book.png","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/img/weixin.jpg","path":"img/weixin.jpg","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/js/gitalk.js","path":"js/gitalk.js","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/js/gitment.js","path":"js/gitment.js","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/js/iconfont.js","path":"js/iconfont.js","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/js/jquery.pjax.js","path":"js/jquery.pjax.js","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/js/script.js","path":"js/script.js","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/js/search.js","path":"js/search.js","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/js/titleTip.js","path":"js/titleTip.js","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/icomoon.eot","path":"css/fonts/icomoon.eot","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/icomoon.svg","path":"css/fonts/icomoon.svg","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/icomoon.ttf","path":"css/fonts/icomoon.ttf","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/icomoon.woff","path":"css/fonts/icomoon.woff","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/iconfont.eot","path":"css/fonts/iconfont.eot","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/iconfont.svg","path":"css/fonts/iconfont.svg","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/iconfont.ttf","path":"css/fonts/iconfont.ttf","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/iconfont.woff","path":"css/fonts/iconfont.woff","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/iconfont.woff2","path":"css/fonts/iconfont.woff2","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/fonts/selection.json","path":"css/fonts/selection.json","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/atom-dark.styl","path":"css/hl_theme/atom-dark.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/atom-light.styl","path":"css/hl_theme/atom-light.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/brown-paper.styl","path":"css/hl_theme/brown-paper.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/darcula.styl","path":"css/hl_theme/darcula.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/github-gist.styl","path":"css/hl_theme/github-gist.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/github.styl","path":"css/hl_theme/github.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/gruvbox-dark.styl","path":"css/hl_theme/gruvbox-dark.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/gruvbox-light.styl","path":"css/hl_theme/gruvbox-light.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/kimbie-dark.styl","path":"css/hl_theme/kimbie-dark.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/kimbie-light.styl","path":"css/hl_theme/kimbie-light.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/railscasts.styl","path":"css/hl_theme/railscasts.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/rainbow.styl","path":"css/hl_theme/rainbow.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/school-book.styl","path":"css/hl_theme/school-book.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/sublime.styl","path":"css/hl_theme/sublime.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/sunburst.styl","path":"css/hl_theme/sunburst.styl","modified":1,"renderable":1},{"_id":"themes/3-hexo/source/css/hl_theme/zenbum.styl","path":"css/hl_theme/zenbum.styl","modified":1,"renderable":1}],"Cache":[{"_id":"themes/3-hexo/.gitignore","hash":"86a50fa08e69cab561892aa5edef24f9081bbde1","modified":1601438273648},{"_id":"themes/3-hexo/.DS_Store","hash":"0770f9d42bfdd8d420de48fed463015e001cf579","modified":1601438273648},{"_id":"themes/3-hexo/LICENSE","hash":"b04140c5f682db2b300428f97bb164fd7f5f18bd","modified":1601438273649},{"_id":"themes/3-hexo/README.md","hash":"a9704a2f258df66cdd4f1ff4c96be972c7052e78","modified":1601445159210},{"_id":"themes/3-hexo/_config.yml","hash":"50f21782141f45cd90e8310eca2828bf3704eceb","modified":1601625711785},{"_id":"themes/3-hexo/languages/en.yml","hash":"53ae29ae1237fc7822df85a6d2f8da6f0078625e","modified":1601438273650},{"_id":"themes/3-hexo/languages/zh-CN.yml","hash":"d2c6d86fe2ff03e6ee9bbc16dff8efe5b47ac297","modified":1601438273650},{"_id":"themes/3-hexo/layout/index.ejs","hash":"80c70add8883741a70678ed55ee021cf98a212c9","modified":1603186032574},{"_id":"themes/3-hexo/layout/indexs.md","hash":"fb38cabb12cbdcbd7ef68cd4d0eadb0e62e29c16","modified":1601518578814},{"_id":"themes/3-hexo/layout/post.ejs","hash":"e1f635d2822b98035e690a5da9b7c7b9d96bc34b","modified":1603185928942},{"_id":"themes/3-hexo/source/.DS_Store","hash":"fdcc907c46e093a14b153c5dc8c038461997ed3c","modified":1601438273656},{"_id":"themes/3-hexo/layout/_partial/article.ejs","hash":"2afeac04cbcfdb4c876345a10121f059417b1d46","modified":1601619971212},{"_id":"themes/3-hexo/layout/_partial/article_copyright.ejs","hash":"0ebb17d001cb7bb7606c616c380049a2e7124496","modified":1601438273651},{"_id":"themes/3-hexo/layout/_partial/comment.ejs","hash":"5507b4dfab2032345e012a0c5356f63b01395157","modified":1601438273651},{"_id":"themes/3-hexo/layout/_partial/copyright.ejs","hash":"97dab221e6150880caa89baabb82854c98fc5b79","modified":1601619823671},{"_id":"themes/3-hexo/layout/_partial/dashang.ejs","hash":"bc94eee27701b67d238f328737b578e8270989eb","modified":1601438273653},{"_id":"themes/3-hexo/layout/_partial/footer.ejs","hash":"ed479aa9affee3b02a76da06de45a7c40a97a706","modified":1601518976507},{"_id":"themes/3-hexo/layout/_partial/friends.ejs","hash":"d11092791e5c140ff81f2aefa0d1b051f403239d","modified":1601438273653},{"_id":"themes/3-hexo/layout/_partial/full-toc.ejs","hash":"a734c26d86da6697003ed27672c1b9b82b216c82","modified":1601438273653},{"_id":"themes/3-hexo/layout/_partial/header.ejs","hash":"d0b84370ca81c3baa02a05613ff040003acd2985","modified":1601438273654},{"_id":"themes/3-hexo/layout/_partial/mathjax.ejs","hash":"c2e5cef2377884cd79e5f686fe4f74b082744306","modified":1601438273654},{"_id":"themes/3-hexo/layout/_partial/meta.ejs","hash":"8a9e93f9cbe80763264018290da0b14b4bbe8ac5","modified":1601438273654},{"_id":"themes/3-hexo/layout/_partial/nav-right.ejs","hash":"3f9d91215ff36a6bcdaaf86e5b028dafc5a6a6fc","modified":1601438273655},{"_id":"themes/3-hexo/layout/_partial/nav-left.ejs","hash":"1251a2f965984eb605376be0ca4cf2a40c8c63c3","modified":1601455224432},{"_id":"themes/3-hexo/layout/_partial/toc-ref.ejs","hash":"6406251dabda66ef686d4c15edbc3061b6d828b8","modified":1601438273655},{"_id":"themes/3-hexo/source/css/gitalk.css","hash":"58177ce227c50ee359fbf99a4fdd26058887afc5","modified":1601438273669},{"_id":"themes/3-hexo/layout/_partial/tag.ejs","hash":"3cf8ba0c6112dfa8089603b8df3e31f70a272715","modified":1601438273655},{"_id":"themes/3-hexo/source/css/mobile.styl","hash":"134c6a0a3db0d8a6d28a957574918bfa5185b79b","modified":1601623118813},{"_id":"themes/3-hexo/source/css/style.styl","hash":"8a533bbcf602209a077bc3001481b205d39ab1b4","modified":1601445003509},{"_id":"themes/3-hexo/source/img/alipay.jpg","hash":"e457d1d3dfefbbd824d154cf756a2c6d10b812a2","modified":1601438273675},{"_id":"themes/3-hexo/source/img/article-list-background.jpeg","hash":"4fdf8b3e53dd02d6ee6360aebfadb0cba1fb5633","modified":1601438273676},{"_id":"themes/3-hexo/source/img/avatar.jpg","hash":"a42360089bfa892d803cf5747eab359d90f337f1","modified":1601438273678},{"_id":"themes/3-hexo/source/img/gov.png","hash":"f31c9f47faedf7f33b9580d6284ab891fb697560","modified":1601438273678},{"_id":"themes/3-hexo/source/img/brown-papersq.png","hash":"3a1332ede3a75a3d24f60b6ed69035b72da5e182","modified":1601438273678},{"_id":"themes/3-hexo/source/img/school-book.png","hash":"711ec983c874e093bb89eb77afcbdf6741fa61ee","modified":1601438273678},{"_id":"themes/3-hexo/source/js/iconfont.js","hash":"3a0869ca1b09af07d82987e343a3bc4cb9558ecb","modified":1601438273689},{"_id":"themes/3-hexo/source/js/script.js","hash":"03fc06177b47fd6bac7ae393f9712c726272467b","modified":1601438273689},{"_id":"themes/3-hexo/source/js/jquery.pjax.js","hash":"191c49fdb40dff115a49cfd2b30dffb888d86550","modified":1601438273689},{"_id":"themes/3-hexo/source/js/titleTip.js","hash":"81dca549063e29ba3a4a278f0f4388eba8a2167b","modified":1601438273690},{"_id":"themes/3-hexo/layout/_partial/comments/click2show.ejs","hash":"fa6675230f8c313236604e26926b142f4f418bdd","modified":1601438273651},{"_id":"themes/3-hexo/source/js/search.js","hash":"c80c9a231ee040c7adc07a477793873fb85ce8bc","modified":1601438273690},{"_id":"themes/3-hexo/layout/_partial/comments/disqus.ejs","hash":"cd0022ce7e6d6efb07a00e87477cdf791f7f6703","modified":1601438273651},{"_id":"themes/3-hexo/layout/_partial/comments/gitment.ejs","hash":"f16442568b43d034faaa8e3507f5ae8da34c7b72","modified":1601438273652},{"_id":"themes/3-hexo/layout/_partial/comments/gitalk.ejs","hash":"fbd3c7d72c8354d700918390c6cbfc0a11408277","modified":1601438273651},{"_id":"themes/3-hexo/layout/_partial/comments/livere.ejs","hash":"e820aa16b5ed4e024616b5e2d424925820d43e56","modified":1601438273652},{"_id":"themes/3-hexo/layout/_partial/comments/utteranc.ejs","hash":"c76773b96860940083baf16470b7b80ac098e645","modified":1601438273652},{"_id":"themes/3-hexo/source/css/_partial/comment.styl","hash":"2a9b5ffb759be85545a89f6d1194579a800f51a5","modified":1601438273657},{"_id":"themes/3-hexo/source/css/_partial/dashang.styl","hash":"f6447a2ac407228e1d53e3455db2919ac0e9f094","modified":1601438273657},{"_id":"themes/3-hexo/source/css/_partial/font.styl","hash":"cb6d7cc1ba37bdffd248c61fd6b8b26ce44b9ee5","modified":1601622673195},{"_id":"themes/3-hexo/source/css/_partial/fade.styl","hash":"4f687cbc74caf8a0887f5e89250284a9bce8b5c1","modified":1601438273658},{"_id":"themes/3-hexo/source/css/_partial/full-toc.styl","hash":"49a66e262d8f5196a14c4a30fd752dced69e6140","modified":1601454359137},{"_id":"themes/3-hexo/source/css/_partial/nav-left.styl","hash":"13b0174ac8f7dded790c160266bac10a0a4b579f","modified":1601522192666},{"_id":"themes/3-hexo/source/css/_partial/nav-right.styl","hash":"2848081c36377b47ff87686f7464a624bd991b88","modified":1601623438225},{"_id":"themes/3-hexo/source/css/_partial/nprogress.styl","hash":"65efbddd23a264e7d1e85f4073228526770e833c","modified":1601438273661},{"_id":"themes/3-hexo/source/css/_partial/num-load.styl","hash":"4b996440bba8ec755aa70bc6d074d7dbba55ec0c","modified":1601438273662},{"_id":"themes/3-hexo/source/css/_partial/post.styl","hash":"b0c4397ff8258b4de121ae7f4993dad1cef44f30","modified":1601622829618},{"_id":"themes/3-hexo/source/css/fonts/icomoon.eot","hash":"b6195bedc1cb2f9cfcb26cc27021f2e94be2ab0a","modified":1601438273663},{"_id":"themes/3-hexo/source/css/fonts/icomoon.svg","hash":"37ac1ef28b03f46bf3ad2606c86f0e1ec3e4405f","modified":1601438273663},{"_id":"themes/3-hexo/source/css/fonts/icomoon.woff","hash":"3985d29416bb9b19f50a2f20f2bbbce47f10af8d","modified":1601438273664},{"_id":"themes/3-hexo/source/css/fonts/icomoon.ttf","hash":"eb976d8b8559fcddfc2658a03a4350cb566fc06b","modified":1601438273664},{"_id":"themes/3-hexo/source/css/fonts/iconfont.ttf","hash":"140829ecf12d30c6e18d8dc6dc0c188a66addd25","modified":1601438273667},{"_id":"themes/3-hexo/source/css/fonts/iconfont.woff","hash":"0d2d4559f1ac4fa801eb8cc099fa5bf9dcf955ef","modified":1601438273667},{"_id":"themes/3-hexo/source/css/fonts/iconfont.svg","hash":"13974fe35fca836e870a960ecb11b7eca2e036f8","modified":1601438273665},{"_id":"themes/3-hexo/source/css/fonts/iconfont.eot","hash":"b14b8624988ff069aff3145f88c0d7ac49052bd3","modified":1601438273665},{"_id":"themes/3-hexo/source/css/fonts/iconfont.woff2","hash":"b0317a0b2ebb1181a8bf5a97d03556dd54538645","modified":1601438273667},{"_id":"themes/3-hexo/source/css/hl_theme/atom-light.styl","hash":"553987211d3323a7dfc0b08786b183a3435978c9","modified":1601438273670},{"_id":"themes/3-hexo/source/css/hl_theme/atom-dark.styl","hash":"f3eb4e5feda9cbd6242ccf44ca064e2979b5d719","modified":1601438273670},{"_id":"themes/3-hexo/source/css/hl_theme/brown-paper.styl","hash":"03af387edcc1cf8c18d12e9c440fd51b6cf425b6","modified":1601438273670},{"_id":"themes/3-hexo/source/css/fonts/selection.json","hash":"57c7f100019d57b512aab509185cb0a6eb9aa4c8","modified":1601438273668},{"_id":"themes/3-hexo/source/css/hl_theme/darcula.styl","hash":"2bfc14f27ccca108b4b3755782de8366e8bd001e","modified":1601438273671},{"_id":"themes/3-hexo/source/css/hl_theme/github-gist.styl","hash":"5e05b19832c1099bd9d284bc3ed00dc8a3d7ee23","modified":1601438273671},{"_id":"themes/3-hexo/source/css/hl_theme/github.styl","hash":"53276ff1f224f691dfe811e82c0af7f4476abf5d","modified":1601438273671},{"_id":"themes/3-hexo/source/css/hl_theme/gruvbox-dark.styl","hash":"315ad610d303caba9eac80a7d51002193a15478a","modified":1601438273671},{"_id":"themes/3-hexo/source/css/hl_theme/gruvbox-light.styl","hash":"1bece084b1dbbbd4af064f05feffd8c332b96a48","modified":1601438273672},{"_id":"themes/3-hexo/source/css/hl_theme/kimbie-dark.styl","hash":"e9c190f9ffc37a13cac430512e4e0c760205be4a","modified":1601438273672},{"_id":"themes/3-hexo/source/css/hl_theme/kimbie-light.styl","hash":"0c3ccd0d64e7504c7061d246dc32737f502f64e4","modified":1601438273672},{"_id":"themes/3-hexo/source/css/hl_theme/railscasts.styl","hash":"a6e8cfd2202afd7893f5268f3437421e35066e7b","modified":1601438273672},{"_id":"themes/3-hexo/source/css/hl_theme/rainbow.styl","hash":"e5c37646a9d9c1094f9aab7a7c65a4b242e8db00","modified":1601438273672},{"_id":"themes/3-hexo/source/css/hl_theme/school-book.styl","hash":"51659351b391a2be5c68728bb51b7ad467c5e0db","modified":1601438273672},{"_id":"themes/3-hexo/source/css/hl_theme/sublime.styl","hash":"501d75ef0f4385bea24d9b9b4cc434ba68d4be27","modified":1601438273673},{"_id":"themes/3-hexo/source/css/hl_theme/sunburst.styl","hash":"2aa9817e68fb2ed216781ea04b733039ebe18214","modified":1601438273673},{"_id":"themes/3-hexo/source/css/hl_theme/zenbum.styl","hash":"933a3b196d01254dea5e6f48105ea15e210ae000","modified":1601438273673},{"_id":"themes/3-hexo/source/img/weixin.jpg","hash":"8dafb22561698d0758fba9ea2a45abf6ad3512a2","modified":1601438273681},{"_id":"themes/3-hexo/source/img/moon.jpg","hash":"21c3a55fea9ba6648719007bdd988928e4cec911","modified":1601520694288},{"_id":"source/_posts/framework/design-model.md","hash":"cbca918b41135398bbce69ce715c957fe1572b3b","modified":1601625498443},{"_id":"source/_posts/thinking/book.md","hash":"437f1d62935764baab5742bcd1e6bb49bff64cff","modified":1601621337146},{"_id":"source/_posts/tools/software.md","hash":"bc4e4f8092be69aa89bdea72fd7527b92047671c","modified":1603187139143},{"_id":"source/_posts/tools/hexo.md","hash":"4dadbfdaa0def96a5b88a75f364d129620d1bd5b","modified":1603187139149},{"_id":"source/_posts/framework/ddd.md","hash":"1953b2ce5c83ebf8557e3fda08540177c56ac630","modified":1603187320219},{"_id":"source/_posts/backend/database/mysql-other.md","hash":"7fa0729ed2825e24b96f26ff12b1ba5f3f36fedc","modified":1601625671170},{"_id":"source/_posts/backend/service/zookeeper.md","hash":"865de844796e24b03578ecac38539c8dbf749683","modified":1603967944250},{"_id":"source/_posts/backend/database/canal.md","hash":"3ae4bc252f67d4c5e01cdddd4c8d6be3351eea69","modified":1603957659620},{"_id":"source/_posts/backend/java/utils/MapStruct.md","hash":"a32cfafcebdb7ae075c9a1f1dade1a5280833cff","modified":1603187102781},{"_id":"source/_posts/backend/java/utils/excel.md","hash":"8924ce63d0aaaf039513f26518cef699bf4b015f","modified":1603187102789},{"_id":"themes/3-hexo/source/js/gitment.js","hash":"59a1e03f2b0ce61dd9bd405d3c52d3e07cc10dec","modified":1601438273688},{"_id":"themes/3-hexo/source/js/gitalk.js","hash":"a75ead28e6a1fab2a006cc7332ca2d2e868ce8e1","modified":1601438273686},{"_id":"themes/3-hexo/source/img/road.png","hash":"dbca25351cc63ca6feb690dd368f58e8d71543ba","modified":1601450845821},{"_id":"public/search.xml","hash":"14dec3f23645379802bbb46d679a9569b8c0f60e","modified":1603967975499},{"_id":"public/2020/10/29/backend/service/zookeeper/index.html","hash":"d461b39eaa47851487ab061423fa761f7211ab37","modified":1603967975499},{"_id":"public/2020/10/20/backend/java/utils/excel/index.html","hash":"737fe98043802bc2b70bf3acd49a4033bcded9c3","modified":1603967975499},{"_id":"public/2020/10/09/framework/ddd/index.html","hash":"53f30b19cc6814547d230d47349385afa7f7c1f1","modified":1603967975499},{"_id":"public/2020/10/02/backend/database/canal/index.html","hash":"6e0a05fcff11e984de91cc09b29f932ba878dabc","modified":1603967975499},{"_id":"public/2020/10/02/backend/database/mysql-other/index.html","hash":"203f37552cfbde4f71535e7f48df864a7e299934","modified":1603967975499},{"_id":"public/2020/10/02/backend/java/utils/MapStruct/index.html","hash":"6a499cf79996298d047c7a6d8290b7f92c4a6523","modified":1603967975499},{"_id":"public/2020/10/02/framework/design-model/index.html","hash":"2c989bf5372be9b979c649f65e8459abcc2d1a85","modified":1603967975499},{"_id":"public/2020/10/02/thinking/book/index.html","hash":"0343c19b04a6ffe4167694de4f806c89b861534c","modified":1603967975499},{"_id":"public/2020/10/02/tools/software/index.html","hash":"591ebf0ca59d3f89ae4f1cbd20d63c61bd98a3d4","modified":1603967975499},{"_id":"public/2020/09/30/tools/hexo/index.html","hash":"670f3e042a94da02d55e64bda24080c362003181","modified":1603967975499},{"_id":"public/archives/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/archives/2020/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/archives/2020/09/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/archives/2020/10/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/categories/架构/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/categories/架构/DDD/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/categories/其他/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/categories/数据库/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/categories/服务搭建/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/categories/其他/博客工具/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/categories/后端/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/categories/数据库/Canal搭建/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/categories/阅读/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/categories/其他/软件/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/categories/数据库/MySQL相关/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/categories/服务搭建/zookeeper/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/categories/后端/Java/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/categories/阅读/思维方式/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/categories/架构/设计模式/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/tags/DDD/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/tags/tool/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/tags/canal/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/tags/mysql/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/tags/zookeeper/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/tags/utils/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/tags/思维方式/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/tags/设计模式/index.html","hash":"68ddb97a70a2d218f7304d9006875f9b218581f9","modified":1603967975499},{"_id":"public/img/article-list-background.jpeg","hash":"4fdf8b3e53dd02d6ee6360aebfadb0cba1fb5633","modified":1603967975499},{"_id":"public/img/gov.png","hash":"f31c9f47faedf7f33b9580d6284ab891fb697560","modified":1603967975499},{"_id":"public/img/brown-papersq.png","hash":"3a1332ede3a75a3d24f60b6ed69035b72da5e182","modified":1603967975499},{"_id":"public/img/school-book.png","hash":"711ec983c874e093bb89eb77afcbdf6741fa61ee","modified":1603967975499},{"_id":"public/css/fonts/icomoon.eot","hash":"b6195bedc1cb2f9cfcb26cc27021f2e94be2ab0a","modified":1603967975499},{"_id":"public/css/fonts/icomoon.svg","hash":"37ac1ef28b03f46bf3ad2606c86f0e1ec3e4405f","modified":1603967975499},{"_id":"public/css/fonts/icomoon.ttf","hash":"eb976d8b8559fcddfc2658a03a4350cb566fc06b","modified":1603967975499},{"_id":"public/css/fonts/icomoon.woff","hash":"3985d29416bb9b19f50a2f20f2bbbce47f10af8d","modified":1603967975499},{"_id":"public/css/fonts/iconfont.eot","hash":"b14b8624988ff069aff3145f88c0d7ac49052bd3","modified":1603967975499},{"_id":"public/css/fonts/iconfont.ttf","hash":"140829ecf12d30c6e18d8dc6dc0c188a66addd25","modified":1603967975499},{"_id":"public/css/fonts/iconfont.woff","hash":"0d2d4559f1ac4fa801eb8cc099fa5bf9dcf955ef","modified":1603967975499},{"_id":"public/css/fonts/iconfont.woff2","hash":"b0317a0b2ebb1181a8bf5a97d03556dd54538645","modified":1603967975499},{"_id":"public/css/fonts/iconfont.svg","hash":"13974fe35fca836e870a960ecb11b7eca2e036f8","modified":1603967975499},{"_id":"public/img/avatar.jpg","hash":"a42360089bfa892d803cf5747eab359d90f337f1","modified":1603967975499},{"_id":"public/img/alipay.jpg","hash":"e457d1d3dfefbbd824d154cf756a2c6d10b812a2","modified":1603967975499},{"_id":"public/img/moon.jpg","hash":"21c3a55fea9ba6648719007bdd988928e4cec911","modified":1603967975499},{"_id":"public/css/mobile.css","hash":"da7d75b7602c18d5ab1c9fe36dfad7bf68d4268e","modified":1603967975499},{"_id":"public/css/style.css","hash":"6b1e70cafc6c9a339b09ee7951ffbcc67c2ea45a","modified":1603967975499},{"_id":"public/img/weixin.jpg","hash":"8dafb22561698d0758fba9ea2a45abf6ad3512a2","modified":1603967975499},{"_id":"public/js/search.js","hash":"c80c9a231ee040c7adc07a477793873fb85ce8bc","modified":1603967975499},{"_id":"public/js/titleTip.js","hash":"81dca549063e29ba3a4a278f0f4388eba8a2167b","modified":1603967975499},{"_id":"public/css/hl_theme/atom-dark.css","hash":"88d11052a24e8100af6248eb4dbe1ce7b0e96408","modified":1603967975499},{"_id":"public/css/hl_theme/atom-light.css","hash":"d31edb9816dae6b01410028bceb91757a962f780","modified":1603967975499},{"_id":"public/css/hl_theme/brown-paper.css","hash":"500c8e750373f6656ff49a7857c871ceedcf8777","modified":1603967975499},{"_id":"public/css/hl_theme/darcula.css","hash":"4341074bae4bc9f0b86e32b623e27babc0159b6e","modified":1603967975499},{"_id":"public/css/hl_theme/github-gist.css","hash":"7a41c1c479d09df875f99f1f6d94aac42e9e2ad0","modified":1603967975499},{"_id":"public/css/hl_theme/github.css","hash":"e05a0806a508a26b9f3f3794b6b588ec6504ad3f","modified":1603967975499},{"_id":"public/css/hl_theme/gruvbox-dark.css","hash":"8c440d9b4ee19ac03eaee3c6af78ba52e5ba5535","modified":1603967975499},{"_id":"public/css/hl_theme/gruvbox-light.css","hash":"30514aaa242a34647aa666cfca4fc74c595ea8f2","modified":1603967975499},{"_id":"public/css/hl_theme/kimbie-dark.css","hash":"728527fcc308da454722c119b89e6da3025bd1e3","modified":1603967975499},{"_id":"public/css/hl_theme/kimbie-light.css","hash":"0c61926c989163faefb031d27bce3e287d6e10f2","modified":1603967975499},{"_id":"public/css/hl_theme/railscasts.css","hash":"511f2fd2a84d426e5da5cb17880cc08f73beb002","modified":1603967975499},{"_id":"public/css/hl_theme/rainbow.css","hash":"7ff4251938076ddb7e4e49413db82653e5b61321","modified":1603967975499},{"_id":"public/css/hl_theme/school-book.css","hash":"ffbbcd13a74ac2404262c50b7a43053dfd0096ff","modified":1603967975499},{"_id":"public/css/hl_theme/sublime.css","hash":"f65c5b116d9213afb9c324384a2f3bc86cb71121","modified":1603967975499},{"_id":"public/css/hl_theme/sunburst.css","hash":"8a135abac1512cf430d1d1ad2304b79afa1a4d6e","modified":1603967975499},{"_id":"public/css/hl_theme/zenbum.css","hash":"0a78f74a93568e20b32ca7427c719e9bae9a0b55","modified":1603967975499},{"_id":"public/js/jquery.pjax.js","hash":"191c49fdb40dff115a49cfd2b30dffb888d86550","modified":1603967975499},{"_id":"public/js/script.js","hash":"03fc06177b47fd6bac7ae393f9712c726272467b","modified":1603967975499},{"_id":"public/css/fonts/selection.json","hash":"047b615ea32dc48dae5b964061427d41feaaafdf","modified":1603967975499},{"_id":"public/css/gitalk.css","hash":"58177ce227c50ee359fbf99a4fdd26058887afc5","modified":1603967975499},{"_id":"public/js/iconfont.js","hash":"3a0869ca1b09af07d82987e343a3bc4cb9558ecb","modified":1603967975499},{"_id":"public/js/gitment.js","hash":"59a1e03f2b0ce61dd9bd405d3c52d3e07cc10dec","modified":1603967975499},{"_id":"public/img/road.png","hash":"dbca25351cc63ca6feb690dd368f58e8d71543ba","modified":1603967975499},{"_id":"public/js/gitalk.js","hash":"a75ead28e6a1fab2a006cc7332ca2d2e868ce8e1","modified":1603967975499}],"Category":[{"name":"架构","_id":"ckgup4b070001789kbbicb4bk"},{"name":"DDD","parent":"ckgup4b070001789kbbicb4bk","_id":"ckgup4b0a0004789k11bd6yal"},{"name":"其他","_id":"ckgup4b0g0009789k0t36bv09"},{"name":"数据库","_id":"ckgup4b0j000e789kfg3l2seg"},{"name":"服务搭建","_id":"ckgup4b0r000n789kcfgk9igq"},{"name":"博客工具","parent":"ckgup4b0g0009789k0t36bv09","_id":"ckgup4b0s000r789kdp1e0isn"},{"name":"后端","_id":"ckgup4b0t000u789kgr862wee"},{"name":"Canal搭建","parent":"ckgup4b0j000e789kfg3l2seg","_id":"ckgup4b0w0012789kg0bwd81o"},{"name":"阅读","_id":"ckgup4b0x0014789k02wjhv3n"},{"name":"软件","parent":"ckgup4b0g0009789k0t36bv09","_id":"ckgup4b0x0016789kayfz0fg1"},{"name":"MySQL相关","parent":"ckgup4b0j000e789kfg3l2seg","_id":"ckgup4b0y0018789k9s2oa3hs"},{"name":"zookeeper","parent":"ckgup4b0r000n789kcfgk9igq","_id":"ckgup4b0z001a789k60de5kgq"},{"name":"Java","parent":"ckgup4b0t000u789kgr862wee","_id":"ckgup4b10001d789kbgz9d34i"},{"name":"思维方式","parent":"ckgup4b0x0014789k02wjhv3n","_id":"ckgup4b11001i789kfoss4yt9"},{"name":"设计模式","parent":"ckgup4b070001789kbbicb4bk","_id":"ckgup4b17001r789k970g45zn"}],"Data":[],"Page":[],"Post":[{"title":"DDD","description":"DDD-领域驱动设计","date":"2020-10-09T08:51:54.000Z","_content":"\n\n### 方法论\n```text\n六边形架构、洋葱架构、整洁架构\n\nSIDE-EFFECT-FREE模式被称为无副作用模式，熟悉函数时编程的朋友都知道，严格的函数就是一个无副作用的函数，对于一个给定的输入，总是返回固定的结果，通常查询功能就是一个函数，命令功能就不是一个函数，它通常会执行某些修改。\n\n在DDD架构中，通常会将查询和命令操作分开，我们称之为CQRS(命令查询的责任分离Command Query Responsibility Segregation)，具体落地时，是否将Command和Query分开成两个项目可以看情况决定，大多数情况下放在一个项目可以提高业务内聚性，\n```","source":"_posts/framework/ddd.md","raw":"---\ntitle: DDD\ndescription: DDD-领域驱动设计\n#top: 1\ndate: 2020-10-09 16:51:54\ntags:\n- DDD\ncategories:\n- 架构\n- DDD\n---\n\n\n### 方法论\n```text\n六边形架构、洋葱架构、整洁架构\n\nSIDE-EFFECT-FREE模式被称为无副作用模式，熟悉函数时编程的朋友都知道，严格的函数就是一个无副作用的函数，对于一个给定的输入，总是返回固定的结果，通常查询功能就是一个函数，命令功能就不是一个函数，它通常会执行某些修改。\n\n在DDD架构中，通常会将查询和命令操作分开，我们称之为CQRS(命令查询的责任分离Command Query Responsibility Segregation)，具体落地时，是否将Command和Query分开成两个项目可以看情况决定，大多数情况下放在一个项目可以提高业务内聚性，\n```","slug":"framework/ddd","published":1,"updated":"2020-10-20T09:48:40.219Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckgup4b000000789kdhcef3xp","content":"<h3 id=\"方法论\"><a href=\"#方法论\" class=\"headerlink\" title=\"方法论\"></a>方法论</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">六边形架构、洋葱架构、整洁架构</span><br><span class=\"line\"></span><br><span class=\"line\">SIDE-EFFECT-FREE模式被称为无副作用模式，熟悉函数时编程的朋友都知道，严格的函数就是一个无副作用的函数，对于一个给定的输入，总是返回固定的结果，通常查询功能就是一个函数，命令功能就不是一个函数，它通常会执行某些修改。</span><br><span class=\"line\"></span><br><span class=\"line\">在DDD架构中，通常会将查询和命令操作分开，我们称之为CQRS(命令查询的责任分离Command Query Responsibility Segregation)，具体落地时，是否将Command和Query分开成两个项目可以看情况决定，大多数情况下放在一个项目可以提高业务内聚性，</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"方法论\"><a href=\"#方法论\" class=\"headerlink\" title=\"方法论\"></a>方法论</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">六边形架构、洋葱架构、整洁架构</span><br><span class=\"line\"></span><br><span class=\"line\">SIDE-EFFECT-FREE模式被称为无副作用模式，熟悉函数时编程的朋友都知道，严格的函数就是一个无副作用的函数，对于一个给定的输入，总是返回固定的结果，通常查询功能就是一个函数，命令功能就不是一个函数，它通常会执行某些修改。</span><br><span class=\"line\"></span><br><span class=\"line\">在DDD架构中，通常会将查询和命令操作分开，我们称之为CQRS(命令查询的责任分离Command Query Responsibility Segregation)，具体落地时，是否将Command和Query分开成两个项目可以看情况决定，大多数情况下放在一个项目可以提高业务内聚性，</span><br></pre></td></tr></table></figure>"},{"title":"Hexo搭建博客","date":"2020-09-30T06:51:20.000Z","_content":"\n> 记录本博客搭建步骤，适用于Mac/Linux系统，详细介绍及其他系统请参照Hexo官网\n\n\n### 相关链接\n- [Hexo官网](https://hexo.io/zh-cn/)\n- [官网主题](https://hexo.io/themes/)\n- [3-hexo主题](https://github.com/yelog/hexo-theme-3-hexo)\n- [3-hexo主题相关文档](https://yelog.org/2017/03/13/3-hexo-logs/)\n\n### 准备环境\n> mac用户推荐先安装Homebrew，通过Homebrew安装一下软件\n- [Homebrew](https://brew.sh/)\n- 安装Git\n- 安装Node.js\n\n### 安装Hexo\n- 安装完全包\n```text\nnpm install -g hexo-cli\n```\n\n### 创建项目\n```shell\n注：my-hexo - 项目名/项目文件夹名\nhexo init my-hexo\ncd my-hexo\nnpm install\n```\n\n### 项目结构\n- 目录\n```text\n.\n├── _config.yml\n├── package.json\n├── scaffolds\n├── source\n|   ├── _drafts\n|   └── _posts\n└── themes\n```\n- 目录介绍\n```text\n1._config.yml\n网站的 配置 信息，您可以在此配置大部分的参数\n2.package.json\n应用程序的信息。\n3.scaffolds\n模版 文件夹。当您新建文章时，Hexo 会根据 scaffold 来建立文件。\n4.source\n资源文件夹是存放用户资源的地方。除 _posts 文件夹之外，开头命名为 _ (下划线)的文件 / 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到 public 文件夹，而其他文件会被拷贝过去。\n5.themes\n主题 文件夹。Hexo 会根据主题来生成静态页面。\n```\n### 配置主题\n- [官网主题](https://hexo.io/themes/)\n- 本博客使用的主题 [3-hexo](https://github.com/yelog/hexo-theme-3-hexo)\n```text\n1.项目根目录下执行(下载其他主题，修改为themes/xxx即可)\ngit clone https://github.com/yelog/hexo-theme-3-hexo.git themes/3-hexo\n2.修改配置\n修改hexo根目录的_config.yml，theme: 3-hexo\n3.主题更新\ncd themes/3-hexo\ngit pull\n\n在此感谢提供主题的作者\n```\n\n### 写作\n- 常用文档命令\n```text\n1.新建文档\nhexo new [layout] <title>\n\n2.新建草稿文档\nhexo new [layout] <title>\n\n3.草稿<->发布\nhexo publish [layout] <title>\n```\n- 参数介绍\n|参数|值|作用|生成文件的路径|\n|-|-|-|-|\n|layout|post|正式发表的文章|source/_posts|\n|layout|page|静态页面|source|\n|layout|draft|草稿|source/_drafts|\n|title|-|文章标题&文件名|-|\n\n- 文档头部信息格式\n```text\n---\ntitle: Java\ndate: 2020-09-30 14:51:20\ntags: \n- Java\ncategories: \n- Java\n- 笔记\n---\n```\n\n- 文档头部信息解释\n|参数|作用|\n|-|-|\n|title|\t网站标题|\n|subtitle|\t网站副标题|\n|description|\t网站描述|\n|tags|标签，可多个|\n|categories|分类菜单，可定义多级|\n|keywords|\t网站的关键词。支援多个关键词。|\n|author|\t您的名字|\n|language|\t网站使用的语言。对于简体中文用户来说，使用不同的主题可能需要设置成不同的值，请参考你的主题的文档自行设置，常见的有 zh-Hans和 zh-CN。|\n|timezone|\t网站时区。Hexo 默认使用您电脑的时区。请参考 时区列表 进行设置，如 America/New_York, Japan, 和 UTC 。一般的，对于中国大陆地区可以使用 Asia/Shanghai。|\n\n### 运行&发布\n- 本地运行\n```text\nnpm run server\n```\n- 编译&部署\n```text\nhexo clean \nhexo generate\n编译后会生成public文件夹，部署gitpage可以直接指定public为资源文件夹即可\n```\n","source":"_posts/tools/hexo.md","raw":"---\ntitle: Hexo搭建博客\ndate: 2020-09-30 14:51:20\ntags: \n- tool\ncategories: \n- 其他\n- 博客工具\n---\n\n> 记录本博客搭建步骤，适用于Mac/Linux系统，详细介绍及其他系统请参照Hexo官网\n\n\n### 相关链接\n- [Hexo官网](https://hexo.io/zh-cn/)\n- [官网主题](https://hexo.io/themes/)\n- [3-hexo主题](https://github.com/yelog/hexo-theme-3-hexo)\n- [3-hexo主题相关文档](https://yelog.org/2017/03/13/3-hexo-logs/)\n\n### 准备环境\n> mac用户推荐先安装Homebrew，通过Homebrew安装一下软件\n- [Homebrew](https://brew.sh/)\n- 安装Git\n- 安装Node.js\n\n### 安装Hexo\n- 安装完全包\n```text\nnpm install -g hexo-cli\n```\n\n### 创建项目\n```shell\n注：my-hexo - 项目名/项目文件夹名\nhexo init my-hexo\ncd my-hexo\nnpm install\n```\n\n### 项目结构\n- 目录\n```text\n.\n├── _config.yml\n├── package.json\n├── scaffolds\n├── source\n|   ├── _drafts\n|   └── _posts\n└── themes\n```\n- 目录介绍\n```text\n1._config.yml\n网站的 配置 信息，您可以在此配置大部分的参数\n2.package.json\n应用程序的信息。\n3.scaffolds\n模版 文件夹。当您新建文章时，Hexo 会根据 scaffold 来建立文件。\n4.source\n资源文件夹是存放用户资源的地方。除 _posts 文件夹之外，开头命名为 _ (下划线)的文件 / 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到 public 文件夹，而其他文件会被拷贝过去。\n5.themes\n主题 文件夹。Hexo 会根据主题来生成静态页面。\n```\n### 配置主题\n- [官网主题](https://hexo.io/themes/)\n- 本博客使用的主题 [3-hexo](https://github.com/yelog/hexo-theme-3-hexo)\n```text\n1.项目根目录下执行(下载其他主题，修改为themes/xxx即可)\ngit clone https://github.com/yelog/hexo-theme-3-hexo.git themes/3-hexo\n2.修改配置\n修改hexo根目录的_config.yml，theme: 3-hexo\n3.主题更新\ncd themes/3-hexo\ngit pull\n\n在此感谢提供主题的作者\n```\n\n### 写作\n- 常用文档命令\n```text\n1.新建文档\nhexo new [layout] <title>\n\n2.新建草稿文档\nhexo new [layout] <title>\n\n3.草稿<->发布\nhexo publish [layout] <title>\n```\n- 参数介绍\n|参数|值|作用|生成文件的路径|\n|-|-|-|-|\n|layout|post|正式发表的文章|source/_posts|\n|layout|page|静态页面|source|\n|layout|draft|草稿|source/_drafts|\n|title|-|文章标题&文件名|-|\n\n- 文档头部信息格式\n```text\n---\ntitle: Java\ndate: 2020-09-30 14:51:20\ntags: \n- Java\ncategories: \n- Java\n- 笔记\n---\n```\n\n- 文档头部信息解释\n|参数|作用|\n|-|-|\n|title|\t网站标题|\n|subtitle|\t网站副标题|\n|description|\t网站描述|\n|tags|标签，可多个|\n|categories|分类菜单，可定义多级|\n|keywords|\t网站的关键词。支援多个关键词。|\n|author|\t您的名字|\n|language|\t网站使用的语言。对于简体中文用户来说，使用不同的主题可能需要设置成不同的值，请参考你的主题的文档自行设置，常见的有 zh-Hans和 zh-CN。|\n|timezone|\t网站时区。Hexo 默认使用您电脑的时区。请参考 时区列表 进行设置，如 America/New_York, Japan, 和 UTC 。一般的，对于中国大陆地区可以使用 Asia/Shanghai。|\n\n### 运行&发布\n- 本地运行\n```text\nnpm run server\n```\n- 编译&部署\n```text\nhexo clean \nhexo generate\n编译后会生成public文件夹，部署gitpage可以直接指定public为资源文件夹即可\n```\n","slug":"tools/hexo","published":1,"updated":"2020-10-20T09:45:39.149Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckgup4b0d0007789kedxocmid","content":"<blockquote>\n<p>记录本博客搭建步骤，适用于Mac/Linux系统，详细介绍及其他系统请参照Hexo官网</p>\n</blockquote>\n<h3 id=\"相关链接\"><a href=\"#相关链接\" class=\"headerlink\" title=\"相关链接\"></a>相关链接</h3><ul>\n<li><a href=\"https://hexo.io/zh-cn/\">Hexo官网</a></li>\n<li><a href=\"https://hexo.io/themes/\">官网主题</a></li>\n<li><a href=\"https://github.com/yelog/hexo-theme-3-hexo\">3-hexo主题</a></li>\n<li><a href=\"https://yelog.org/2017/03/13/3-hexo-logs/\">3-hexo主题相关文档</a></li>\n</ul>\n<h3 id=\"准备环境\"><a href=\"#准备环境\" class=\"headerlink\" title=\"准备环境\"></a>准备环境</h3><blockquote>\n<p>mac用户推荐先安装Homebrew，通过Homebrew安装一下软件</p>\n</blockquote>\n<ul>\n<li><a href=\"https://brew.sh/\">Homebrew</a></li>\n<li>安装Git</li>\n<li>安装Node.js</li>\n</ul>\n<h3 id=\"安装Hexo\"><a href=\"#安装Hexo\" class=\"headerlink\" title=\"安装Hexo\"></a>安装Hexo</h3><ul>\n<li>安装完全包<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"创建项目\"><a href=\"#创建项目\" class=\"headerlink\" title=\"创建项目\"></a>创建项目</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">注：my-hexo - 项目名/项目文件夹名</span><br><span class=\"line\">hexo init my-hexo</span><br><span class=\"line\">cd my-hexo</span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"项目结构\"><a href=\"#项目结构\" class=\"headerlink\" title=\"项目结构\"></a>项目结构</h3><ul>\n<li>目录<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.</span><br><span class=\"line\">├── _config.yml</span><br><span class=\"line\">├── package.json</span><br><span class=\"line\">├── scaffolds</span><br><span class=\"line\">├── source</span><br><span class=\"line\">|   ├── _drafts</span><br><span class=\"line\">|   └── _posts</span><br><span class=\"line\">└── themes</span><br></pre></td></tr></table></figure></li>\n<li>目录介绍<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1._config.yml</span><br><span class=\"line\">网站的 配置 信息，您可以在此配置大部分的参数</span><br><span class=\"line\">2.package.json</span><br><span class=\"line\">应用程序的信息。</span><br><span class=\"line\">3.scaffolds</span><br><span class=\"line\">模版 文件夹。当您新建文章时，Hexo 会根据 scaffold 来建立文件。</span><br><span class=\"line\">4.source</span><br><span class=\"line\">资源文件夹是存放用户资源的地方。除 _posts 文件夹之外，开头命名为 _ (下划线)的文件 / 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到 public 文件夹，而其他文件会被拷贝过去。</span><br><span class=\"line\">5.themes</span><br><span class=\"line\">主题 文件夹。Hexo 会根据主题来生成静态页面。</span><br></pre></td></tr></table></figure>\n<h3 id=\"配置主题\"><a href=\"#配置主题\" class=\"headerlink\" title=\"配置主题\"></a>配置主题</h3></li>\n<li><a href=\"https://hexo.io/themes/\">官网主题</a></li>\n<li>本博客使用的主题 <a href=\"https://github.com/yelog/hexo-theme-3-hexo\">3-hexo</a><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.项目根目录下执行(下载其他主题，修改为themes/xxx即可)</span><br><span class=\"line\">git clone https://github.com/yelog/hexo-theme-3-hexo.git themes/3-hexo</span><br><span class=\"line\">2.修改配置</span><br><span class=\"line\">修改hexo根目录的_config.yml，theme: 3-hexo</span><br><span class=\"line\">3.主题更新</span><br><span class=\"line\">cd themes/3-hexo</span><br><span class=\"line\">git pull</span><br><span class=\"line\"></span><br><span class=\"line\">在此感谢提供主题的作者</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"写作\"><a href=\"#写作\" class=\"headerlink\" title=\"写作\"></a>写作</h3><ul>\n<li><p>常用文档命令</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.新建文档</span><br><span class=\"line\">hexo new [layout] &lt;title&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">2.新建草稿文档</span><br><span class=\"line\">hexo new [layout] &lt;title&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">3.草稿&lt;-&gt;发布</span><br><span class=\"line\">hexo publish [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure></li>\n<li><p>参数介绍</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>值</th>\n<th>作用</th>\n<th>生成文件的路径</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>layout</td>\n<td>post</td>\n<td>正式发表的文章</td>\n<td>source/_posts</td>\n</tr>\n<tr>\n<td>layout</td>\n<td>page</td>\n<td>静态页面</td>\n<td>source</td>\n</tr>\n<tr>\n<td>layout</td>\n<td>draft</td>\n<td>草稿</td>\n<td>source/_drafts</td>\n</tr>\n<tr>\n<td>title</td>\n<td>-</td>\n<td>文章标题&amp;文件名</td>\n<td>-</td>\n</tr>\n</tbody></table>\n</li>\n<li><p>文档头部信息格式</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: Java</span><br><span class=\"line\">date: 2020-09-30 14:51:20</span><br><span class=\"line\">tags: </span><br><span class=\"line\">- Java</span><br><span class=\"line\">categories: </span><br><span class=\"line\">- Java</span><br><span class=\"line\">- 笔记</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>文档头部信息解释</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>title</td>\n<td>网站标题</td>\n</tr>\n<tr>\n<td>subtitle</td>\n<td>网站副标题</td>\n</tr>\n<tr>\n<td>description</td>\n<td>网站描述</td>\n</tr>\n<tr>\n<td>tags</td>\n<td>标签，可多个</td>\n</tr>\n<tr>\n<td>categories</td>\n<td>分类菜单，可定义多级</td>\n</tr>\n<tr>\n<td>keywords</td>\n<td>网站的关键词。支援多个关键词。</td>\n</tr>\n<tr>\n<td>author</td>\n<td>您的名字</td>\n</tr>\n<tr>\n<td>language</td>\n<td>网站使用的语言。对于简体中文用户来说，使用不同的主题可能需要设置成不同的值，请参考你的主题的文档自行设置，常见的有 zh-Hans和 zh-CN。</td>\n</tr>\n<tr>\n<td>timezone</td>\n<td>网站时区。Hexo 默认使用您电脑的时区。请参考 时区列表 进行设置，如 America/New_York, Japan, 和 UTC 。一般的，对于中国大陆地区可以使用 Asia/Shanghai。</td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n<h3 id=\"运行-amp-发布\"><a href=\"#运行-amp-发布\" class=\"headerlink\" title=\"运行&amp;发布\"></a>运行&amp;发布</h3><ul>\n<li>本地运行<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run server</span><br></pre></td></tr></table></figure></li>\n<li>编译&amp;部署<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean </span><br><span class=\"line\">hexo generate</span><br><span class=\"line\">编译后会生成public文件夹，部署gitpage可以直接指定public为资源文件夹即可</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>记录本博客搭建步骤，适用于Mac/Linux系统，详细介绍及其他系统请参照Hexo官网</p>\n</blockquote>\n<h3 id=\"相关链接\"><a href=\"#相关链接\" class=\"headerlink\" title=\"相关链接\"></a>相关链接</h3><ul>\n<li><a href=\"https://hexo.io/zh-cn/\">Hexo官网</a></li>\n<li><a href=\"https://hexo.io/themes/\">官网主题</a></li>\n<li><a href=\"https://github.com/yelog/hexo-theme-3-hexo\">3-hexo主题</a></li>\n<li><a href=\"https://yelog.org/2017/03/13/3-hexo-logs/\">3-hexo主题相关文档</a></li>\n</ul>\n<h3 id=\"准备环境\"><a href=\"#准备环境\" class=\"headerlink\" title=\"准备环境\"></a>准备环境</h3><blockquote>\n<p>mac用户推荐先安装Homebrew，通过Homebrew安装一下软件</p>\n</blockquote>\n<ul>\n<li><a href=\"https://brew.sh/\">Homebrew</a></li>\n<li>安装Git</li>\n<li>安装Node.js</li>\n</ul>\n<h3 id=\"安装Hexo\"><a href=\"#安装Hexo\" class=\"headerlink\" title=\"安装Hexo\"></a>安装Hexo</h3><ul>\n<li>安装完全包<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"创建项目\"><a href=\"#创建项目\" class=\"headerlink\" title=\"创建项目\"></a>创建项目</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">注：my-hexo - 项目名/项目文件夹名</span><br><span class=\"line\">hexo init my-hexo</span><br><span class=\"line\">cd my-hexo</span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"项目结构\"><a href=\"#项目结构\" class=\"headerlink\" title=\"项目结构\"></a>项目结构</h3><ul>\n<li>目录<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.</span><br><span class=\"line\">├── _config.yml</span><br><span class=\"line\">├── package.json</span><br><span class=\"line\">├── scaffolds</span><br><span class=\"line\">├── source</span><br><span class=\"line\">|   ├── _drafts</span><br><span class=\"line\">|   └── _posts</span><br><span class=\"line\">└── themes</span><br></pre></td></tr></table></figure></li>\n<li>目录介绍<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1._config.yml</span><br><span class=\"line\">网站的 配置 信息，您可以在此配置大部分的参数</span><br><span class=\"line\">2.package.json</span><br><span class=\"line\">应用程序的信息。</span><br><span class=\"line\">3.scaffolds</span><br><span class=\"line\">模版 文件夹。当您新建文章时，Hexo 会根据 scaffold 来建立文件。</span><br><span class=\"line\">4.source</span><br><span class=\"line\">资源文件夹是存放用户资源的地方。除 _posts 文件夹之外，开头命名为 _ (下划线)的文件 / 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到 public 文件夹，而其他文件会被拷贝过去。</span><br><span class=\"line\">5.themes</span><br><span class=\"line\">主题 文件夹。Hexo 会根据主题来生成静态页面。</span><br></pre></td></tr></table></figure>\n<h3 id=\"配置主题\"><a href=\"#配置主题\" class=\"headerlink\" title=\"配置主题\"></a>配置主题</h3></li>\n<li><a href=\"https://hexo.io/themes/\">官网主题</a></li>\n<li>本博客使用的主题 <a href=\"https://github.com/yelog/hexo-theme-3-hexo\">3-hexo</a><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.项目根目录下执行(下载其他主题，修改为themes/xxx即可)</span><br><span class=\"line\">git clone https://github.com/yelog/hexo-theme-3-hexo.git themes/3-hexo</span><br><span class=\"line\">2.修改配置</span><br><span class=\"line\">修改hexo根目录的_config.yml，theme: 3-hexo</span><br><span class=\"line\">3.主题更新</span><br><span class=\"line\">cd themes/3-hexo</span><br><span class=\"line\">git pull</span><br><span class=\"line\"></span><br><span class=\"line\">在此感谢提供主题的作者</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"写作\"><a href=\"#写作\" class=\"headerlink\" title=\"写作\"></a>写作</h3><ul>\n<li><p>常用文档命令</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.新建文档</span><br><span class=\"line\">hexo new [layout] &lt;title&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">2.新建草稿文档</span><br><span class=\"line\">hexo new [layout] &lt;title&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">3.草稿&lt;-&gt;发布</span><br><span class=\"line\">hexo publish [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure></li>\n<li><p>参数介绍</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>值</th>\n<th>作用</th>\n<th>生成文件的路径</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>layout</td>\n<td>post</td>\n<td>正式发表的文章</td>\n<td>source/_posts</td>\n</tr>\n<tr>\n<td>layout</td>\n<td>page</td>\n<td>静态页面</td>\n<td>source</td>\n</tr>\n<tr>\n<td>layout</td>\n<td>draft</td>\n<td>草稿</td>\n<td>source/_drafts</td>\n</tr>\n<tr>\n<td>title</td>\n<td>-</td>\n<td>文章标题&amp;文件名</td>\n<td>-</td>\n</tr>\n</tbody></table>\n</li>\n<li><p>文档头部信息格式</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: Java</span><br><span class=\"line\">date: 2020-09-30 14:51:20</span><br><span class=\"line\">tags: </span><br><span class=\"line\">- Java</span><br><span class=\"line\">categories: </span><br><span class=\"line\">- Java</span><br><span class=\"line\">- 笔记</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>文档头部信息解释</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>title</td>\n<td>网站标题</td>\n</tr>\n<tr>\n<td>subtitle</td>\n<td>网站副标题</td>\n</tr>\n<tr>\n<td>description</td>\n<td>网站描述</td>\n</tr>\n<tr>\n<td>tags</td>\n<td>标签，可多个</td>\n</tr>\n<tr>\n<td>categories</td>\n<td>分类菜单，可定义多级</td>\n</tr>\n<tr>\n<td>keywords</td>\n<td>网站的关键词。支援多个关键词。</td>\n</tr>\n<tr>\n<td>author</td>\n<td>您的名字</td>\n</tr>\n<tr>\n<td>language</td>\n<td>网站使用的语言。对于简体中文用户来说，使用不同的主题可能需要设置成不同的值，请参考你的主题的文档自行设置，常见的有 zh-Hans和 zh-CN。</td>\n</tr>\n<tr>\n<td>timezone</td>\n<td>网站时区。Hexo 默认使用您电脑的时区。请参考 时区列表 进行设置，如 America/New_York, Japan, 和 UTC 。一般的，对于中国大陆地区可以使用 Asia/Shanghai。</td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n<h3 id=\"运行-amp-发布\"><a href=\"#运行-amp-发布\" class=\"headerlink\" title=\"运行&amp;发布\"></a>运行&amp;发布</h3><ul>\n<li>本地运行<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run server</span><br></pre></td></tr></table></figure></li>\n<li>编译&amp;部署<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean </span><br><span class=\"line\">hexo generate</span><br><span class=\"line\">编译后会生成public文件夹，部署gitpage可以直接指定public为资源文件夹即可</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n"},{"title":"Canal-Docker搭建","date":"2020-10-02T07:51:46.000Z","_content":"\n### 相关网址\n- [官网](https://github.com/alibaba/canal/wiki/Home)\n- [快速开始](https://github.com/alibaba/canal/wiki/QuickStart)\n- [Docker镜像地址](https://hub.docker.com/r/canal/canal-server/tags/)\n- [Canal Admin QuickStart](https://github.com/alibaba/canal/wiki/Canal-Admin-QuickStart)\n- [Canal Client Example](https://github.com/alibaba/canal/wiki/ClientExample)\n\n### 搭建步骤\n- 推荐docker方式部署,注意配置时mysql的IP地址\n#### 准备\n```text\n1.mysql\n  需要确认mysql已开启binlog设置\n2.拉取canal-server镜像\n  docker pull canal/canal-server:v1.1.4\n3.下载docker启动脚本\n   wget https://github.com/alibaba/canal/blob/master/docker/run.sh\n4.修改启动脚本中数据库配置\n\n5.下载canal-admin包,修改配置(或者复制run.sh并修改启动命令，启动canal-admin)-可选\n   wget https://github.com/alibaba/canal/releases/download/canal-1.1.4/canal.admin-1.1.4.tar.gz\n   mkdir canal-admin\n   tar -zxvf canal.admin-1.1.4.tar.gz -C canal-admin\n   修改conf/application.yml中数据库配置\n   初始化mysql脚本，conf/canal_manager.sql\n   \n6.canal-client\n   参考 Canal Client Example\n```\n\n#### 启动命令\n```text\n1.canal-server\n   运行 sh run.sh 会出现提示，复制提示后运行\n2.canal-admin\n   sh bin/startup.sh\n3.启动程序(canal-client)\n    成功后会打印出empty count : xx\n```\n\n#### CanalAdmin配置\n\n- 1.集群配置\n```text\n集群名-local\nzk地址-127.0.0.1:2181 (可以不搭建zk)\n以下为配置项\n    # register ip\n    canal.register.ip =\n    # canal admin config\n    canal.admin.manager = 127.0.0.1:8089\n    canal.admin.port = 11110\n    canal.admin.user = admin\n    canal.admin.passwd = 4ACFE3202A5FF5CF467898FC58AAB1D615029441\n    # admin auto register\n    canal.admin.register.auto = true\n    canal.admin.register.cluster =\n  \n```\n\n- 2.Server管理\n```text\nServerIP-127.0.0.1 (同一集群下server ip不能重复)\nadmin端口号-11110\n\n```\n\n- 3.Instance管理\n```text\n注意：Instance名称要与cancal-server容器中文件夹一致，默认有example\nInstance配置项\n    ## mysql serverId\n    canal.instance.mysql.slaveId = 1002\n    #position info，需要改成自己的数据库信息\n    canal.instance.master.address = 127.0.0.1:3306\n    #username/password，需要改成自己的数据库信息\n    canal.instance.dbUsername = root  \n    canal.instance.dbPassword = 123456\n    canal.instance.connectionCharset = UTF-8\n    #table regex，过滤规则\n    canal.instance.filter.regex = .\\*\\\\\\\\..\\*\n\n```\n\n#### 一个Canal服务读取多个MySQL实例(docker中操作)\n```text\n1.进入canal容器内部关闭服务(不关闭复制会导致写入db2失败)\ndocker exec -it canal-server bash\n./stop.sh\n\n2.复制一份Instatnce配置(注意确认example2中文件权限与example中是否一样)\ncd canal-server/conf\ncp -R example example2\n\n3.Canal Admin中添加新配置\n   Instance名称-example2\n\n4.集成zookeeper\n修改canal-server/conf/下配置canal.properties\ncanal.register.ip = zk服务器IP\ncanal.zkServers = zk服务器IP:2181\n```","source":"_posts/backend/database/canal.md","raw":"---\ntitle: Canal-Docker搭建\ndate: 2020-10-02 15:51:46\ntags: \n- canal\ncategories: \n- 数据库\n- Canal搭建\n---\n\n### 相关网址\n- [官网](https://github.com/alibaba/canal/wiki/Home)\n- [快速开始](https://github.com/alibaba/canal/wiki/QuickStart)\n- [Docker镜像地址](https://hub.docker.com/r/canal/canal-server/tags/)\n- [Canal Admin QuickStart](https://github.com/alibaba/canal/wiki/Canal-Admin-QuickStart)\n- [Canal Client Example](https://github.com/alibaba/canal/wiki/ClientExample)\n\n### 搭建步骤\n- 推荐docker方式部署,注意配置时mysql的IP地址\n#### 准备\n```text\n1.mysql\n  需要确认mysql已开启binlog设置\n2.拉取canal-server镜像\n  docker pull canal/canal-server:v1.1.4\n3.下载docker启动脚本\n   wget https://github.com/alibaba/canal/blob/master/docker/run.sh\n4.修改启动脚本中数据库配置\n\n5.下载canal-admin包,修改配置(或者复制run.sh并修改启动命令，启动canal-admin)-可选\n   wget https://github.com/alibaba/canal/releases/download/canal-1.1.4/canal.admin-1.1.4.tar.gz\n   mkdir canal-admin\n   tar -zxvf canal.admin-1.1.4.tar.gz -C canal-admin\n   修改conf/application.yml中数据库配置\n   初始化mysql脚本，conf/canal_manager.sql\n   \n6.canal-client\n   参考 Canal Client Example\n```\n\n#### 启动命令\n```text\n1.canal-server\n   运行 sh run.sh 会出现提示，复制提示后运行\n2.canal-admin\n   sh bin/startup.sh\n3.启动程序(canal-client)\n    成功后会打印出empty count : xx\n```\n\n#### CanalAdmin配置\n\n- 1.集群配置\n```text\n集群名-local\nzk地址-127.0.0.1:2181 (可以不搭建zk)\n以下为配置项\n    # register ip\n    canal.register.ip =\n    # canal admin config\n    canal.admin.manager = 127.0.0.1:8089\n    canal.admin.port = 11110\n    canal.admin.user = admin\n    canal.admin.passwd = 4ACFE3202A5FF5CF467898FC58AAB1D615029441\n    # admin auto register\n    canal.admin.register.auto = true\n    canal.admin.register.cluster =\n  \n```\n\n- 2.Server管理\n```text\nServerIP-127.0.0.1 (同一集群下server ip不能重复)\nadmin端口号-11110\n\n```\n\n- 3.Instance管理\n```text\n注意：Instance名称要与cancal-server容器中文件夹一致，默认有example\nInstance配置项\n    ## mysql serverId\n    canal.instance.mysql.slaveId = 1002\n    #position info，需要改成自己的数据库信息\n    canal.instance.master.address = 127.0.0.1:3306\n    #username/password，需要改成自己的数据库信息\n    canal.instance.dbUsername = root  \n    canal.instance.dbPassword = 123456\n    canal.instance.connectionCharset = UTF-8\n    #table regex，过滤规则\n    canal.instance.filter.regex = .\\*\\\\\\\\..\\*\n\n```\n\n#### 一个Canal服务读取多个MySQL实例(docker中操作)\n```text\n1.进入canal容器内部关闭服务(不关闭复制会导致写入db2失败)\ndocker exec -it canal-server bash\n./stop.sh\n\n2.复制一份Instatnce配置(注意确认example2中文件权限与example中是否一样)\ncd canal-server/conf\ncp -R example example2\n\n3.Canal Admin中添加新配置\n   Instance名称-example2\n\n4.集成zookeeper\n修改canal-server/conf/下配置canal.properties\ncanal.register.ip = zk服务器IP\ncanal.zkServers = zk服务器IP:2181\n```","slug":"backend/database/canal","published":1,"updated":"2020-10-29T07:47:39.620Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckgup4b0f0008789k3qk23798","content":"<h3 id=\"相关网址\"><a href=\"#相关网址\" class=\"headerlink\" title=\"相关网址\"></a>相关网址</h3><ul>\n<li><a href=\"https://github.com/alibaba/canal/wiki/Home\">官网</a></li>\n<li><a href=\"https://github.com/alibaba/canal/wiki/QuickStart\">快速开始</a></li>\n<li><a href=\"https://hub.docker.com/r/canal/canal-server/tags/\">Docker镜像地址</a></li>\n<li><a href=\"https://github.com/alibaba/canal/wiki/Canal-Admin-QuickStart\">Canal Admin QuickStart</a></li>\n<li><a href=\"https://github.com/alibaba/canal/wiki/ClientExample\">Canal Client Example</a></li>\n</ul>\n<h3 id=\"搭建步骤\"><a href=\"#搭建步骤\" class=\"headerlink\" title=\"搭建步骤\"></a>搭建步骤</h3><ul>\n<li>推荐docker方式部署,注意配置时mysql的IP地址<h4 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h4><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.mysql</span><br><span class=\"line\">  需要确认mysql已开启binlog设置</span><br><span class=\"line\">2.拉取canal-server镜像</span><br><span class=\"line\">  docker pull canal/canal-server:v1.1.4</span><br><span class=\"line\">3.下载docker启动脚本</span><br><span class=\"line\">   wget https://github.com/alibaba/canal/blob/master/docker/run.sh</span><br><span class=\"line\">4.修改启动脚本中数据库配置</span><br><span class=\"line\"></span><br><span class=\"line\">5.下载canal-admin包,修改配置(或者复制run.sh并修改启动命令，启动canal-admin)-可选</span><br><span class=\"line\">   wget https://github.com/alibaba/canal/releases/download/canal-1.1.4/canal.admin-1.1.4.tar.gz</span><br><span class=\"line\">   mkdir canal-admin</span><br><span class=\"line\">   tar -zxvf canal.admin-1.1.4.tar.gz -C canal-admin</span><br><span class=\"line\">   修改conf/application.yml中数据库配置</span><br><span class=\"line\">   初始化mysql脚本，conf/canal_manager.sql</span><br><span class=\"line\">   </span><br><span class=\"line\">6.canal-client</span><br><span class=\"line\">   参考 Canal Client Example</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h4 id=\"启动命令\"><a href=\"#启动命令\" class=\"headerlink\" title=\"启动命令\"></a>启动命令</h4><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.canal-server</span><br><span class=\"line\">   运行 sh run.sh 会出现提示，复制提示后运行</span><br><span class=\"line\">2.canal-admin</span><br><span class=\"line\">   sh bin/startup.sh</span><br><span class=\"line\">3.启动程序(canal-client)</span><br><span class=\"line\">    成功后会打印出empty count : xx</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"CanalAdmin配置\"><a href=\"#CanalAdmin配置\" class=\"headerlink\" title=\"CanalAdmin配置\"></a>CanalAdmin配置</h4><ul>\n<li><p>1.集群配置</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">集群名-local</span><br><span class=\"line\">zk地址-127.0.0.1:2181 (可以不搭建zk)</span><br><span class=\"line\">以下为配置项</span><br><span class=\"line\">    # register ip</span><br><span class=\"line\">    canal.register.ip =</span><br><span class=\"line\">    # canal admin config</span><br><span class=\"line\">    canal.admin.manager = 127.0.0.1:8089</span><br><span class=\"line\">    canal.admin.port = 11110</span><br><span class=\"line\">    canal.admin.user = admin</span><br><span class=\"line\">    canal.admin.passwd = 4ACFE3202A5FF5CF467898FC58AAB1D615029441</span><br><span class=\"line\">    # admin auto register</span><br><span class=\"line\">    canal.admin.register.auto = true</span><br><span class=\"line\">    canal.admin.register.cluster =</span><br><span class=\"line\">  </span><br></pre></td></tr></table></figure>\n</li>\n<li><p>2.Server管理</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ServerIP-127.0.0.1 (同一集群下server ip不能重复)</span><br><span class=\"line\">admin端口号-11110</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>3.Instance管理</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">注意：Instance名称要与cancal-server容器中文件夹一致，默认有example</span><br><span class=\"line\">Instance配置项</span><br><span class=\"line\">    ## mysql serverId</span><br><span class=\"line\">    canal.instance.mysql.slaveId = 1002</span><br><span class=\"line\">    #position info，需要改成自己的数据库信息</span><br><span class=\"line\">    canal.instance.master.address = 127.0.0.1:3306</span><br><span class=\"line\">    #username/password，需要改成自己的数据库信息</span><br><span class=\"line\">    canal.instance.dbUsername = root  </span><br><span class=\"line\">    canal.instance.dbPassword = 123456</span><br><span class=\"line\">    canal.instance.connectionCharset = UTF-8</span><br><span class=\"line\">    #table regex，过滤规则</span><br><span class=\"line\">    canal.instance.filter.regex = .\\*\\\\\\\\..\\*</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h4 id=\"一个Canal服务读取多个MySQL实例-docker中操作\"><a href=\"#一个Canal服务读取多个MySQL实例-docker中操作\" class=\"headerlink\" title=\"一个Canal服务读取多个MySQL实例(docker中操作)\"></a>一个Canal服务读取多个MySQL实例(docker中操作)</h4><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.进入canal容器内部关闭服务(不关闭复制会导致写入db2失败)</span><br><span class=\"line\">docker exec -it canal-server bash</span><br><span class=\"line\">./stop.sh</span><br><span class=\"line\"></span><br><span class=\"line\">2.复制一份Instatnce配置(注意确认example2中文件权限与example中是否一样)</span><br><span class=\"line\">cd canal-server/conf</span><br><span class=\"line\">cp -R example example2</span><br><span class=\"line\"></span><br><span class=\"line\">3.Canal Admin中添加新配置</span><br><span class=\"line\">   Instance名称-example2</span><br><span class=\"line\"></span><br><span class=\"line\">4.集成zookeeper</span><br><span class=\"line\">修改canal-server/conf/下配置canal.properties</span><br><span class=\"line\">canal.register.ip = zk服务器IP</span><br><span class=\"line\">canal.zkServers = zk服务器IP:2181</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"相关网址\"><a href=\"#相关网址\" class=\"headerlink\" title=\"相关网址\"></a>相关网址</h3><ul>\n<li><a href=\"https://github.com/alibaba/canal/wiki/Home\">官网</a></li>\n<li><a href=\"https://github.com/alibaba/canal/wiki/QuickStart\">快速开始</a></li>\n<li><a href=\"https://hub.docker.com/r/canal/canal-server/tags/\">Docker镜像地址</a></li>\n<li><a href=\"https://github.com/alibaba/canal/wiki/Canal-Admin-QuickStart\">Canal Admin QuickStart</a></li>\n<li><a href=\"https://github.com/alibaba/canal/wiki/ClientExample\">Canal Client Example</a></li>\n</ul>\n<h3 id=\"搭建步骤\"><a href=\"#搭建步骤\" class=\"headerlink\" title=\"搭建步骤\"></a>搭建步骤</h3><ul>\n<li>推荐docker方式部署,注意配置时mysql的IP地址<h4 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h4><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.mysql</span><br><span class=\"line\">  需要确认mysql已开启binlog设置</span><br><span class=\"line\">2.拉取canal-server镜像</span><br><span class=\"line\">  docker pull canal/canal-server:v1.1.4</span><br><span class=\"line\">3.下载docker启动脚本</span><br><span class=\"line\">   wget https://github.com/alibaba/canal/blob/master/docker/run.sh</span><br><span class=\"line\">4.修改启动脚本中数据库配置</span><br><span class=\"line\"></span><br><span class=\"line\">5.下载canal-admin包,修改配置(或者复制run.sh并修改启动命令，启动canal-admin)-可选</span><br><span class=\"line\">   wget https://github.com/alibaba/canal/releases/download/canal-1.1.4/canal.admin-1.1.4.tar.gz</span><br><span class=\"line\">   mkdir canal-admin</span><br><span class=\"line\">   tar -zxvf canal.admin-1.1.4.tar.gz -C canal-admin</span><br><span class=\"line\">   修改conf/application.yml中数据库配置</span><br><span class=\"line\">   初始化mysql脚本，conf/canal_manager.sql</span><br><span class=\"line\">   </span><br><span class=\"line\">6.canal-client</span><br><span class=\"line\">   参考 Canal Client Example</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h4 id=\"启动命令\"><a href=\"#启动命令\" class=\"headerlink\" title=\"启动命令\"></a>启动命令</h4><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.canal-server</span><br><span class=\"line\">   运行 sh run.sh 会出现提示，复制提示后运行</span><br><span class=\"line\">2.canal-admin</span><br><span class=\"line\">   sh bin/startup.sh</span><br><span class=\"line\">3.启动程序(canal-client)</span><br><span class=\"line\">    成功后会打印出empty count : xx</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"CanalAdmin配置\"><a href=\"#CanalAdmin配置\" class=\"headerlink\" title=\"CanalAdmin配置\"></a>CanalAdmin配置</h4><ul>\n<li><p>1.集群配置</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">集群名-local</span><br><span class=\"line\">zk地址-127.0.0.1:2181 (可以不搭建zk)</span><br><span class=\"line\">以下为配置项</span><br><span class=\"line\">    # register ip</span><br><span class=\"line\">    canal.register.ip =</span><br><span class=\"line\">    # canal admin config</span><br><span class=\"line\">    canal.admin.manager = 127.0.0.1:8089</span><br><span class=\"line\">    canal.admin.port = 11110</span><br><span class=\"line\">    canal.admin.user = admin</span><br><span class=\"line\">    canal.admin.passwd = 4ACFE3202A5FF5CF467898FC58AAB1D615029441</span><br><span class=\"line\">    # admin auto register</span><br><span class=\"line\">    canal.admin.register.auto = true</span><br><span class=\"line\">    canal.admin.register.cluster =</span><br><span class=\"line\">  </span><br></pre></td></tr></table></figure>\n</li>\n<li><p>2.Server管理</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ServerIP-127.0.0.1 (同一集群下server ip不能重复)</span><br><span class=\"line\">admin端口号-11110</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>3.Instance管理</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">注意：Instance名称要与cancal-server容器中文件夹一致，默认有example</span><br><span class=\"line\">Instance配置项</span><br><span class=\"line\">    ## mysql serverId</span><br><span class=\"line\">    canal.instance.mysql.slaveId = 1002</span><br><span class=\"line\">    #position info，需要改成自己的数据库信息</span><br><span class=\"line\">    canal.instance.master.address = 127.0.0.1:3306</span><br><span class=\"line\">    #username/password，需要改成自己的数据库信息</span><br><span class=\"line\">    canal.instance.dbUsername = root  </span><br><span class=\"line\">    canal.instance.dbPassword = 123456</span><br><span class=\"line\">    canal.instance.connectionCharset = UTF-8</span><br><span class=\"line\">    #table regex，过滤规则</span><br><span class=\"line\">    canal.instance.filter.regex = .\\*\\\\\\\\..\\*</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h4 id=\"一个Canal服务读取多个MySQL实例-docker中操作\"><a href=\"#一个Canal服务读取多个MySQL实例-docker中操作\" class=\"headerlink\" title=\"一个Canal服务读取多个MySQL实例(docker中操作)\"></a>一个Canal服务读取多个MySQL实例(docker中操作)</h4><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.进入canal容器内部关闭服务(不关闭复制会导致写入db2失败)</span><br><span class=\"line\">docker exec -it canal-server bash</span><br><span class=\"line\">./stop.sh</span><br><span class=\"line\"></span><br><span class=\"line\">2.复制一份Instatnce配置(注意确认example2中文件权限与example中是否一样)</span><br><span class=\"line\">cd canal-server/conf</span><br><span class=\"line\">cp -R example example2</span><br><span class=\"line\"></span><br><span class=\"line\">3.Canal Admin中添加新配置</span><br><span class=\"line\">   Instance名称-example2</span><br><span class=\"line\"></span><br><span class=\"line\">4.集成zookeeper</span><br><span class=\"line\">修改canal-server/conf/下配置canal.properties</span><br><span class=\"line\">canal.register.ip = zk服务器IP</span><br><span class=\"line\">canal.zkServers = zk服务器IP:2181</span><br></pre></td></tr></table></figure>"},{"title":"MySQL相关","date":"2020-10-02T07:51:46.000Z","_content":"\n### 存储引擎区别\n\n- 查看数据库支持的存储引擎\n```sql\nshow engines;\n```\n\n类型 | 磁盘文件 | 特性 | 适用场景\n---|--- | --- | --- |\nFEDERATED||用来访问远程表存储引擎|访问远程表\nMRG_MYISAM||把多个MyISAM表合并为一个逻辑单元；查询一个表时，相当与查询其所有成员表|可以用分区表替换merge表|\nMyISAM|.MDY数据)<br/> .MYI(索引)|主要的非实物处理存储引擎|\nBLACKHOLE||丢弃写操作，读操作返回空内容|\nCSV|.CSV(数据)<br/>.CSM(元数据)|存储数据时，会以逗号作为数据项之间的分割符号|不支持索引，数据存在为普通文本文件\nMEMORY||置于内存的表|\nARCHIVE||用于数据存档(行插入后不能再修改)|数据归档，大批量存储后不修改\nInnoDB|.ibd(数据&索引)|具备外键支持功能的事务处理引擎|\nPERFORMANCE_SCHEMA||用于监视MySQL服务器|\nNDB||集群存储引擎||\n|TokuDB||存储速度快，查询速度略慢与InnoDB,支持事务等，未来替代InnoDB|\n\n\n### 建表语句\n```sql\n1.表结构完全复制\ncreate table user_bak LIKE user;\n\n2.使用某些字段建表\ncreate table user_bak select now() as time ;\n\n3.建表时字段值强制转换\ncreate table user_bak select CAST('2019-8-01' as UNSIGNED) as time;\n\n4.临时表\n解释：只对当前会话有效，有同名表则原表隐藏不可见，会话结束自动清除\ncreate temporary table user_bak  like user;\ndrop temporary table user_bak;\n```\n\n### Cast类型强制转换\n```sql\n语法: \n    Cast(字段名 as 转换的类型 )\n\n支持的类型:\n    CHAR[(N)] 字符型 \n    DATE 日期型\n    DATETIME 日期和时间型\n    DECIMAL float型\n    SIGNED int\n    TIME 时间型\n\n场景:\n    1.解决utf8字符查询时传入表情符，导致报错；\n\n```\n\n### 新建分区表\n- 示例\n```sql\ncreate table user_bak (\n id int(11) UNSIGNED AUTO_INCREMENT ,\n `name` varchar(200) DEFAULT null COMMENT '名称',\n rand_num int(11) DEFAULT NULL COMMENT '随机数',\n birthday datetime default null comment '生日',\n PRIMARY KEY (`id`,rand_num)\n) ENGINE = INNODB partition by RANGE (rand_num)\n(\n\tPARTITION p0 VALUES less THAN (20),\n\tPARTITION p1 VALUES less THAN (40),\n\tPARTITION p2 VALUES less THAN (60),\n\tPARTITION p3 VALUES less THAN (80),\n\tPARTITION p4 VALUES less THAN MAXVALUE\n);\n```\n- 注意点\n```text\n1.PRIMARY必须包含分区的字段\n2.不能单独创建分区，建表时就要创建\n```\n\n- 常见异常\n```text\n1.ERROR 1064  不能单独创建分区\n解决：建表时就要把分区创建好\n\n2.ERROR 1503 主键必须包含分区函数中所有列\n解决：创建分区的字段必须放在主键索引中\n```\n\n### 子查询\n```sql\n1.ALL - 查询返回单个结果,类似in操作\nselect * from user_bak where (id) \n>= ALL(select id from user_bak where id = 10)\n\n2.ANY & SUM -效果一样,类似or操作\nselect * from user_bak where (name,id) \n= SOME(select name,id from user_bak where id = 1 or name = 'eee')\n\n```\n\n### FullText全文搜索\n- 全文搜索类型\n```text\n1.自然语言搜索-搜索包含匹配词的信息\n2.布尔模式搜索-\n3.查询扩展搜索\n```\n- 创建索引需要满足的条件\n```text\n1.表类型为MyISAM,version5.6以后引入了对InnoDB支持\n2.字段类型只能是char/varchar/text类型\n3.全文搜索会自动忽略掉常用词(在记录中出现几率为50%以上)-验证可以查出来\n4.停用词会被过滤掉(the/after/other等)\n5.少于4个字符会被忽略，查不出来(默认4-84个字符范围，可更改)\n```\n\n- 语法\n```text\n1.自然语言\nselect *,match(`name`) against('good boy') \nas 'percentage' from `user` where match(`name`) against('good boy');\n\n2.布尔模式\nselect *,match(`name`) against('good boy' in boolean MODE) as 'percentage' from `user` where match(`name`) against('good boy' in boolean MODE);\n\n-- 内容顺序完全匹配\nselect *,match(`name`) against('\"good boy\"' in boolean MODE) as 'percentage' from `user` where match(`name`) against('\"good boy\"' in boolean MODE);\n\n3.扩展查询\nselect *,match(`name`) against('good boy' with query expansion) as 'percentage' from `user` where match(`name`) against('good boy'  with query expansion);\n\n```\n\n- 修改查询字符长度\n```text\n1.my.cnf文件中ft_min_word_len\n2.重建FullText索引或者快速修复\nrepair table table_name quick;\n\n```\n\n## 字符集\n### 有字符集有关的系统设置\n```text\ncharacter_set_system 用于存储的字符集\n\ncharacter_set_server 服务器默认字符集\ncollation_server  系统排序规则\ncharacter_set_database 数据库字符集\ncollation_database  数据库排序规则\ncharacter_set_client 客户端向服务器发送SQL时使用的字符集\ncharacter_set_result 表示服务器返回结果时使用的字符集\ncharacter_set_connection 连接时使用的字符串\ncharacter_set_filesystem 文件系统字符集\n```\n\n### 空间值\n```text\nOpenGIS规范\npoint 类型值,只支持InnoDB/MyISAM/NDB/ARCHIVE引擎\npoint(xxxx,xxxx)\n```\n\n### 模糊匹配查询\n```text\n1.like\n    % 匹配任意数量的字符序列\n    _ 只能匹配单个字符\n    \\%  \\_  转义\n2.REGEXP-正则查询\n\n```\n\n### 新建用户后授权\n```\n- %表示所有IP可连接\nCREATE USER `用户名`@`%` IDENTIFIED BY '密码';\ngrant all privileges on jwgateway.* to '用户名'@'%' identified by '密码';\nselect * from mysql.user;\n```","source":"_posts/backend/database/mysql-other.md","raw":"---\ntitle: MySQL相关\ndate: 2020-10-02 15:51:46\ntags: \n- mysql\ncategories: \n- 数据库\n- MySQL相关\n---\n\n### 存储引擎区别\n\n- 查看数据库支持的存储引擎\n```sql\nshow engines;\n```\n\n类型 | 磁盘文件 | 特性 | 适用场景\n---|--- | --- | --- |\nFEDERATED||用来访问远程表存储引擎|访问远程表\nMRG_MYISAM||把多个MyISAM表合并为一个逻辑单元；查询一个表时，相当与查询其所有成员表|可以用分区表替换merge表|\nMyISAM|.MDY数据)<br/> .MYI(索引)|主要的非实物处理存储引擎|\nBLACKHOLE||丢弃写操作，读操作返回空内容|\nCSV|.CSV(数据)<br/>.CSM(元数据)|存储数据时，会以逗号作为数据项之间的分割符号|不支持索引，数据存在为普通文本文件\nMEMORY||置于内存的表|\nARCHIVE||用于数据存档(行插入后不能再修改)|数据归档，大批量存储后不修改\nInnoDB|.ibd(数据&索引)|具备外键支持功能的事务处理引擎|\nPERFORMANCE_SCHEMA||用于监视MySQL服务器|\nNDB||集群存储引擎||\n|TokuDB||存储速度快，查询速度略慢与InnoDB,支持事务等，未来替代InnoDB|\n\n\n### 建表语句\n```sql\n1.表结构完全复制\ncreate table user_bak LIKE user;\n\n2.使用某些字段建表\ncreate table user_bak select now() as time ;\n\n3.建表时字段值强制转换\ncreate table user_bak select CAST('2019-8-01' as UNSIGNED) as time;\n\n4.临时表\n解释：只对当前会话有效，有同名表则原表隐藏不可见，会话结束自动清除\ncreate temporary table user_bak  like user;\ndrop temporary table user_bak;\n```\n\n### Cast类型强制转换\n```sql\n语法: \n    Cast(字段名 as 转换的类型 )\n\n支持的类型:\n    CHAR[(N)] 字符型 \n    DATE 日期型\n    DATETIME 日期和时间型\n    DECIMAL float型\n    SIGNED int\n    TIME 时间型\n\n场景:\n    1.解决utf8字符查询时传入表情符，导致报错；\n\n```\n\n### 新建分区表\n- 示例\n```sql\ncreate table user_bak (\n id int(11) UNSIGNED AUTO_INCREMENT ,\n `name` varchar(200) DEFAULT null COMMENT '名称',\n rand_num int(11) DEFAULT NULL COMMENT '随机数',\n birthday datetime default null comment '生日',\n PRIMARY KEY (`id`,rand_num)\n) ENGINE = INNODB partition by RANGE (rand_num)\n(\n\tPARTITION p0 VALUES less THAN (20),\n\tPARTITION p1 VALUES less THAN (40),\n\tPARTITION p2 VALUES less THAN (60),\n\tPARTITION p3 VALUES less THAN (80),\n\tPARTITION p4 VALUES less THAN MAXVALUE\n);\n```\n- 注意点\n```text\n1.PRIMARY必须包含分区的字段\n2.不能单独创建分区，建表时就要创建\n```\n\n- 常见异常\n```text\n1.ERROR 1064  不能单独创建分区\n解决：建表时就要把分区创建好\n\n2.ERROR 1503 主键必须包含分区函数中所有列\n解决：创建分区的字段必须放在主键索引中\n```\n\n### 子查询\n```sql\n1.ALL - 查询返回单个结果,类似in操作\nselect * from user_bak where (id) \n>= ALL(select id from user_bak where id = 10)\n\n2.ANY & SUM -效果一样,类似or操作\nselect * from user_bak where (name,id) \n= SOME(select name,id from user_bak where id = 1 or name = 'eee')\n\n```\n\n### FullText全文搜索\n- 全文搜索类型\n```text\n1.自然语言搜索-搜索包含匹配词的信息\n2.布尔模式搜索-\n3.查询扩展搜索\n```\n- 创建索引需要满足的条件\n```text\n1.表类型为MyISAM,version5.6以后引入了对InnoDB支持\n2.字段类型只能是char/varchar/text类型\n3.全文搜索会自动忽略掉常用词(在记录中出现几率为50%以上)-验证可以查出来\n4.停用词会被过滤掉(the/after/other等)\n5.少于4个字符会被忽略，查不出来(默认4-84个字符范围，可更改)\n```\n\n- 语法\n```text\n1.自然语言\nselect *,match(`name`) against('good boy') \nas 'percentage' from `user` where match(`name`) against('good boy');\n\n2.布尔模式\nselect *,match(`name`) against('good boy' in boolean MODE) as 'percentage' from `user` where match(`name`) against('good boy' in boolean MODE);\n\n-- 内容顺序完全匹配\nselect *,match(`name`) against('\"good boy\"' in boolean MODE) as 'percentage' from `user` where match(`name`) against('\"good boy\"' in boolean MODE);\n\n3.扩展查询\nselect *,match(`name`) against('good boy' with query expansion) as 'percentage' from `user` where match(`name`) against('good boy'  with query expansion);\n\n```\n\n- 修改查询字符长度\n```text\n1.my.cnf文件中ft_min_word_len\n2.重建FullText索引或者快速修复\nrepair table table_name quick;\n\n```\n\n## 字符集\n### 有字符集有关的系统设置\n```text\ncharacter_set_system 用于存储的字符集\n\ncharacter_set_server 服务器默认字符集\ncollation_server  系统排序规则\ncharacter_set_database 数据库字符集\ncollation_database  数据库排序规则\ncharacter_set_client 客户端向服务器发送SQL时使用的字符集\ncharacter_set_result 表示服务器返回结果时使用的字符集\ncharacter_set_connection 连接时使用的字符串\ncharacter_set_filesystem 文件系统字符集\n```\n\n### 空间值\n```text\nOpenGIS规范\npoint 类型值,只支持InnoDB/MyISAM/NDB/ARCHIVE引擎\npoint(xxxx,xxxx)\n```\n\n### 模糊匹配查询\n```text\n1.like\n    % 匹配任意数量的字符序列\n    _ 只能匹配单个字符\n    \\%  \\_  转义\n2.REGEXP-正则查询\n\n```\n\n### 新建用户后授权\n```\n- %表示所有IP可连接\nCREATE USER `用户名`@`%` IDENTIFIED BY '密码';\ngrant all privileges on jwgateway.* to '用户名'@'%' identified by '密码';\nselect * from mysql.user;\n```","slug":"backend/database/mysql-other","published":1,"updated":"2020-10-02T08:01:11.170Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckgup4b0g000b789k5k6i7o17","content":"<h3 id=\"存储引擎区别\"><a href=\"#存储引擎区别\" class=\"headerlink\" title=\"存储引擎区别\"></a>存储引擎区别</h3><ul>\n<li>查看数据库支持的存储引擎<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">engines</span>;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>类型</th>\n<th>磁盘文件</th>\n<th>特性</th>\n<th>适用场景</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>FEDERATED</td>\n<td></td>\n<td>用来访问远程表存储引擎</td>\n<td>访问远程表</td>\n</tr>\n<tr>\n<td>MRG_MYISAM</td>\n<td></td>\n<td>把多个MyISAM表合并为一个逻辑单元；查询一个表时，相当与查询其所有成员表</td>\n<td>可以用分区表替换merge表</td>\n</tr>\n<tr>\n<td>MyISAM</td>\n<td>.MDY数据)<br/> .MYI(索引)</td>\n<td>主要的非实物处理存储引擎</td>\n<td></td>\n</tr>\n<tr>\n<td>BLACKHOLE</td>\n<td></td>\n<td>丢弃写操作，读操作返回空内容</td>\n<td></td>\n</tr>\n<tr>\n<td>CSV</td>\n<td>.CSV(数据)<br/>.CSM(元数据)</td>\n<td>存储数据时，会以逗号作为数据项之间的分割符号</td>\n<td>不支持索引，数据存在为普通文本文件</td>\n</tr>\n<tr>\n<td>MEMORY</td>\n<td></td>\n<td>置于内存的表</td>\n<td></td>\n</tr>\n<tr>\n<td>ARCHIVE</td>\n<td></td>\n<td>用于数据存档(行插入后不能再修改)</td>\n<td>数据归档，大批量存储后不修改</td>\n</tr>\n<tr>\n<td>InnoDB</td>\n<td>.ibd(数据&amp;索引)</td>\n<td>具备外键支持功能的事务处理引擎</td>\n<td></td>\n</tr>\n<tr>\n<td>PERFORMANCE_SCHEMA</td>\n<td></td>\n<td>用于监视MySQL服务器</td>\n<td></td>\n</tr>\n<tr>\n<td>NDB</td>\n<td></td>\n<td>集群存储引擎</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>TokuDB</td>\n<td></td>\n<td>存储速度快，查询速度略慢与InnoDB,支持事务等，未来替代InnoDB</td>\n</tr>\n</tbody></table>\n<h3 id=\"建表语句\"><a href=\"#建表语句\" class=\"headerlink\" title=\"建表语句\"></a>建表语句</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.表结构完全复制</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_bak <span class=\"keyword\">LIKE</span> <span class=\"keyword\">user</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">2.使用某些字段建表</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_bak <span class=\"keyword\">select</span> <span class=\"keyword\">now</span>() <span class=\"keyword\">as</span> <span class=\"built_in\">time</span> ;</span><br><span class=\"line\"></span><br><span class=\"line\">3.建表时字段值强制转换</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_bak <span class=\"keyword\">select</span> <span class=\"keyword\">CAST</span>(<span class=\"string\">&#x27;2019-8-01&#x27;</span> <span class=\"keyword\">as</span> <span class=\"keyword\">UNSIGNED</span>) <span class=\"keyword\">as</span> <span class=\"built_in\">time</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">4.临时表</span><br><span class=\"line\">解释：只对当前会话有效，有同名表则原表隐藏不可见，会话结束自动清除</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">temporary</span> <span class=\"keyword\">table</span> user_bak  <span class=\"keyword\">like</span> <span class=\"keyword\">user</span>;</span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">temporary</span> <span class=\"keyword\">table</span> user_bak;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Cast类型强制转换\"><a href=\"#Cast类型强制转换\" class=\"headerlink\" title=\"Cast类型强制转换\"></a>Cast类型强制转换</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">语法: </span><br><span class=\"line\">    Cast(字段名 as 转换的类型 )</span><br><span class=\"line\"></span><br><span class=\"line\">支持的类型:</span><br><span class=\"line\">    CHAR[(N)] 字符型 </span><br><span class=\"line\">    DATE 日期型</span><br><span class=\"line\">    DATETIME 日期和时间型</span><br><span class=\"line\">    DECIMAL float型</span><br><span class=\"line\">    SIGNED int</span><br><span class=\"line\">    TIME 时间型</span><br><span class=\"line\"></span><br><span class=\"line\">场景:</span><br><span class=\"line\">    1.解决utf8字符查询时传入表情符，导致报错；</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"新建分区表\"><a href=\"#新建分区表\" class=\"headerlink\" title=\"新建分区表\"></a>新建分区表</h3><ul>\n<li><p>示例</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_bak (</span><br><span class=\"line\"> <span class=\"keyword\">id</span> <span class=\"built_in\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">UNSIGNED</span> AUTO_INCREMENT ,</span><br><span class=\"line\"> <span class=\"string\">`name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">200</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">null</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;名称&#x27;</span>,</span><br><span class=\"line\"> rand_num <span class=\"built_in\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;随机数&#x27;</span>,</span><br><span class=\"line\"> birthday datetime <span class=\"keyword\">default</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">&#x27;生日&#x27;</span>,</span><br><span class=\"line\"> PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>,rand_num)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span> = <span class=\"keyword\">INNODB</span> <span class=\"keyword\">partition</span> <span class=\"keyword\">by</span> <span class=\"keyword\">RANGE</span> (rand_num)</span><br><span class=\"line\">(</span><br><span class=\"line\">\t<span class=\"keyword\">PARTITION</span> p0 <span class=\"keyword\">VALUES</span> <span class=\"keyword\">less</span> <span class=\"keyword\">THAN</span> (<span class=\"number\">20</span>),</span><br><span class=\"line\">\t<span class=\"keyword\">PARTITION</span> p1 <span class=\"keyword\">VALUES</span> <span class=\"keyword\">less</span> <span class=\"keyword\">THAN</span> (<span class=\"number\">40</span>),</span><br><span class=\"line\">\t<span class=\"keyword\">PARTITION</span> p2 <span class=\"keyword\">VALUES</span> <span class=\"keyword\">less</span> <span class=\"keyword\">THAN</span> (<span class=\"number\">60</span>),</span><br><span class=\"line\">\t<span class=\"keyword\">PARTITION</span> p3 <span class=\"keyword\">VALUES</span> <span class=\"keyword\">less</span> <span class=\"keyword\">THAN</span> (<span class=\"number\">80</span>),</span><br><span class=\"line\">\t<span class=\"keyword\">PARTITION</span> p4 <span class=\"keyword\">VALUES</span> <span class=\"keyword\">less</span> <span class=\"keyword\">THAN</span> MAXVALUE</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></li>\n<li><p>注意点</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.PRIMARY必须包含分区的字段</span><br><span class=\"line\">2.不能单独创建分区，建表时就要创建</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>常见异常</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.ERROR 1064  不能单独创建分区</span><br><span class=\"line\">解决：建表时就要把分区创建好</span><br><span class=\"line\"></span><br><span class=\"line\">2.ERROR 1503 主键必须包含分区函数中所有列</span><br><span class=\"line\">解决：创建分区的字段必须放在主键索引中</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"子查询\"><a href=\"#子查询\" class=\"headerlink\" title=\"子查询\"></a>子查询</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.ALL - 查询返回单个结果,类似in操作</span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> user_bak <span class=\"keyword\">where</span> (<span class=\"keyword\">id</span>) </span><br><span class=\"line\">&gt;= <span class=\"keyword\">ALL</span>(<span class=\"keyword\">select</span> <span class=\"keyword\">id</span> <span class=\"keyword\">from</span> user_bak <span class=\"keyword\">where</span> <span class=\"keyword\">id</span> = <span class=\"number\">10</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">2.</span><span class=\"keyword\">ANY</span> &amp; <span class=\"keyword\">SUM</span> -效果一样,类似<span class=\"keyword\">or</span>操作</span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> user_bak <span class=\"keyword\">where</span> (<span class=\"keyword\">name</span>,<span class=\"keyword\">id</span>) </span><br><span class=\"line\">= <span class=\"keyword\">SOME</span>(<span class=\"keyword\">select</span> <span class=\"keyword\">name</span>,<span class=\"keyword\">id</span> <span class=\"keyword\">from</span> user_bak <span class=\"keyword\">where</span> <span class=\"keyword\">id</span> = <span class=\"number\">1</span> <span class=\"keyword\">or</span> <span class=\"keyword\">name</span> = <span class=\"string\">&#x27;eee&#x27;</span>)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"FullText全文搜索\"><a href=\"#FullText全文搜索\" class=\"headerlink\" title=\"FullText全文搜索\"></a>FullText全文搜索</h3><ul>\n<li><p>全文搜索类型</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.自然语言搜索-搜索包含匹配词的信息</span><br><span class=\"line\">2.布尔模式搜索-</span><br><span class=\"line\">3.查询扩展搜索</span><br></pre></td></tr></table></figure></li>\n<li><p>创建索引需要满足的条件</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.表类型为MyISAM,version5.6以后引入了对InnoDB支持</span><br><span class=\"line\">2.字段类型只能是char/varchar/text类型</span><br><span class=\"line\">3.全文搜索会自动忽略掉常用词(在记录中出现几率为50%以上)-验证可以查出来</span><br><span class=\"line\">4.停用词会被过滤掉(the/after/other等)</span><br><span class=\"line\">5.少于4个字符会被忽略，查不出来(默认4-84个字符范围，可更改)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>语法</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.自然语言</span><br><span class=\"line\">select *,match(`name`) against(&#x27;good boy&#x27;) </span><br><span class=\"line\">as &#x27;percentage&#x27; from `user` where match(`name`) against(&#x27;good boy&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\">2.布尔模式</span><br><span class=\"line\">select *,match(`name`) against(&#x27;good boy&#x27; in boolean MODE) as &#x27;percentage&#x27; from `user` where match(`name`) against(&#x27;good boy&#x27; in boolean MODE);</span><br><span class=\"line\"></span><br><span class=\"line\">-- 内容顺序完全匹配</span><br><span class=\"line\">select *,match(`name`) against(&#x27;&quot;good boy&quot;&#x27; in boolean MODE) as &#x27;percentage&#x27; from `user` where match(`name`) against(&#x27;&quot;good boy&quot;&#x27; in boolean MODE);</span><br><span class=\"line\"></span><br><span class=\"line\">3.扩展查询</span><br><span class=\"line\">select *,match(`name`) against(&#x27;good boy&#x27; with query expansion) as &#x27;percentage&#x27; from `user` where match(`name`) against(&#x27;good boy&#x27;  with query expansion);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>修改查询字符长度</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.my.cnf文件中ft_min_word_len</span><br><span class=\"line\">2.重建FullText索引或者快速修复</span><br><span class=\"line\">repair table table_name quick;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h2 id=\"字符集\"><a href=\"#字符集\" class=\"headerlink\" title=\"字符集\"></a>字符集</h2><h3 id=\"有字符集有关的系统设置\"><a href=\"#有字符集有关的系统设置\" class=\"headerlink\" title=\"有字符集有关的系统设置\"></a>有字符集有关的系统设置</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">character_set_system 用于存储的字符集</span><br><span class=\"line\"></span><br><span class=\"line\">character_set_server 服务器默认字符集</span><br><span class=\"line\">collation_server  系统排序规则</span><br><span class=\"line\">character_set_database 数据库字符集</span><br><span class=\"line\">collation_database  数据库排序规则</span><br><span class=\"line\">character_set_client 客户端向服务器发送SQL时使用的字符集</span><br><span class=\"line\">character_set_result 表示服务器返回结果时使用的字符集</span><br><span class=\"line\">character_set_connection 连接时使用的字符串</span><br><span class=\"line\">character_set_filesystem 文件系统字符集</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"空间值\"><a href=\"#空间值\" class=\"headerlink\" title=\"空间值\"></a>空间值</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">OpenGIS规范</span><br><span class=\"line\">point 类型值,只支持InnoDB/MyISAM/NDB/ARCHIVE引擎</span><br><span class=\"line\">point(xxxx,xxxx)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"模糊匹配查询\"><a href=\"#模糊匹配查询\" class=\"headerlink\" title=\"模糊匹配查询\"></a>模糊匹配查询</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.like</span><br><span class=\"line\">    % 匹配任意数量的字符序列</span><br><span class=\"line\">    _ 只能匹配单个字符</span><br><span class=\"line\">    \\%  \\_  转义</span><br><span class=\"line\">2.REGEXP-正则查询</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"新建用户后授权\"><a href=\"#新建用户后授权\" class=\"headerlink\" title=\"新建用户后授权\"></a>新建用户后授权</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- %表示所有IP可连接</span><br><span class=\"line\">CREATE USER &#96;用户名&#96;@&#96;%&#96; IDENTIFIED BY &#39;密码&#39;;</span><br><span class=\"line\">grant all privileges on jwgateway.* to &#39;用户名&#39;@&#39;%&#39; identified by &#39;密码&#39;;</span><br><span class=\"line\">select * from mysql.user;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"存储引擎区别\"><a href=\"#存储引擎区别\" class=\"headerlink\" title=\"存储引擎区别\"></a>存储引擎区别</h3><ul>\n<li>查看数据库支持的存储引擎<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">engines</span>;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>类型</th>\n<th>磁盘文件</th>\n<th>特性</th>\n<th>适用场景</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>FEDERATED</td>\n<td></td>\n<td>用来访问远程表存储引擎</td>\n<td>访问远程表</td>\n</tr>\n<tr>\n<td>MRG_MYISAM</td>\n<td></td>\n<td>把多个MyISAM表合并为一个逻辑单元；查询一个表时，相当与查询其所有成员表</td>\n<td>可以用分区表替换merge表</td>\n</tr>\n<tr>\n<td>MyISAM</td>\n<td>.MDY数据)<br/> .MYI(索引)</td>\n<td>主要的非实物处理存储引擎</td>\n<td></td>\n</tr>\n<tr>\n<td>BLACKHOLE</td>\n<td></td>\n<td>丢弃写操作，读操作返回空内容</td>\n<td></td>\n</tr>\n<tr>\n<td>CSV</td>\n<td>.CSV(数据)<br/>.CSM(元数据)</td>\n<td>存储数据时，会以逗号作为数据项之间的分割符号</td>\n<td>不支持索引，数据存在为普通文本文件</td>\n</tr>\n<tr>\n<td>MEMORY</td>\n<td></td>\n<td>置于内存的表</td>\n<td></td>\n</tr>\n<tr>\n<td>ARCHIVE</td>\n<td></td>\n<td>用于数据存档(行插入后不能再修改)</td>\n<td>数据归档，大批量存储后不修改</td>\n</tr>\n<tr>\n<td>InnoDB</td>\n<td>.ibd(数据&amp;索引)</td>\n<td>具备外键支持功能的事务处理引擎</td>\n<td></td>\n</tr>\n<tr>\n<td>PERFORMANCE_SCHEMA</td>\n<td></td>\n<td>用于监视MySQL服务器</td>\n<td></td>\n</tr>\n<tr>\n<td>NDB</td>\n<td></td>\n<td>集群存储引擎</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>TokuDB</td>\n<td></td>\n<td>存储速度快，查询速度略慢与InnoDB,支持事务等，未来替代InnoDB</td>\n</tr>\n</tbody></table>\n<h3 id=\"建表语句\"><a href=\"#建表语句\" class=\"headerlink\" title=\"建表语句\"></a>建表语句</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.表结构完全复制</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_bak <span class=\"keyword\">LIKE</span> <span class=\"keyword\">user</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">2.使用某些字段建表</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_bak <span class=\"keyword\">select</span> <span class=\"keyword\">now</span>() <span class=\"keyword\">as</span> <span class=\"built_in\">time</span> ;</span><br><span class=\"line\"></span><br><span class=\"line\">3.建表时字段值强制转换</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_bak <span class=\"keyword\">select</span> <span class=\"keyword\">CAST</span>(<span class=\"string\">&#x27;2019-8-01&#x27;</span> <span class=\"keyword\">as</span> <span class=\"keyword\">UNSIGNED</span>) <span class=\"keyword\">as</span> <span class=\"built_in\">time</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">4.临时表</span><br><span class=\"line\">解释：只对当前会话有效，有同名表则原表隐藏不可见，会话结束自动清除</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">temporary</span> <span class=\"keyword\">table</span> user_bak  <span class=\"keyword\">like</span> <span class=\"keyword\">user</span>;</span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">temporary</span> <span class=\"keyword\">table</span> user_bak;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Cast类型强制转换\"><a href=\"#Cast类型强制转换\" class=\"headerlink\" title=\"Cast类型强制转换\"></a>Cast类型强制转换</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">语法: </span><br><span class=\"line\">    Cast(字段名 as 转换的类型 )</span><br><span class=\"line\"></span><br><span class=\"line\">支持的类型:</span><br><span class=\"line\">    CHAR[(N)] 字符型 </span><br><span class=\"line\">    DATE 日期型</span><br><span class=\"line\">    DATETIME 日期和时间型</span><br><span class=\"line\">    DECIMAL float型</span><br><span class=\"line\">    SIGNED int</span><br><span class=\"line\">    TIME 时间型</span><br><span class=\"line\"></span><br><span class=\"line\">场景:</span><br><span class=\"line\">    1.解决utf8字符查询时传入表情符，导致报错；</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"新建分区表\"><a href=\"#新建分区表\" class=\"headerlink\" title=\"新建分区表\"></a>新建分区表</h3><ul>\n<li><p>示例</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> user_bak (</span><br><span class=\"line\"> <span class=\"keyword\">id</span> <span class=\"built_in\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">UNSIGNED</span> AUTO_INCREMENT ,</span><br><span class=\"line\"> <span class=\"string\">`name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">200</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">null</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;名称&#x27;</span>,</span><br><span class=\"line\"> rand_num <span class=\"built_in\">int</span>(<span class=\"number\">11</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;随机数&#x27;</span>,</span><br><span class=\"line\"> birthday datetime <span class=\"keyword\">default</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">&#x27;生日&#x27;</span>,</span><br><span class=\"line\"> PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>,rand_num)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span> = <span class=\"keyword\">INNODB</span> <span class=\"keyword\">partition</span> <span class=\"keyword\">by</span> <span class=\"keyword\">RANGE</span> (rand_num)</span><br><span class=\"line\">(</span><br><span class=\"line\">\t<span class=\"keyword\">PARTITION</span> p0 <span class=\"keyword\">VALUES</span> <span class=\"keyword\">less</span> <span class=\"keyword\">THAN</span> (<span class=\"number\">20</span>),</span><br><span class=\"line\">\t<span class=\"keyword\">PARTITION</span> p1 <span class=\"keyword\">VALUES</span> <span class=\"keyword\">less</span> <span class=\"keyword\">THAN</span> (<span class=\"number\">40</span>),</span><br><span class=\"line\">\t<span class=\"keyword\">PARTITION</span> p2 <span class=\"keyword\">VALUES</span> <span class=\"keyword\">less</span> <span class=\"keyword\">THAN</span> (<span class=\"number\">60</span>),</span><br><span class=\"line\">\t<span class=\"keyword\">PARTITION</span> p3 <span class=\"keyword\">VALUES</span> <span class=\"keyword\">less</span> <span class=\"keyword\">THAN</span> (<span class=\"number\">80</span>),</span><br><span class=\"line\">\t<span class=\"keyword\">PARTITION</span> p4 <span class=\"keyword\">VALUES</span> <span class=\"keyword\">less</span> <span class=\"keyword\">THAN</span> MAXVALUE</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></li>\n<li><p>注意点</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.PRIMARY必须包含分区的字段</span><br><span class=\"line\">2.不能单独创建分区，建表时就要创建</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>常见异常</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.ERROR 1064  不能单独创建分区</span><br><span class=\"line\">解决：建表时就要把分区创建好</span><br><span class=\"line\"></span><br><span class=\"line\">2.ERROR 1503 主键必须包含分区函数中所有列</span><br><span class=\"line\">解决：创建分区的字段必须放在主键索引中</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"子查询\"><a href=\"#子查询\" class=\"headerlink\" title=\"子查询\"></a>子查询</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.ALL - 查询返回单个结果,类似in操作</span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> user_bak <span class=\"keyword\">where</span> (<span class=\"keyword\">id</span>) </span><br><span class=\"line\">&gt;= <span class=\"keyword\">ALL</span>(<span class=\"keyword\">select</span> <span class=\"keyword\">id</span> <span class=\"keyword\">from</span> user_bak <span class=\"keyword\">where</span> <span class=\"keyword\">id</span> = <span class=\"number\">10</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">2.</span><span class=\"keyword\">ANY</span> &amp; <span class=\"keyword\">SUM</span> -效果一样,类似<span class=\"keyword\">or</span>操作</span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> user_bak <span class=\"keyword\">where</span> (<span class=\"keyword\">name</span>,<span class=\"keyword\">id</span>) </span><br><span class=\"line\">= <span class=\"keyword\">SOME</span>(<span class=\"keyword\">select</span> <span class=\"keyword\">name</span>,<span class=\"keyword\">id</span> <span class=\"keyword\">from</span> user_bak <span class=\"keyword\">where</span> <span class=\"keyword\">id</span> = <span class=\"number\">1</span> <span class=\"keyword\">or</span> <span class=\"keyword\">name</span> = <span class=\"string\">&#x27;eee&#x27;</span>)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"FullText全文搜索\"><a href=\"#FullText全文搜索\" class=\"headerlink\" title=\"FullText全文搜索\"></a>FullText全文搜索</h3><ul>\n<li><p>全文搜索类型</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.自然语言搜索-搜索包含匹配词的信息</span><br><span class=\"line\">2.布尔模式搜索-</span><br><span class=\"line\">3.查询扩展搜索</span><br></pre></td></tr></table></figure></li>\n<li><p>创建索引需要满足的条件</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.表类型为MyISAM,version5.6以后引入了对InnoDB支持</span><br><span class=\"line\">2.字段类型只能是char/varchar/text类型</span><br><span class=\"line\">3.全文搜索会自动忽略掉常用词(在记录中出现几率为50%以上)-验证可以查出来</span><br><span class=\"line\">4.停用词会被过滤掉(the/after/other等)</span><br><span class=\"line\">5.少于4个字符会被忽略，查不出来(默认4-84个字符范围，可更改)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>语法</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.自然语言</span><br><span class=\"line\">select *,match(`name`) against(&#x27;good boy&#x27;) </span><br><span class=\"line\">as &#x27;percentage&#x27; from `user` where match(`name`) against(&#x27;good boy&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\">2.布尔模式</span><br><span class=\"line\">select *,match(`name`) against(&#x27;good boy&#x27; in boolean MODE) as &#x27;percentage&#x27; from `user` where match(`name`) against(&#x27;good boy&#x27; in boolean MODE);</span><br><span class=\"line\"></span><br><span class=\"line\">-- 内容顺序完全匹配</span><br><span class=\"line\">select *,match(`name`) against(&#x27;&quot;good boy&quot;&#x27; in boolean MODE) as &#x27;percentage&#x27; from `user` where match(`name`) against(&#x27;&quot;good boy&quot;&#x27; in boolean MODE);</span><br><span class=\"line\"></span><br><span class=\"line\">3.扩展查询</span><br><span class=\"line\">select *,match(`name`) against(&#x27;good boy&#x27; with query expansion) as &#x27;percentage&#x27; from `user` where match(`name`) against(&#x27;good boy&#x27;  with query expansion);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>修改查询字符长度</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.my.cnf文件中ft_min_word_len</span><br><span class=\"line\">2.重建FullText索引或者快速修复</span><br><span class=\"line\">repair table table_name quick;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h2 id=\"字符集\"><a href=\"#字符集\" class=\"headerlink\" title=\"字符集\"></a>字符集</h2><h3 id=\"有字符集有关的系统设置\"><a href=\"#有字符集有关的系统设置\" class=\"headerlink\" title=\"有字符集有关的系统设置\"></a>有字符集有关的系统设置</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">character_set_system 用于存储的字符集</span><br><span class=\"line\"></span><br><span class=\"line\">character_set_server 服务器默认字符集</span><br><span class=\"line\">collation_server  系统排序规则</span><br><span class=\"line\">character_set_database 数据库字符集</span><br><span class=\"line\">collation_database  数据库排序规则</span><br><span class=\"line\">character_set_client 客户端向服务器发送SQL时使用的字符集</span><br><span class=\"line\">character_set_result 表示服务器返回结果时使用的字符集</span><br><span class=\"line\">character_set_connection 连接时使用的字符串</span><br><span class=\"line\">character_set_filesystem 文件系统字符集</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"空间值\"><a href=\"#空间值\" class=\"headerlink\" title=\"空间值\"></a>空间值</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">OpenGIS规范</span><br><span class=\"line\">point 类型值,只支持InnoDB/MyISAM/NDB/ARCHIVE引擎</span><br><span class=\"line\">point(xxxx,xxxx)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"模糊匹配查询\"><a href=\"#模糊匹配查询\" class=\"headerlink\" title=\"模糊匹配查询\"></a>模糊匹配查询</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.like</span><br><span class=\"line\">    % 匹配任意数量的字符序列</span><br><span class=\"line\">    _ 只能匹配单个字符</span><br><span class=\"line\">    \\%  \\_  转义</span><br><span class=\"line\">2.REGEXP-正则查询</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"新建用户后授权\"><a href=\"#新建用户后授权\" class=\"headerlink\" title=\"新建用户后授权\"></a>新建用户后授权</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- %表示所有IP可连接</span><br><span class=\"line\">CREATE USER &#96;用户名&#96;@&#96;%&#96; IDENTIFIED BY &#39;密码&#39;;</span><br><span class=\"line\">grant all privileges on jwgateway.* to &#39;用户名&#39;@&#39;%&#39; identified by &#39;密码&#39;;</span><br><span class=\"line\">select * from mysql.user;</span><br></pre></td></tr></table></figure>"},{"title":"Zookeeper搭建","date":"2020-10-29T07:40:46.000Z","_content":"\n\n### 相关链接\n- [官网](https://zookeeper.apache.org/releases.html)\n\n### 注意事项\n```text\n1.下载 xxx-bin.tar.gz包(这种是编译好的)，否则启动时会提示找不到Class\n2.启动时注意端口号是否已经被占用\n\n```\n\n### 单机部署步骤\n```text\n1.解压文件\n    tar -zxvf xxx-bin.tar.gz zookeeper\n2.修改配置\n    cd zookeeper/conf\n    cp zoo_sample.cfg zoo.cfg\n    vim zoo.cfg\n    修改以下配置项\n        dataDir= xxx/dataDir\n        dataLogDir= xxx/logs/zookeeper\n        \n3.新增配置\n    cd xxx/dataDir\n    echo 1001>myid\n\n4.启动\n    cd zookeeper/bin\n    ./zkServer.sh start / restart / stop / status\n\n```\n\n### zookeeper数据查看工具\n- [下载地址](https://issues.apache.org/jira/secure/attachment/12436620/ZooInspector.zip)\n- 使用\n```text\n1.解压后进入build文件夹\n2.运行jar\n    nohup java -jar zookeeper-dev-ZooInspector.jar &\n3.左上角连接按钮，输入zk地址并连接\n```\n\n\n### 常见问题\n- 启动报ClassNotFound\n```text\n重新下载zookeeper包，注意是xxxx-bin.tar.gz这种的\n```\n\n- 启动失败\n```text\n1.检查配置的文件夹路径和权限是否正常\n2.检查zookeeper是否已经被启动\n    ps -ef | grep zookeeper\n    kill进程\n3.删除 dataDir 和 dataLogDir 路径下 version-2 文件夹后重启\n```\n","source":"_posts/backend/service/zookeeper.md","raw":"---\ntitle: Zookeeper搭建\ndate: 2020-10-29 15:40:46\ntags: \n- zookeeper\ncategories: \n- 服务搭建\n- zookeeper\n---\n\n\n### 相关链接\n- [官网](https://zookeeper.apache.org/releases.html)\n\n### 注意事项\n```text\n1.下载 xxx-bin.tar.gz包(这种是编译好的)，否则启动时会提示找不到Class\n2.启动时注意端口号是否已经被占用\n\n```\n\n### 单机部署步骤\n```text\n1.解压文件\n    tar -zxvf xxx-bin.tar.gz zookeeper\n2.修改配置\n    cd zookeeper/conf\n    cp zoo_sample.cfg zoo.cfg\n    vim zoo.cfg\n    修改以下配置项\n        dataDir= xxx/dataDir\n        dataLogDir= xxx/logs/zookeeper\n        \n3.新增配置\n    cd xxx/dataDir\n    echo 1001>myid\n\n4.启动\n    cd zookeeper/bin\n    ./zkServer.sh start / restart / stop / status\n\n```\n\n### zookeeper数据查看工具\n- [下载地址](https://issues.apache.org/jira/secure/attachment/12436620/ZooInspector.zip)\n- 使用\n```text\n1.解压后进入build文件夹\n2.运行jar\n    nohup java -jar zookeeper-dev-ZooInspector.jar &\n3.左上角连接按钮，输入zk地址并连接\n```\n\n\n### 常见问题\n- 启动报ClassNotFound\n```text\n重新下载zookeeper包，注意是xxxx-bin.tar.gz这种的\n```\n\n- 启动失败\n```text\n1.检查配置的文件夹路径和权限是否正常\n2.检查zookeeper是否已经被启动\n    ps -ef | grep zookeeper\n    kill进程\n3.删除 dataDir 和 dataLogDir 路径下 version-2 文件夹后重启\n```\n","slug":"backend/service/zookeeper","published":1,"updated":"2020-10-29T10:39:04.250Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckgup4b0h000c789k9p5ya71t","content":"<h3 id=\"相关链接\"><a href=\"#相关链接\" class=\"headerlink\" title=\"相关链接\"></a>相关链接</h3><ul>\n<li><a href=\"https://zookeeper.apache.org/releases.html\">官网</a></li>\n</ul>\n<h3 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.下载 xxx-bin.tar.gz包(这种是编译好的)，否则启动时会提示找不到Class</span><br><span class=\"line\">2.启动时注意端口号是否已经被占用</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"单机部署步骤\"><a href=\"#单机部署步骤\" class=\"headerlink\" title=\"单机部署步骤\"></a>单机部署步骤</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.解压文件</span><br><span class=\"line\">    tar -zxvf xxx-bin.tar.gz zookeeper</span><br><span class=\"line\">2.修改配置</span><br><span class=\"line\">    cd zookeeper/conf</span><br><span class=\"line\">    cp zoo_sample.cfg zoo.cfg</span><br><span class=\"line\">    vim zoo.cfg</span><br><span class=\"line\">    修改以下配置项</span><br><span class=\"line\">        dataDir= xxx/dataDir</span><br><span class=\"line\">        dataLogDir= xxx/logs/zookeeper</span><br><span class=\"line\">        </span><br><span class=\"line\">3.新增配置</span><br><span class=\"line\">    cd xxx/dataDir</span><br><span class=\"line\">    echo 1001&gt;myid</span><br><span class=\"line\"></span><br><span class=\"line\">4.启动</span><br><span class=\"line\">    cd zookeeper/bin</span><br><span class=\"line\">    ./zkServer.sh start / restart / stop / status</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"zookeeper数据查看工具\"><a href=\"#zookeeper数据查看工具\" class=\"headerlink\" title=\"zookeeper数据查看工具\"></a>zookeeper数据查看工具</h3><ul>\n<li><a href=\"https://issues.apache.org/jira/secure/attachment/12436620/ZooInspector.zip\">下载地址</a></li>\n<li>使用<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.解压后进入build文件夹</span><br><span class=\"line\">2.运行jar</span><br><span class=\"line\">    nohup java -jar zookeeper-dev-ZooInspector.jar &amp;</span><br><span class=\"line\">3.左上角连接按钮，输入zk地址并连接</span><br></pre></td></tr></table></figure>\n\n\n</li>\n</ul>\n<h3 id=\"常见问题\"><a href=\"#常见问题\" class=\"headerlink\" title=\"常见问题\"></a>常见问题</h3><ul>\n<li><p>启动报ClassNotFound</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">重新下载zookeeper包，注意是xxxx-bin.tar.gz这种的</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动失败</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.检查配置的文件夹路径和权限是否正常</span><br><span class=\"line\">2.检查zookeeper是否已经被启动</span><br><span class=\"line\">    ps -ef | grep zookeeper</span><br><span class=\"line\">    kill进程</span><br><span class=\"line\">3.删除 dataDir 和 dataLogDir 路径下 version-2 文件夹后重启</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"相关链接\"><a href=\"#相关链接\" class=\"headerlink\" title=\"相关链接\"></a>相关链接</h3><ul>\n<li><a href=\"https://zookeeper.apache.org/releases.html\">官网</a></li>\n</ul>\n<h3 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.下载 xxx-bin.tar.gz包(这种是编译好的)，否则启动时会提示找不到Class</span><br><span class=\"line\">2.启动时注意端口号是否已经被占用</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"单机部署步骤\"><a href=\"#单机部署步骤\" class=\"headerlink\" title=\"单机部署步骤\"></a>单机部署步骤</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.解压文件</span><br><span class=\"line\">    tar -zxvf xxx-bin.tar.gz zookeeper</span><br><span class=\"line\">2.修改配置</span><br><span class=\"line\">    cd zookeeper/conf</span><br><span class=\"line\">    cp zoo_sample.cfg zoo.cfg</span><br><span class=\"line\">    vim zoo.cfg</span><br><span class=\"line\">    修改以下配置项</span><br><span class=\"line\">        dataDir= xxx/dataDir</span><br><span class=\"line\">        dataLogDir= xxx/logs/zookeeper</span><br><span class=\"line\">        </span><br><span class=\"line\">3.新增配置</span><br><span class=\"line\">    cd xxx/dataDir</span><br><span class=\"line\">    echo 1001&gt;myid</span><br><span class=\"line\"></span><br><span class=\"line\">4.启动</span><br><span class=\"line\">    cd zookeeper/bin</span><br><span class=\"line\">    ./zkServer.sh start / restart / stop / status</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"zookeeper数据查看工具\"><a href=\"#zookeeper数据查看工具\" class=\"headerlink\" title=\"zookeeper数据查看工具\"></a>zookeeper数据查看工具</h3><ul>\n<li><a href=\"https://issues.apache.org/jira/secure/attachment/12436620/ZooInspector.zip\">下载地址</a></li>\n<li>使用<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.解压后进入build文件夹</span><br><span class=\"line\">2.运行jar</span><br><span class=\"line\">    nohup java -jar zookeeper-dev-ZooInspector.jar &amp;</span><br><span class=\"line\">3.左上角连接按钮，输入zk地址并连接</span><br></pre></td></tr></table></figure>\n\n\n</li>\n</ul>\n<h3 id=\"常见问题\"><a href=\"#常见问题\" class=\"headerlink\" title=\"常见问题\"></a>常见问题</h3><ul>\n<li><p>启动报ClassNotFound</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">重新下载zookeeper包，注意是xxxx-bin.tar.gz这种的</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动失败</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.检查配置的文件夹路径和权限是否正常</span><br><span class=\"line\">2.检查zookeeper是否已经被启动</span><br><span class=\"line\">    ps -ef | grep zookeeper</span><br><span class=\"line\">    kill进程</span><br><span class=\"line\">3.删除 dataDir 和 dataLogDir 路径下 version-2 文件夹后重启</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n"},{"title":"MapStruct","description":"MapStruct","date":"2020-10-02T07:51:46.000Z","_content":"\n\n## MapStruct\n[MapStruct](http://mapstruct.org/)是一个代码生成器，它基于约定优于配置方法极大地简化了Java bean类型之间映射的实现。\n生成的映射代码使用普通方法调用，因此快速，类型安全且易于理解。\n\n### 如何接入MapStruct\n\n```xml\nmaidao-commons 已经完成对[MapStruct 的mvn依赖](http://mapstruct.org/documentation/installation/)，并解决了与swagger2的兼容问题。\n<dependency>\n    <groupId>com.maidao</groupId>\n    <artifactId>maidao-commons</artifactId>\n</dependency>\n```\n\nIDEA Support: https://plugins.jetbrains.com/plugin/10036-mapstruct-support/versions\n\n\n### Java Bean属性拷贝性能对比\n\nget/set >= [MapStruct](http://mapstruct.org/) > [JMapper](https://jmapper-framework.github.io/jmapper-core/)  >  [\"beanCopier(cglib)\"](https://github.com/cglib/cglib/blob/master/cglib/src/main/java/net/sf/cglib/beans/BeanCopier.java) > Orika > ModelMapper > Spring BeanUtils > Dozer > Apache BeanUtils\n  \n性能对比数据来源：\n - https://www.baeldung.com/java-performance-mapping-frameworks\n - https://java.libhunt.com/categories/337-bean-mapping\n \n说明：\n- get/set 需要手动编写大量转换代码，代码简洁性差、重复性高和工作量大。\n- beanCopier 性能较高，属性名和类型有较高的匹配要求。\n- MapStruct 性能较高，在编译阶段，生成Get/Set代码,支持不同属性之间自定义转换。\n- Orika 性能较高,支持自定义属性拷贝，性能略差与前两种，当比后面几种高很多。\n- Spring BeanUtils 性能一般，只能支持相关名称的拷贝。\n- Dozer 性能差，使用简单，编写xml不方便。\n- Apache BeanUtils 性能差。\n    \n### demo\n\n实例代码:\n```java\n/**\n* 定义对象之间转换Mapper\n * @Mapper 只有在接口加上这个注解， MapStruct 才会去实现该接口\n *     @Mapper\n *     componentModel ：主要是指定实现类的类型，\n *         - default：默认，可以通过 Mappers.getMapper(Class) 方式获取实例对象\n *         -  spring：在接口的实现类上自动添加注解 @Component，可通过 @Autowired 方式注入\n *     uses 使用用户自定义转换器\n *\n *     http://mapstruct.org/documentation/stable/reference/html/\n */\n//@Mapper(componentModel = \"spring\",uses = {DateHandWritten.class})\n@Mapper(\n        uses = {DateHandWritten.class, UserNameHandWritten.class},\n        imports = {LocalDateUtil.class}\n        )\npublic interface PersonMapper {\n\n    PersonMapper  INSTANCE  = Mappers.getMapper(PersonMapper.class);\n\n    @Mappings({\n            //@Mapping(source = \"name\",target = \"name\",ignore = true),\n            @Mapping(target = \"birthExpressionFormat\", expression = \"java(LocalDateUtil.getDateNow().toString())\"),\n            @Mapping(source = \"name\",target = \"address.name\"),\n            @Mapping(source = \"price\",target = \"price\",numberFormat = \"#.00\"),\n            @Mapping(source = \"birthDate\",target = \"birthDateFormat\",dateFormat = \"yyyy-MM-dd HH:mm:ss\")\n    })\n    /***\n     * @Mapping：属性映射，若源对象属性与目标对象名字一致，会自动映射对应属性\n     *     source：源属性\n     *     target：目标属性\n     *     dateFormat：String 到 Date 日期之间相互转换，通过 SimpleDateFormat，该值为 SimpleDateFormat              的日期格式\n     *     ignore: 忽略这个字段\n     * @Mappings：配置多个@Mapping\n     */\n    PersonDto toDto(Person person);\n\n    @InheritConfiguration(name = \"toDto\")\n    List<PersonDto> toDtos(List<Person> person);\n\n\n    /*@InheritInverseConfiguration()\n    PersonDto fromDto(Person person);*/\n\n    /**\n     * @InheritConfiguration 用于继承配置\n     * */\n  /*  @InheritConfiguration(name = \"toDto\")\n    void update(Person person, @MappingTarget PersonDto personDto);*/\n}\n\n/**定义自定义转换规则*/\npublic class DateHandWritten {\n\n    public String asString(Date date) {\n        return date != null ? new SimpleDateFormat( \"yyyy-MM-dd\" )\n            .format( date ) : null;\n    }\n\n    public Date asDate(String date) {\n        try {\n            return date != null ? new SimpleDateFormat( \"yyyy-MM-dd\" )\n                .parse( date ) : null;\n        }\n        catch ( ParseException e ) {\n            throw new RuntimeException( e );\n        }\n    }\n}\n\n/**定义自定义转换规则*/\npublic class UserNameHandWritten {\n\n    public String asUsername(String username) {\n        return  \"被修改后的name\";\n    } \n}\n\n/***使用实例*/\npublic class MapStructTest {\n\n    @Test\n    public void personTest(){\n        Person person = buildPerson();\n        PersonDto personDto = PersonMapper.INSTANCE.toDto(person);\n        System.out.println(JSON.toJSONString(personDto));\n        /**\n        * {\"address\":{\"name\":\"被修改后的name\"},\"addresses\":[{\"name\":\"被修改后的name\"}],\"age\":0,\"birthDate\":1555573411245,\"birthDateFormat\":\"2019-04-18\",\"birthExpressionFormat\":\"Thu Apr 18 15:43:31 CST 2019\",\"name\":\"被修改后的name\",\"price\":\"2.35\"}\n        * */\n    }\n\n    @Test\n    public void personListTest(){\n        Person person = buildPerson();\n        List<PersonDto> personDtos = PersonMapper.INSTANCE.toDtos(Lists.newArrayList(person));\n        System.out.println(JSON.toJSONString(personDtos));\n        /**\n        * [{\"address\":{\"name\":\"被修改后的name\"},\"addresses\":[{\"name\":\"被修改后的name\"}],\"age\":0,\"birthDate\":1555573439123,\"birthDateFormat\":\"2019-04-18\",\"birthExpressionFormat\":\"Thu Apr 18 15:43:59 CST 2019\",\"name\":\"被修改后的name\",\"price\":\"2.35\"}]\n        * */\n    }\n\n    private Person buildPerson(){\n        Address a = new Address();\n        a.setName(\"demo\");\n        return Person.builder().birthDate(new Date()).price(BigDecimal.valueOf(2.347)).name(\"中国人\").addresses(Lists.newArrayList(a)).build();\n    }\n}\n\n```\n### 实现原理\n在Maven 编译阶段将自动实现PersonMapper的对象属性转换接口,生成PersonMapperImpl文件。","source":"_posts/backend/java/utils/MapStruct.md","raw":"---\ntitle: MapStruct\ndescription: MapStruct\ndate: 2020-10-02 15:51:46\ntags:\n- utils\ncategories:\n- 后端\n- Java\n---\n\n\n## MapStruct\n[MapStruct](http://mapstruct.org/)是一个代码生成器，它基于约定优于配置方法极大地简化了Java bean类型之间映射的实现。\n生成的映射代码使用普通方法调用，因此快速，类型安全且易于理解。\n\n### 如何接入MapStruct\n\n```xml\nmaidao-commons 已经完成对[MapStruct 的mvn依赖](http://mapstruct.org/documentation/installation/)，并解决了与swagger2的兼容问题。\n<dependency>\n    <groupId>com.maidao</groupId>\n    <artifactId>maidao-commons</artifactId>\n</dependency>\n```\n\nIDEA Support: https://plugins.jetbrains.com/plugin/10036-mapstruct-support/versions\n\n\n### Java Bean属性拷贝性能对比\n\nget/set >= [MapStruct](http://mapstruct.org/) > [JMapper](https://jmapper-framework.github.io/jmapper-core/)  >  [\"beanCopier(cglib)\"](https://github.com/cglib/cglib/blob/master/cglib/src/main/java/net/sf/cglib/beans/BeanCopier.java) > Orika > ModelMapper > Spring BeanUtils > Dozer > Apache BeanUtils\n  \n性能对比数据来源：\n - https://www.baeldung.com/java-performance-mapping-frameworks\n - https://java.libhunt.com/categories/337-bean-mapping\n \n说明：\n- get/set 需要手动编写大量转换代码，代码简洁性差、重复性高和工作量大。\n- beanCopier 性能较高，属性名和类型有较高的匹配要求。\n- MapStruct 性能较高，在编译阶段，生成Get/Set代码,支持不同属性之间自定义转换。\n- Orika 性能较高,支持自定义属性拷贝，性能略差与前两种，当比后面几种高很多。\n- Spring BeanUtils 性能一般，只能支持相关名称的拷贝。\n- Dozer 性能差，使用简单，编写xml不方便。\n- Apache BeanUtils 性能差。\n    \n### demo\n\n实例代码:\n```java\n/**\n* 定义对象之间转换Mapper\n * @Mapper 只有在接口加上这个注解， MapStruct 才会去实现该接口\n *     @Mapper\n *     componentModel ：主要是指定实现类的类型，\n *         - default：默认，可以通过 Mappers.getMapper(Class) 方式获取实例对象\n *         -  spring：在接口的实现类上自动添加注解 @Component，可通过 @Autowired 方式注入\n *     uses 使用用户自定义转换器\n *\n *     http://mapstruct.org/documentation/stable/reference/html/\n */\n//@Mapper(componentModel = \"spring\",uses = {DateHandWritten.class})\n@Mapper(\n        uses = {DateHandWritten.class, UserNameHandWritten.class},\n        imports = {LocalDateUtil.class}\n        )\npublic interface PersonMapper {\n\n    PersonMapper  INSTANCE  = Mappers.getMapper(PersonMapper.class);\n\n    @Mappings({\n            //@Mapping(source = \"name\",target = \"name\",ignore = true),\n            @Mapping(target = \"birthExpressionFormat\", expression = \"java(LocalDateUtil.getDateNow().toString())\"),\n            @Mapping(source = \"name\",target = \"address.name\"),\n            @Mapping(source = \"price\",target = \"price\",numberFormat = \"#.00\"),\n            @Mapping(source = \"birthDate\",target = \"birthDateFormat\",dateFormat = \"yyyy-MM-dd HH:mm:ss\")\n    })\n    /***\n     * @Mapping：属性映射，若源对象属性与目标对象名字一致，会自动映射对应属性\n     *     source：源属性\n     *     target：目标属性\n     *     dateFormat：String 到 Date 日期之间相互转换，通过 SimpleDateFormat，该值为 SimpleDateFormat              的日期格式\n     *     ignore: 忽略这个字段\n     * @Mappings：配置多个@Mapping\n     */\n    PersonDto toDto(Person person);\n\n    @InheritConfiguration(name = \"toDto\")\n    List<PersonDto> toDtos(List<Person> person);\n\n\n    /*@InheritInverseConfiguration()\n    PersonDto fromDto(Person person);*/\n\n    /**\n     * @InheritConfiguration 用于继承配置\n     * */\n  /*  @InheritConfiguration(name = \"toDto\")\n    void update(Person person, @MappingTarget PersonDto personDto);*/\n}\n\n/**定义自定义转换规则*/\npublic class DateHandWritten {\n\n    public String asString(Date date) {\n        return date != null ? new SimpleDateFormat( \"yyyy-MM-dd\" )\n            .format( date ) : null;\n    }\n\n    public Date asDate(String date) {\n        try {\n            return date != null ? new SimpleDateFormat( \"yyyy-MM-dd\" )\n                .parse( date ) : null;\n        }\n        catch ( ParseException e ) {\n            throw new RuntimeException( e );\n        }\n    }\n}\n\n/**定义自定义转换规则*/\npublic class UserNameHandWritten {\n\n    public String asUsername(String username) {\n        return  \"被修改后的name\";\n    } \n}\n\n/***使用实例*/\npublic class MapStructTest {\n\n    @Test\n    public void personTest(){\n        Person person = buildPerson();\n        PersonDto personDto = PersonMapper.INSTANCE.toDto(person);\n        System.out.println(JSON.toJSONString(personDto));\n        /**\n        * {\"address\":{\"name\":\"被修改后的name\"},\"addresses\":[{\"name\":\"被修改后的name\"}],\"age\":0,\"birthDate\":1555573411245,\"birthDateFormat\":\"2019-04-18\",\"birthExpressionFormat\":\"Thu Apr 18 15:43:31 CST 2019\",\"name\":\"被修改后的name\",\"price\":\"2.35\"}\n        * */\n    }\n\n    @Test\n    public void personListTest(){\n        Person person = buildPerson();\n        List<PersonDto> personDtos = PersonMapper.INSTANCE.toDtos(Lists.newArrayList(person));\n        System.out.println(JSON.toJSONString(personDtos));\n        /**\n        * [{\"address\":{\"name\":\"被修改后的name\"},\"addresses\":[{\"name\":\"被修改后的name\"}],\"age\":0,\"birthDate\":1555573439123,\"birthDateFormat\":\"2019-04-18\",\"birthExpressionFormat\":\"Thu Apr 18 15:43:59 CST 2019\",\"name\":\"被修改后的name\",\"price\":\"2.35\"}]\n        * */\n    }\n\n    private Person buildPerson(){\n        Address a = new Address();\n        a.setName(\"demo\");\n        return Person.builder().birthDate(new Date()).price(BigDecimal.valueOf(2.347)).name(\"中国人\").addresses(Lists.newArrayList(a)).build();\n    }\n}\n\n```\n### 实现原理\n在Maven 编译阶段将自动实现PersonMapper的对象属性转换接口,生成PersonMapperImpl文件。","slug":"backend/java/utils/MapStruct","published":1,"updated":"2020-10-20T09:45:02.781Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckgup4b0i000d789k9cr0dr40","content":"<h2 id=\"MapStruct\"><a href=\"#MapStruct\" class=\"headerlink\" title=\"MapStruct\"></a>MapStruct</h2><p><a href=\"http://mapstruct.org/\">MapStruct</a>是一个代码生成器，它基于约定优于配置方法极大地简化了Java bean类型之间映射的实现。<br>生成的映射代码使用普通方法调用，因此快速，类型安全且易于理解。</p>\n<h3 id=\"如何接入MapStruct\"><a href=\"#如何接入MapStruct\" class=\"headerlink\" title=\"如何接入MapStruct\"></a>如何接入MapStruct</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">maidao-commons 已经完成对[MapStruct 的mvn依赖](http://mapstruct.org/documentation/installation/)，并解决了与swagger2的兼容问题。</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.maidao<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maidao-commons<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>IDEA Support: <a href=\"https://plugins.jetbrains.com/plugin/10036-mapstruct-support/versions\">https://plugins.jetbrains.com/plugin/10036-mapstruct-support/versions</a></p>\n<h3 id=\"Java-Bean属性拷贝性能对比\"><a href=\"#Java-Bean属性拷贝性能对比\" class=\"headerlink\" title=\"Java Bean属性拷贝性能对比\"></a>Java Bean属性拷贝性能对比</h3><p>get/set &gt;= <a href=\"http://mapstruct.org/\">MapStruct</a> &gt; <a href=\"https://jmapper-framework.github.io/jmapper-core/\">JMapper</a>  &gt;  <a href=\"https://github.com/cglib/cglib/blob/master/cglib/src/main/java/net/sf/cglib/beans/BeanCopier.java\">“beanCopier(cglib)”</a> &gt; Orika &gt; ModelMapper &gt; Spring BeanUtils &gt; Dozer &gt; Apache BeanUtils</p>\n<p>性能对比数据来源：</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/java-performance-mapping-frameworks\">https://www.baeldung.com/java-performance-mapping-frameworks</a></li>\n<li><a href=\"https://java.libhunt.com/categories/337-bean-mapping\">https://java.libhunt.com/categories/337-bean-mapping</a></li>\n</ul>\n<p>说明：</p>\n<ul>\n<li>get/set 需要手动编写大量转换代码，代码简洁性差、重复性高和工作量大。</li>\n<li>beanCopier 性能较高，属性名和类型有较高的匹配要求。</li>\n<li>MapStruct 性能较高，在编译阶段，生成Get/Set代码,支持不同属性之间自定义转换。</li>\n<li>Orika 性能较高,支持自定义属性拷贝，性能略差与前两种，当比后面几种高很多。</li>\n<li>Spring BeanUtils 性能一般，只能支持相关名称的拷贝。</li>\n<li>Dozer 性能差，使用简单，编写xml不方便。</li>\n<li>Apache BeanUtils 性能差。</li>\n</ul>\n<h3 id=\"demo\"><a href=\"#demo\" class=\"headerlink\" title=\"demo\"></a>demo</h3><p>实例代码:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* 定义对象之间转换Mapper</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Mapper</span> 只有在接口加上这个注解， MapStruct 才会去实现该接口</span></span><br><span class=\"line\"><span class=\"comment\"> *     <span class=\"doctag\">@Mapper</span></span></span><br><span class=\"line\"><span class=\"comment\"> *     componentModel ：主要是指定实现类的类型，</span></span><br><span class=\"line\"><span class=\"comment\"> *         - default：默认，可以通过 Mappers.getMapper(Class) 方式获取实例对象</span></span><br><span class=\"line\"><span class=\"comment\"> *         -  spring：在接口的实现类上自动添加注解 <span class=\"doctag\">@Component</span>，可通过 <span class=\"doctag\">@Autowired</span> 方式注入</span></span><br><span class=\"line\"><span class=\"comment\"> *     uses 使用用户自定义转换器</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *     http://mapstruct.org/documentation/stable/reference/html/</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"comment\">//@Mapper(componentModel = &quot;spring&quot;,uses = &#123;DateHandWritten.class&#125;)</span></span><br><span class=\"line\"><span class=\"meta\">@Mapper(</span></span><br><span class=\"line\"><span class=\"meta\">        uses = &#123;DateHandWritten.class, UserNameHandWritten.class&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">        imports = &#123;LocalDateUtil.class&#125;</span></span><br><span class=\"line\"><span class=\"meta\">        )</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">PersonMapper</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    PersonMapper  INSTANCE  = Mappers.getMapper(PersonMapper.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Mappings(&#123;</span></span><br><span class=\"line\"><span class=\"meta\">            //@Mapping(source = &quot;name&quot;,target = &quot;name&quot;,ignore = true),</span></span><br><span class=\"line\"><span class=\"meta\">            @Mapping(target = &quot;birthExpressionFormat&quot;, expression = &quot;java(LocalDateUtil.getDateNow().toString())&quot;),</span></span><br><span class=\"line\"><span class=\"meta\">            @Mapping(source = &quot;name&quot;,target = &quot;address.name&quot;),</span></span><br><span class=\"line\"><span class=\"meta\">            @Mapping(source = &quot;price&quot;,target = &quot;price&quot;,numberFormat = &quot;#.00&quot;),</span></span><br><span class=\"line\"><span class=\"meta\">            @Mapping(source = &quot;birthDate&quot;,target = &quot;birthDateFormat&quot;,dateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class=\"line\"><span class=\"meta\">    &#125;)</span></span><br><span class=\"line\">    <span class=\"comment\">/***</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@Mapping</span>：属性映射，若源对象属性与目标对象名字一致，会自动映射对应属性</span></span><br><span class=\"line\"><span class=\"comment\">     *     source：源属性</span></span><br><span class=\"line\"><span class=\"comment\">     *     target：目标属性</span></span><br><span class=\"line\"><span class=\"comment\">     *     dateFormat：String 到 Date 日期之间相互转换，通过 SimpleDateFormat，该值为 SimpleDateFormat              的日期格式</span></span><br><span class=\"line\"><span class=\"comment\">     *     ignore: 忽略这个字段</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@Mappings</span>：配置多个<span class=\"doctag\">@Mapping</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">PersonDto <span class=\"title\">toDto</span><span class=\"params\">(Person person)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@InheritConfiguration(name = &quot;toDto&quot;)</span></span><br><span class=\"line\">    <span class=\"function\">List&lt;PersonDto&gt; <span class=\"title\">toDtos</span><span class=\"params\">(List&lt;Person&gt; person)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*@InheritInverseConfiguration()</span></span><br><span class=\"line\"><span class=\"comment\">    PersonDto fromDto(Person person);*/</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@InheritConfiguration</span> 用于继承配置</span></span><br><span class=\"line\"><span class=\"comment\">     * */</span></span><br><span class=\"line\">  <span class=\"comment\">/*  @InheritConfiguration(name = &quot;toDto&quot;)</span></span><br><span class=\"line\"><span class=\"comment\">    void update(Person person, @MappingTarget PersonDto personDto);*/</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**定义自定义转换规则*/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DateHandWritten</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">asString</span><span class=\"params\">(Date date)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> date != <span class=\"keyword\">null</span> ? <span class=\"keyword\">new</span> SimpleDateFormat( <span class=\"string\">&quot;yyyy-MM-dd&quot;</span> )</span><br><span class=\"line\">            .format( date ) : <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Date <span class=\"title\">asDate</span><span class=\"params\">(String date)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> date != <span class=\"keyword\">null</span> ? <span class=\"keyword\">new</span> SimpleDateFormat( <span class=\"string\">&quot;yyyy-MM-dd&quot;</span> )</span><br><span class=\"line\">                .parse( date ) : <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">catch</span> ( ParseException e ) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException( e );</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**定义自定义转换规则*/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserNameHandWritten</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">asUsername</span><span class=\"params\">(String username)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>  <span class=\"string\">&quot;被修改后的name&quot;</span>;</span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/***使用实例*/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MapStructTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">personTest</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Person person = buildPerson();</span><br><span class=\"line\">        PersonDto personDto = PersonMapper.INSTANCE.toDto(person);</span><br><span class=\"line\">        System.out.println(JSON.toJSONString(personDto));</span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">        * &#123;&quot;address&quot;:&#123;&quot;name&quot;:&quot;被修改后的name&quot;&#125;,&quot;addresses&quot;:[&#123;&quot;name&quot;:&quot;被修改后的name&quot;&#125;],&quot;age&quot;:0,&quot;birthDate&quot;:1555573411245,&quot;birthDateFormat&quot;:&quot;2019-04-18&quot;,&quot;birthExpressionFormat&quot;:&quot;Thu Apr 18 15:43:31 CST 2019&quot;,&quot;name&quot;:&quot;被修改后的name&quot;,&quot;price&quot;:&quot;2.35&quot;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">        * */</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">personListTest</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Person person = buildPerson();</span><br><span class=\"line\">        List&lt;PersonDto&gt; personDtos = PersonMapper.INSTANCE.toDtos(Lists.newArrayList(person));</span><br><span class=\"line\">        System.out.println(JSON.toJSONString(personDtos));</span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">        * [&#123;&quot;address&quot;:&#123;&quot;name&quot;:&quot;被修改后的name&quot;&#125;,&quot;addresses&quot;:[&#123;&quot;name&quot;:&quot;被修改后的name&quot;&#125;],&quot;age&quot;:0,&quot;birthDate&quot;:1555573439123,&quot;birthDateFormat&quot;:&quot;2019-04-18&quot;,&quot;birthExpressionFormat&quot;:&quot;Thu Apr 18 15:43:59 CST 2019&quot;,&quot;name&quot;:&quot;被修改后的name&quot;,&quot;price&quot;:&quot;2.35&quot;&#125;]</span></span><br><span class=\"line\"><span class=\"comment\">        * */</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> Person <span class=\"title\">buildPerson</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Address a = <span class=\"keyword\">new</span> Address();</span><br><span class=\"line\">        a.setName(<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Person.builder().birthDate(<span class=\"keyword\">new</span> Date()).price(BigDecimal.valueOf(<span class=\"number\">2.347</span>)).name(<span class=\"string\">&quot;中国人&quot;</span>).addresses(Lists.newArrayList(a)).build();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"实现原理\"><a href=\"#实现原理\" class=\"headerlink\" title=\"实现原理\"></a>实现原理</h3><p>在Maven 编译阶段将自动实现PersonMapper的对象属性转换接口,生成PersonMapperImpl文件。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"MapStruct\"><a href=\"#MapStruct\" class=\"headerlink\" title=\"MapStruct\"></a>MapStruct</h2><p><a href=\"http://mapstruct.org/\">MapStruct</a>是一个代码生成器，它基于约定优于配置方法极大地简化了Java bean类型之间映射的实现。<br>生成的映射代码使用普通方法调用，因此快速，类型安全且易于理解。</p>\n<h3 id=\"如何接入MapStruct\"><a href=\"#如何接入MapStruct\" class=\"headerlink\" title=\"如何接入MapStruct\"></a>如何接入MapStruct</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">maidao-commons 已经完成对[MapStruct 的mvn依赖](http://mapstruct.org/documentation/installation/)，并解决了与swagger2的兼容问题。</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.maidao<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maidao-commons<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>IDEA Support: <a href=\"https://plugins.jetbrains.com/plugin/10036-mapstruct-support/versions\">https://plugins.jetbrains.com/plugin/10036-mapstruct-support/versions</a></p>\n<h3 id=\"Java-Bean属性拷贝性能对比\"><a href=\"#Java-Bean属性拷贝性能对比\" class=\"headerlink\" title=\"Java Bean属性拷贝性能对比\"></a>Java Bean属性拷贝性能对比</h3><p>get/set &gt;= <a href=\"http://mapstruct.org/\">MapStruct</a> &gt; <a href=\"https://jmapper-framework.github.io/jmapper-core/\">JMapper</a>  &gt;  <a href=\"https://github.com/cglib/cglib/blob/master/cglib/src/main/java/net/sf/cglib/beans/BeanCopier.java\">“beanCopier(cglib)”</a> &gt; Orika &gt; ModelMapper &gt; Spring BeanUtils &gt; Dozer &gt; Apache BeanUtils</p>\n<p>性能对比数据来源：</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/java-performance-mapping-frameworks\">https://www.baeldung.com/java-performance-mapping-frameworks</a></li>\n<li><a href=\"https://java.libhunt.com/categories/337-bean-mapping\">https://java.libhunt.com/categories/337-bean-mapping</a></li>\n</ul>\n<p>说明：</p>\n<ul>\n<li>get/set 需要手动编写大量转换代码，代码简洁性差、重复性高和工作量大。</li>\n<li>beanCopier 性能较高，属性名和类型有较高的匹配要求。</li>\n<li>MapStruct 性能较高，在编译阶段，生成Get/Set代码,支持不同属性之间自定义转换。</li>\n<li>Orika 性能较高,支持自定义属性拷贝，性能略差与前两种，当比后面几种高很多。</li>\n<li>Spring BeanUtils 性能一般，只能支持相关名称的拷贝。</li>\n<li>Dozer 性能差，使用简单，编写xml不方便。</li>\n<li>Apache BeanUtils 性能差。</li>\n</ul>\n<h3 id=\"demo\"><a href=\"#demo\" class=\"headerlink\" title=\"demo\"></a>demo</h3><p>实例代码:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* 定义对象之间转换Mapper</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Mapper</span> 只有在接口加上这个注解， MapStruct 才会去实现该接口</span></span><br><span class=\"line\"><span class=\"comment\"> *     <span class=\"doctag\">@Mapper</span></span></span><br><span class=\"line\"><span class=\"comment\"> *     componentModel ：主要是指定实现类的类型，</span></span><br><span class=\"line\"><span class=\"comment\"> *         - default：默认，可以通过 Mappers.getMapper(Class) 方式获取实例对象</span></span><br><span class=\"line\"><span class=\"comment\"> *         -  spring：在接口的实现类上自动添加注解 <span class=\"doctag\">@Component</span>，可通过 <span class=\"doctag\">@Autowired</span> 方式注入</span></span><br><span class=\"line\"><span class=\"comment\"> *     uses 使用用户自定义转换器</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *     http://mapstruct.org/documentation/stable/reference/html/</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"comment\">//@Mapper(componentModel = &quot;spring&quot;,uses = &#123;DateHandWritten.class&#125;)</span></span><br><span class=\"line\"><span class=\"meta\">@Mapper(</span></span><br><span class=\"line\"><span class=\"meta\">        uses = &#123;DateHandWritten.class, UserNameHandWritten.class&#125;,</span></span><br><span class=\"line\"><span class=\"meta\">        imports = &#123;LocalDateUtil.class&#125;</span></span><br><span class=\"line\"><span class=\"meta\">        )</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">PersonMapper</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    PersonMapper  INSTANCE  = Mappers.getMapper(PersonMapper.class);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Mappings(&#123;</span></span><br><span class=\"line\"><span class=\"meta\">            //@Mapping(source = &quot;name&quot;,target = &quot;name&quot;,ignore = true),</span></span><br><span class=\"line\"><span class=\"meta\">            @Mapping(target = &quot;birthExpressionFormat&quot;, expression = &quot;java(LocalDateUtil.getDateNow().toString())&quot;),</span></span><br><span class=\"line\"><span class=\"meta\">            @Mapping(source = &quot;name&quot;,target = &quot;address.name&quot;),</span></span><br><span class=\"line\"><span class=\"meta\">            @Mapping(source = &quot;price&quot;,target = &quot;price&quot;,numberFormat = &quot;#.00&quot;),</span></span><br><span class=\"line\"><span class=\"meta\">            @Mapping(source = &quot;birthDate&quot;,target = &quot;birthDateFormat&quot;,dateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class=\"line\"><span class=\"meta\">    &#125;)</span></span><br><span class=\"line\">    <span class=\"comment\">/***</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@Mapping</span>：属性映射，若源对象属性与目标对象名字一致，会自动映射对应属性</span></span><br><span class=\"line\"><span class=\"comment\">     *     source：源属性</span></span><br><span class=\"line\"><span class=\"comment\">     *     target：目标属性</span></span><br><span class=\"line\"><span class=\"comment\">     *     dateFormat：String 到 Date 日期之间相互转换，通过 SimpleDateFormat，该值为 SimpleDateFormat              的日期格式</span></span><br><span class=\"line\"><span class=\"comment\">     *     ignore: 忽略这个字段</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@Mappings</span>：配置多个<span class=\"doctag\">@Mapping</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\">PersonDto <span class=\"title\">toDto</span><span class=\"params\">(Person person)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@InheritConfiguration(name = &quot;toDto&quot;)</span></span><br><span class=\"line\">    <span class=\"function\">List&lt;PersonDto&gt; <span class=\"title\">toDtos</span><span class=\"params\">(List&lt;Person&gt; person)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*@InheritInverseConfiguration()</span></span><br><span class=\"line\"><span class=\"comment\">    PersonDto fromDto(Person person);*/</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@InheritConfiguration</span> 用于继承配置</span></span><br><span class=\"line\"><span class=\"comment\">     * */</span></span><br><span class=\"line\">  <span class=\"comment\">/*  @InheritConfiguration(name = &quot;toDto&quot;)</span></span><br><span class=\"line\"><span class=\"comment\">    void update(Person person, @MappingTarget PersonDto personDto);*/</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**定义自定义转换规则*/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DateHandWritten</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">asString</span><span class=\"params\">(Date date)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> date != <span class=\"keyword\">null</span> ? <span class=\"keyword\">new</span> SimpleDateFormat( <span class=\"string\">&quot;yyyy-MM-dd&quot;</span> )</span><br><span class=\"line\">            .format( date ) : <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Date <span class=\"title\">asDate</span><span class=\"params\">(String date)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> date != <span class=\"keyword\">null</span> ? <span class=\"keyword\">new</span> SimpleDateFormat( <span class=\"string\">&quot;yyyy-MM-dd&quot;</span> )</span><br><span class=\"line\">                .parse( date ) : <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">catch</span> ( ParseException e ) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException( e );</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**定义自定义转换规则*/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserNameHandWritten</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">asUsername</span><span class=\"params\">(String username)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>  <span class=\"string\">&quot;被修改后的name&quot;</span>;</span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/***使用实例*/</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MapStructTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">personTest</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Person person = buildPerson();</span><br><span class=\"line\">        PersonDto personDto = PersonMapper.INSTANCE.toDto(person);</span><br><span class=\"line\">        System.out.println(JSON.toJSONString(personDto));</span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">        * &#123;&quot;address&quot;:&#123;&quot;name&quot;:&quot;被修改后的name&quot;&#125;,&quot;addresses&quot;:[&#123;&quot;name&quot;:&quot;被修改后的name&quot;&#125;],&quot;age&quot;:0,&quot;birthDate&quot;:1555573411245,&quot;birthDateFormat&quot;:&quot;2019-04-18&quot;,&quot;birthExpressionFormat&quot;:&quot;Thu Apr 18 15:43:31 CST 2019&quot;,&quot;name&quot;:&quot;被修改后的name&quot;,&quot;price&quot;:&quot;2.35&quot;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">        * */</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">personListTest</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Person person = buildPerson();</span><br><span class=\"line\">        List&lt;PersonDto&gt; personDtos = PersonMapper.INSTANCE.toDtos(Lists.newArrayList(person));</span><br><span class=\"line\">        System.out.println(JSON.toJSONString(personDtos));</span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">        * [&#123;&quot;address&quot;:&#123;&quot;name&quot;:&quot;被修改后的name&quot;&#125;,&quot;addresses&quot;:[&#123;&quot;name&quot;:&quot;被修改后的name&quot;&#125;],&quot;age&quot;:0,&quot;birthDate&quot;:1555573439123,&quot;birthDateFormat&quot;:&quot;2019-04-18&quot;,&quot;birthExpressionFormat&quot;:&quot;Thu Apr 18 15:43:59 CST 2019&quot;,&quot;name&quot;:&quot;被修改后的name&quot;,&quot;price&quot;:&quot;2.35&quot;&#125;]</span></span><br><span class=\"line\"><span class=\"comment\">        * */</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> Person <span class=\"title\">buildPerson</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Address a = <span class=\"keyword\">new</span> Address();</span><br><span class=\"line\">        a.setName(<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Person.builder().birthDate(<span class=\"keyword\">new</span> Date()).price(BigDecimal.valueOf(<span class=\"number\">2.347</span>)).name(<span class=\"string\">&quot;中国人&quot;</span>).addresses(Lists.newArrayList(a)).build();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"实现原理\"><a href=\"#实现原理\" class=\"headerlink\" title=\"实现原理\"></a>实现原理</h3><p>在Maven 编译阶段将自动实现PersonMapper的对象属性转换接口,生成PersonMapperImpl文件。</p>\n"},{"title":"EasyExcel使用遇到的问题","description":"excel","date":"2020-10-20T09:22:53.000Z","_content":"\n### 设置中文文件名\n```text\n// 代码中添加\nresponse.setContentType(\"application/vnd.ms-excel;charset=UTF-8\");\nresponse.setCharacterEncoding(\"utf-8\");\nresponse.setHeader(\"Content-disposition\", \"attachment;filename*=utf-8''\" + fileName + \".xlsx\");\n\n```\n\n### 导出失败返回错误信息\n```text\n// 重写响应信息数据类型\nresponse.reset();\nresponse.setContentType(\"application/json\");\nresponse.setCharacterEncoding(\"utf-8\");\ntry {\n    response.getWriter().println(result);\n} catch (IOException ioException) {\n    log.warn(\"业务异常  msg={}\",ioException);\n}\n```\n\n### 导出成功但是后台日志报类型转换异常\n- 错误日志\n```text\n-No converter for [class com.hzrys.dashboard.common.result.R] with preset Content-Type 'application/vnd.ms-excel;charset=utf-8'\norg.springframework.http.converter.HttpMessageNotWritableException: No converter for [class com.hzrys.dashboard.common.result.R] with preset Content-Type 'application/vnd.ms-excel;charset=utf-8'\n```\n- 原因\n```text\n导出方法不能有返回值，导出文件时会设置相应头为文件格式；如果有返回值，则就会出现数据转换异常的错误\n```\n- 解决方法\n```text\n修改Controller中方法，改为 void 即可\n```\n","source":"_posts/backend/java/utils/excel.md","raw":"---\ntitle: EasyExcel使用遇到的问题\ndescription: excel\ndate: 2020-10-20 17:22:53\ntags:\n- utils\ncategories:\n- 后端\n- Java\n---\n\n### 设置中文文件名\n```text\n// 代码中添加\nresponse.setContentType(\"application/vnd.ms-excel;charset=UTF-8\");\nresponse.setCharacterEncoding(\"utf-8\");\nresponse.setHeader(\"Content-disposition\", \"attachment;filename*=utf-8''\" + fileName + \".xlsx\");\n\n```\n\n### 导出失败返回错误信息\n```text\n// 重写响应信息数据类型\nresponse.reset();\nresponse.setContentType(\"application/json\");\nresponse.setCharacterEncoding(\"utf-8\");\ntry {\n    response.getWriter().println(result);\n} catch (IOException ioException) {\n    log.warn(\"业务异常  msg={}\",ioException);\n}\n```\n\n### 导出成功但是后台日志报类型转换异常\n- 错误日志\n```text\n-No converter for [class com.hzrys.dashboard.common.result.R] with preset Content-Type 'application/vnd.ms-excel;charset=utf-8'\norg.springframework.http.converter.HttpMessageNotWritableException: No converter for [class com.hzrys.dashboard.common.result.R] with preset Content-Type 'application/vnd.ms-excel;charset=utf-8'\n```\n- 原因\n```text\n导出方法不能有返回值，导出文件时会设置相应头为文件格式；如果有返回值，则就会出现数据转换异常的错误\n```\n- 解决方法\n```text\n修改Controller中方法，改为 void 即可\n```\n","slug":"backend/java/utils/excel","published":1,"updated":"2020-10-20T09:45:02.789Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckgup4b0k000h789k8u1fep6s","content":"<h3 id=\"设置中文文件名\"><a href=\"#设置中文文件名\" class=\"headerlink\" title=\"设置中文文件名\"></a>设置中文文件名</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 代码中添加</span><br><span class=\"line\">response.setContentType(&quot;application/vnd.ms-excel;charset=UTF-8&quot;);</span><br><span class=\"line\">response.setCharacterEncoding(&quot;utf-8&quot;);</span><br><span class=\"line\">response.setHeader(&quot;Content-disposition&quot;, &quot;attachment;filename*=utf-8&#x27;&#x27;&quot; + fileName + &quot;.xlsx&quot;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"导出失败返回错误信息\"><a href=\"#导出失败返回错误信息\" class=\"headerlink\" title=\"导出失败返回错误信息\"></a>导出失败返回错误信息</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 重写响应信息数据类型</span><br><span class=\"line\">response.reset();</span><br><span class=\"line\">response.setContentType(&quot;application/json&quot;);</span><br><span class=\"line\">response.setCharacterEncoding(&quot;utf-8&quot;);</span><br><span class=\"line\">try &#123;</span><br><span class=\"line\">    response.getWriter().println(result);</span><br><span class=\"line\">&#125; catch (IOException ioException) &#123;</span><br><span class=\"line\">    log.warn(&quot;业务异常  msg=&#123;&#125;&quot;,ioException);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"导出成功但是后台日志报类型转换异常\"><a href=\"#导出成功但是后台日志报类型转换异常\" class=\"headerlink\" title=\"导出成功但是后台日志报类型转换异常\"></a>导出成功但是后台日志报类型转换异常</h3><ul>\n<li>错误日志<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-No converter for [class com.hzrys.dashboard.common.result.R] with preset Content-Type &#x27;application/vnd.ms-excel;charset=utf-8&#x27;</span><br><span class=\"line\">org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class com.hzrys.dashboard.common.result.R] with preset Content-Type &#x27;application/vnd.ms-excel;charset=utf-8&#x27;</span><br></pre></td></tr></table></figure></li>\n<li>原因<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">导出方法不能有返回值，导出文件时会设置相应头为文件格式；如果有返回值，则就会出现数据转换异常的错误</span><br></pre></td></tr></table></figure></li>\n<li>解决方法<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">修改Controller中方法，改为 void 即可</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"设置中文文件名\"><a href=\"#设置中文文件名\" class=\"headerlink\" title=\"设置中文文件名\"></a>设置中文文件名</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 代码中添加</span><br><span class=\"line\">response.setContentType(&quot;application/vnd.ms-excel;charset=UTF-8&quot;);</span><br><span class=\"line\">response.setCharacterEncoding(&quot;utf-8&quot;);</span><br><span class=\"line\">response.setHeader(&quot;Content-disposition&quot;, &quot;attachment;filename*=utf-8&#x27;&#x27;&quot; + fileName + &quot;.xlsx&quot;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"导出失败返回错误信息\"><a href=\"#导出失败返回错误信息\" class=\"headerlink\" title=\"导出失败返回错误信息\"></a>导出失败返回错误信息</h3><figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 重写响应信息数据类型</span><br><span class=\"line\">response.reset();</span><br><span class=\"line\">response.setContentType(&quot;application/json&quot;);</span><br><span class=\"line\">response.setCharacterEncoding(&quot;utf-8&quot;);</span><br><span class=\"line\">try &#123;</span><br><span class=\"line\">    response.getWriter().println(result);</span><br><span class=\"line\">&#125; catch (IOException ioException) &#123;</span><br><span class=\"line\">    log.warn(&quot;业务异常  msg=&#123;&#125;&quot;,ioException);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"导出成功但是后台日志报类型转换异常\"><a href=\"#导出成功但是后台日志报类型转换异常\" class=\"headerlink\" title=\"导出成功但是后台日志报类型转换异常\"></a>导出成功但是后台日志报类型转换异常</h3><ul>\n<li>错误日志<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-No converter for [class com.hzrys.dashboard.common.result.R] with preset Content-Type &#x27;application/vnd.ms-excel;charset=utf-8&#x27;</span><br><span class=\"line\">org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class com.hzrys.dashboard.common.result.R] with preset Content-Type &#x27;application/vnd.ms-excel;charset=utf-8&#x27;</span><br></pre></td></tr></table></figure></li>\n<li>原因<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">导出方法不能有返回值，导出文件时会设置相应头为文件格式；如果有返回值，则就会出现数据转换异常的错误</span><br></pre></td></tr></table></figure></li>\n<li>解决方法<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">修改Controller中方法，改为 void 即可</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n"},{"title":"阅读","description":"思考 阅读","date":"2020-10-02T06:44:10.000Z","_content":"\n\n- **网址**\n  - [结构化思维](https://www.toutiao.com/i6619057728725729800/)","source":"_posts/thinking/book.md","raw":"---\ntitle: 阅读\ndescription: 思考 阅读\ndate: 2020-10-02 14:44:10\ntags:\n- 思维方式\ncategories:\n- 阅读\n- 思维方式\n---\n\n\n- **网址**\n  - [结构化思维](https://www.toutiao.com/i6619057728725729800/)","slug":"thinking/book","published":1,"updated":"2020-10-02T06:48:57.146Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckgup4b0l000i789kdp8qcqo3","content":"<ul>\n<li><strong>网址</strong><ul>\n<li><a href=\"https://www.toutiao.com/i6619057728725729800/\">结构化思维</a></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><strong>网址</strong><ul>\n<li><a href=\"https://www.toutiao.com/i6619057728725729800/\">结构化思维</a></li>\n</ul>\n</li>\n</ul>\n"},{"title":"软件推荐","date":"2020-10-02T06:34:06.000Z","_content":"\n\n### Mac软件&工具网站\n|主要功能|软件名|相关网址|\n|-|-|-|\n|图片编辑器|PixelStyle||\n|视频播放|IINA||\n|录屏软件|LICEcap||\n|文件比较|Beyond Compare||\n|Markdown编辑工具|Haroopad||\n|Mac包管理工具|Homebrew||\n|Mac破解软件||https://xclient.info|","source":"_posts/tools/software.md","raw":"---\ntitle: 软件推荐\ndate: 2020-10-02 14:34:06\ntags: \n- tool\ncategories:\n- 其他\n- 软件\n---\n\n\n### Mac软件&工具网站\n|主要功能|软件名|相关网址|\n|-|-|-|\n|图片编辑器|PixelStyle||\n|视频播放|IINA||\n|录屏软件|LICEcap||\n|文件比较|Beyond Compare||\n|Markdown编辑工具|Haroopad||\n|Mac包管理工具|Homebrew||\n|Mac破解软件||https://xclient.info|","slug":"tools/software","published":1,"updated":"2020-10-20T09:45:39.143Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckgup4b0p000l789khs5ze95f","content":"<h3 id=\"Mac软件-amp-工具网站\"><a href=\"#Mac软件-amp-工具网站\" class=\"headerlink\" title=\"Mac软件&amp;工具网站\"></a>Mac软件&amp;工具网站</h3><table>\n<thead>\n<tr>\n<th>主要功能</th>\n<th>软件名</th>\n<th>相关网址</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>图片编辑器</td>\n<td>PixelStyle</td>\n<td></td>\n</tr>\n<tr>\n<td>视频播放</td>\n<td>IINA</td>\n<td></td>\n</tr>\n<tr>\n<td>录屏软件</td>\n<td>LICEcap</td>\n<td></td>\n</tr>\n<tr>\n<td>文件比较</td>\n<td>Beyond Compare</td>\n<td></td>\n</tr>\n<tr>\n<td>Markdown编辑工具</td>\n<td>Haroopad</td>\n<td></td>\n</tr>\n<tr>\n<td>Mac包管理工具</td>\n<td>Homebrew</td>\n<td></td>\n</tr>\n<tr>\n<td>Mac破解软件</td>\n<td></td>\n<td><a href=\"https://xclient.info/\">https://xclient.info</a></td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Mac软件-amp-工具网站\"><a href=\"#Mac软件-amp-工具网站\" class=\"headerlink\" title=\"Mac软件&amp;工具网站\"></a>Mac软件&amp;工具网站</h3><table>\n<thead>\n<tr>\n<th>主要功能</th>\n<th>软件名</th>\n<th>相关网址</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>图片编辑器</td>\n<td>PixelStyle</td>\n<td></td>\n</tr>\n<tr>\n<td>视频播放</td>\n<td>IINA</td>\n<td></td>\n</tr>\n<tr>\n<td>录屏软件</td>\n<td>LICEcap</td>\n<td></td>\n</tr>\n<tr>\n<td>文件比较</td>\n<td>Beyond Compare</td>\n<td></td>\n</tr>\n<tr>\n<td>Markdown编辑工具</td>\n<td>Haroopad</td>\n<td></td>\n</tr>\n<tr>\n<td>Mac包管理工具</td>\n<td>Homebrew</td>\n<td></td>\n</tr>\n<tr>\n<td>Mac破解软件</td>\n<td></td>\n<td><a href=\"https://xclient.info/\">https://xclient.info</a></td>\n</tr>\n</tbody></table>\n"},{"title":"14种常用设计模式","date":"2020-10-02T07:51:46.000Z","_content":"\n```\nhttp://www.runoob.com/design-pattern\n设计模式在 Spring 框架中的良好实践\nhttps://mp.weixin.qq.com/s?__biz=MzI4ODQ3NjE2OA==&mid=2247485687&idx=2&sn=d1a405491311488c576197b556d357ec&chksm=ec3c9590db4b1c86a13ff39894dbeead2bbcee738a58da96bcb1bc404b6a948bd1f38312176a&mpshare=1&scene=1&srcid=&sharer_sharetime=1570684867528&sharer_shareid=4c8872b4436b495590f58ccf1453ba58&rd2werd=1#wechat_redirect\n```\n\n## 基础\n### 设计模式的类型\n```\n设计模式可以分为三大类：创建型模式（Creational Patterns）、结构型模式（Structural Patterns）、行为型模式（Behavioral Patterns）。当然，还有另一类设计模式：J2EE 设计模式。\n\n## 创建型模式\n这些设计模式提供了一种在创建对象的同时隐藏创建逻辑的方式，而不是使用 new 运算符直接实例化对象。这使得程序在判断针对某个给定实例需要创建哪些对象时更加灵活。\n\n## 结构型模式\n这些设计模式关注类和对象的组合。继承的概念被用来组合接口和定义组合对象获得新功能的方式。\n\n## 行为型模式\n这些设计模式特别关注对象之间的通信。\n\n详情见：http://www.runoob.com/design-pattern/design-pattern-intro.html\n```\n\n\n### 设计模式实践的关系\n<img class=\"magplus\" title=\"设计模式之间的关系\" src=\"http://www.runoob.com/wp-content/uploads/2014/08/the-relationship-between-design-patterns.jpg\" alt=\"设计模式之间的关系\" width=\"700\" height=\"840\">\n\n### 设计模式的六大原则\n```\n1、开闭原则（Open Close Principle）\n\n开闭原则的意思是：对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。简言之，是为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。\n\n2、里氏代换原则（Liskov Substitution Principle）\n\n里氏代换原则是面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。LSP 是继承复用的基石，只有当派生类可以替换掉基类，且软件单位的功能不受到影响时，基类才能真正被复用，而派生类也能够在基类的基础上增加新的行为。里氏代换原则是对开闭原则的补充。实现开闭原则的关键步骤就是抽象化，而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。\n\n3、依赖倒转原则（Dependence Inversion Principle）\n\n这个原则是开闭原则的基础，具体内容：针对接口编程，依赖于抽象而不依赖于具体。\n\n4、接口隔离原则（Interface Segregation Principle）\n\n这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。它还有另外一个意思是：降低类之间的耦合度。由此可见，其实设计模式就是从大型软件架构出发、便于升级和维护的软件设计思想，它强调降低依赖，降低耦合。\n\n5、迪米特法则，又称最少知道原则（Demeter Principle）\n\n最少知道原则是指：一个实体应当尽量少地与其他实体之间发生相互作用，使得系统功能模块相对独立。\n\n6、合成复用原则（Composite Reuse Principle）\n\n合成复用原则是指：尽量使用合成/聚合的方式，而不是使用继承。\n```\n\n## 模式详解\n### 1.策略模式(Strategy)\n```\n定义个策略接口，不同的实现类提供不同的具体策略算法，通过context方法确定方法执行时具体执行那个子类的方法，属于行为型模式\n混合使用(https://blog.csdn.net/pengpegV5yaya/article/details/25189253)\n优点： 1、算法可以自由切换。 2、避免使用多重条件判断。 3、扩展性良好。\n缺点： 1、策略类会增多。 2、所有策略类都需要对外暴露。\n注意事项：如果一个系统的策略多于四个，就需要考虑使用混合模式，解决策略类膨胀的问题\n```\n- 示例图片<br/>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/strategy_pattern_uml_diagram.jpg\" />\n\n### 2.简单工厂模式( Simple Factory )\n```\n定义一个用以创建对象的工厂, 根据不同的条件[传参/反射]生成不同的对象，属于创建型模式\n\n- 优点：工厂类是整个模式的关键.包含了必要的逻辑判断,根据外界给定的信息,决定究竟应该创建哪个具体类的对象.通过使用工厂类,外界仅仅需要负责“消费”对象就可以了。而不必管这些对象究竟如何创建及如何组织的。\n- 缺点：由于工厂类集中了所有实例的创建逻辑，违反了高内聚责任分配原则，将全部创建逻辑集中到了一个工厂类中；它所能创建的类只能是事先考虑到的，如果需要添加新的类，则就需要改变工厂类了。当系统中的具体产品类不断增多时候，可能会出现要求工厂类根据不同条件创建不同实例的需求．这种对条件的判断和对具体产品类型的判断交错在一起，很难避免模块功能的蔓延，对系统的维护和扩展非常不利；\n```\n\n### 3.工厂模式( Factory )\n```\n针对每一种产品提供一个工厂类，通过不同的工厂实例来创建不同的产品实例。简单工厂是一种产品，工厂是多种产品\n```\n\n### 4.抽象工厂模式( Abstract Factory )\n```\nhttps://blog.csdn.net/hguisu/article/details/7505909\n应对产品族概念而生，属于创建型模式\n\n区别\n简单工厂 ： 用来生产同一等级结构中的任意产品。（对于增加新的产品，无能为力）\n工厂方法 ：用来生产同一等级结构中的固定产品。（支持增加任意产品）\n抽象工厂 ：用来生产不同产品族的全部产品。（对于增加新的产品，无能为力；支持增加产品族）\n\n1）还没有工厂时代：假如还没有工业革命，如果一个客户要一款宝马车,一般的做法是客户去创建一款宝马车，然后拿来用。\n2）简单工厂模式：后来出现工业革命。用户不用去创建车。因为客户有一个工厂来帮他创建.想要什么车，这个工厂就可以建。比如想要宝马车。工厂就创建这个系列的车。即工厂可以创建产品。\n3）工厂方法模式时代：为了满足客户，车品牌越来越多，如宝马、比亚迪等，一个工厂无法创建所有的车型。于是由单独分出来多个具体的工厂。每个具体工厂创建一种系列。即具体工厂类只能创建一个具体产品。但是轿车工厂还是个抽象。你需要指定某个具体的工厂才能生产车出来。\n4）抽象工厂模式时代：随着客户的要求越来越高，轿车必须配置空调。于是这个工厂开始生产轿车和需要的空调。\n\n最终是客户只要对轿车的销售员说：我要宝马空调车，销售员就直接给他宝马空调车了。而不用自己去创建车.\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/abstractfactory_pattern_uml_diagram.jpg\" alt=\"抽象工厂模式的 UML 图\">\n\n### 5.装饰者模式( Decorator )\n```\n动态的给一个对象添加一些额外的功能，属于结构型模式\n优点：装饰类和被装饰类可以独立发展，不会相互耦合，装饰模式是继承的一个替代模式，装饰模式可以动态扩展一个实现类的功能。\n缺点：多层装饰比较复杂。\n使用场景： 1、扩展一个类的功能。 2、动态增加功能，动态撤销。\n注意事项：可代替继承。\n\n其他：下图，RedShapeDecorator extends ShapeDecorator\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/decorator_pattern_uml_diagram.jpg\" alt=\"装饰器模式的 UML 图\"/>\n\n### 6.代理模式( Proxy )\n```\n封装被代理对象并限制外界对被代理对象的访问，属于结构型模式\n关键代码：实现与被代理类组合。\n优点： 1、职责清晰。 2、高扩展性。 3、智能化。\n缺点： 1、由于在客户端和真实主题之间增加了代理对象，因此有些类型的代理模式可能会造成请求的处理速度变慢。 2、实现代理模式需要额外的工作，有些代理模式的实现非常复杂。\n注意事项：\n1、和适配器模式的区别：适配器模式主要改变所考虑对象的接口，而代理模式不能改变所代理类的接口。\n2、和装饰器模式的区别：装饰器模式为了增强功能，而代理模式是为了加以控制。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/proxy_pattern_uml_diagram.jpg\" alt=\"代理模式的 UML 图\">\n\n### 7.模板方法模式( Template )\n```\n1.定义一个操作的算法骨架, 并将一些步骤延迟到子类中\n2.一个抽象类公开定义了执行它的方法的方式/模板。它的子类可以按需要重写方法实现，但调用将以抽象类中定义的方式进行。属于行为型模式。\n\n优点： 1、封装不变部分，扩展可变部分。 2、提取公共代码，便于维护。 3、行为由父类控制，子类实现。\n缺点：每一个不同的实现都需要一个子类来实现，导致类的个数增加，使得系统更加庞大。\n使用场景： 1、有多个子类共有的方法，且逻辑相同。 2、重要的、复杂的方法，可以考虑作为模板方法。\n注意事项：为防止恶意操作，一般模板方法都加上 final 关键词，否则扩展类就可以自己实现模板方法。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/template_pattern_uml_diagram.jpg\" alt=\"模板模式的 UML 图\">\n\n### 8.外观模式( Facade )\n```\n为系统向外界提供一个统一的接口、隐藏系统的复杂性（对使用者来说，只关系需要的结果，不关心怎么实现的）；属于结构型模式\n简单理解：电脑开机关机\n启动电脑（按一下电源键）：启动CPU、启动内存、启动硬盘\n关闭电脑（按一下电源键）：关闭硬盘、关闭内存、关闭CPU\n优点： 1、减少系统相互依赖。 2、提高灵活性。 3、提高了安全性。\n缺点：不符合开闭原则，如果要改东西很麻烦，继承重写都不合适。\n使用场景： 1、为复杂的模块或子系统提供外界访问的模块。 2、子系统相对独立。 3、预防低水平人员带来的风险。\n注意事项：在层次化结构中，可以使用外观模式定义系统中每一层的入口。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/facade_pattern_uml_diagram.jpg\" alt=\"外观模式的 UML 图\">\n\n\n### 9.适配器模式( Adapter )\n```\n将一个类的接口转换成客户希望的另一个接口。属于结构型模式\n简单理解：用于现有业务维护，整合业务逻辑，根据传入的参数来执行具体某个业务\n优点： 1、可以让任何两个没有关联的类一起运行。 2、提高了类的复用。 3、增加了类的透明度。 4、灵活性好。\n缺点：\n1、过多地使用适配器，会让系统非常零乱，不易整体进行把握。比如，明明看到调用的是 A 接口，其实内部被适配成了 B 接口的实现。因此如果不是很有必要，可以不使用适配器，而是直接对系统进行重构。\n2.由于 JAVA 至多继承一个类，所以至多只能适配一个适配者类，而且目标类必须是抽象类。\n\n使用场景：有动机地修改一个正常运行的系统的接口，这时应该考虑使用适配器模式。\n\n注意事项：适配器不是在详细设计时添加的，而是解决正在服役的项目的问题。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/adapter_pattern_uml_diagram.jpg\" alt=\"适配器模式的 UML 图\">\n\n### 10.桥接模式( Bridge )\n```\n将抽象部分与实现部分分离，使它们都可以独立的变化。属于结构型模式\n\n优点： 1、抽象和实现的分离。 2、优秀的扩展能力。 3、实现细节对客户透明。\n\n缺点：桥接模式的引入会增加系统的理解与设计难度，由于聚合关联关系建立在抽象层，要求开发者针对抽象进行设计与编程。\n\n使用场景： 1、如果一个系统需要在构件的抽象化角色和具体化角色之间增加更多的灵活性，避免在两个层次之间建立静态的继承联系，通过桥接模式可以使它们在抽象层建立一个关联关系。 2、对于那些不希望使用继承或因为多层次继承导致系统类的个数急剧增加的系统，桥接模式尤为适用。 3、一个类存在两个独立变化的维度，且这两个维度都需要进行扩展。\n\n注意事项：对于两个独立变化的维度，使用桥接模式再适合不过了。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/bridge_pattern_uml_diagram.jpg\" alt=\"桥接模式的 UML 图\">\n\n### 11.建造者模式( Builder )\n```\n使用多个简单的对象一步一步构建成一个复杂的对象。属于创建型模式\n\n优点： 1、建造者独立，易扩展。 2、便于控制细节风险。\n缺点： 1、产品必须有共同点，范围有限制。 2、如内部变化复杂，会有很多的建造类。\n注意事项：与工厂模式的区别是：建造者模式更加关注与零件装配的顺序。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/builder_pattern_uml_diagram.jpg\" alt=\"建造者模式的 UML 图\">\n\n### 12.观察者模式( Observer )\n```\n定义了一种一对多的依赖关系,让多个观察者对象同时监听某一主题对象,在它的状态发生变化时,会通知所有的观察者。观察者模式属于行为型模式。\n\n优点： 1、观察者和被观察者是抽象耦合的。 2、建立一套触发机制。\n\n缺点：\n    1、观察者太多时，通知观察者会耗时比较久\n    2、如果在观察者和观察目标之间有循环依赖的话，观察目标会触发它们之间进行循环调用，可能导致系统崩溃。\n    3、观察者模式仅仅只是知道观察目标发生了变化。\n注意事项：\n    1、JAVA 中已经有了对观察者模式的支持类。\n    2、避免循环引用。\n    3、如果顺序执行，某一观察者错误会导致系统卡壳，一般采用异步方式。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/observer_pattern_uml_diagram.jpg\" alt=\"观察者模式的 UML 图\">\n\n### 13.单例模式( Singleton )\n```\n保证一个类仅有一个实例,并提供一个访问它的全局控制点.\n优点：\n1、在内存里只有一个实例，减少了内存的开销，尤其是频繁的创建和销毁实例（比如管理学院首页页面缓存）。\n2、避免对资源的多重占用（比如写文件操作）。\n   缺点：没有接口，不能继承，与单一职责原则冲突，一个类应该只关心内部逻辑，而不关心外面怎么样来实例化。\n单例模式的几种实现方式\n1.懒汉式，线程不安全\n   不加锁 synchronized，所以严格意义上它并不算单例模式。\n这种方式 lazy loading 很明显，不要求线程安全，在多线程不能正常工作\n2.懒汉式，线程安全\n\t加锁 synchronized，方式具备很好的 lazy loading，能够在多线程中很好的工作，但是，效率很低，99% 情况下不需要同步。\n\t优点：第一次调用才初始化，避免内存浪费。\n\t缺点：必须加锁 synchronized 才能保证单例，但加锁会影响效率。\ngetInstance() 的性能对应用程序不是很关键（该方法使用不太频繁）。\n3、饿汉式\n\t优点：没有加锁，执行效率会提高。\n\t缺点：类加载时就初始化，浪费内存。\n4、双检锁/双重校验锁（DCL，即 double-checked locking）\n\t这种方式采用双锁机制，安全且在多线程情况下能保持高性能。\ngetInstance() 的性能对应用程序很关键。\n5、登记式/静态内部类\n\t这种方式能达到双检锁方式一样的功效，但实现更简单。对静态域使用延迟初始化，应使用这种方式而不是双检锁方式。这种方式只适用于静态域的情况，双检锁方式可在实例域需要延迟初始化时使用。\n6、枚举\n\t这种实现方式还没有被广泛采用，但这是实现单例模式的最佳方法。它更简洁，自动支持序列化机制，绝对防止多次实例化。\n\n经验之谈：一般情况下，不建议使用第 1 种和第 2 种懒汉方式，建议使用第 3 种饿汉方式。只有在要明确实现 lazy loading 效果时，才会使用第 5 种登记方式。如果涉及到反序列化创建对象时，可以尝试使用第 6 种枚举方式。如果有其他特殊的需求，可以考虑使用第 4 种双检锁方式。\n```\n\n### 14.命令模式( Command )\n```\n将一个请求封装成为一个对象, 使可以用不同的请求对客户进行参数化\n优点：\n1、降低了系统耦合度。\n2、新的命令可以很容易添加到系统中去。\n缺点：使用命令模式可能会导致某些系统有过多的具体命令类。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/command_pattern_uml_diagram.jpg\" alt=\"命令模式的 UML 图\">","source":"_posts/framework/design-model.md","raw":"---\ntitle: 14种常用设计模式\ndate: 2020-10-02 15:51:46\ntags: \n- 设计模式\ncategories: \n- 架构\n- 设计模式\n---\n\n```\nhttp://www.runoob.com/design-pattern\n设计模式在 Spring 框架中的良好实践\nhttps://mp.weixin.qq.com/s?__biz=MzI4ODQ3NjE2OA==&mid=2247485687&idx=2&sn=d1a405491311488c576197b556d357ec&chksm=ec3c9590db4b1c86a13ff39894dbeead2bbcee738a58da96bcb1bc404b6a948bd1f38312176a&mpshare=1&scene=1&srcid=&sharer_sharetime=1570684867528&sharer_shareid=4c8872b4436b495590f58ccf1453ba58&rd2werd=1#wechat_redirect\n```\n\n## 基础\n### 设计模式的类型\n```\n设计模式可以分为三大类：创建型模式（Creational Patterns）、结构型模式（Structural Patterns）、行为型模式（Behavioral Patterns）。当然，还有另一类设计模式：J2EE 设计模式。\n\n## 创建型模式\n这些设计模式提供了一种在创建对象的同时隐藏创建逻辑的方式，而不是使用 new 运算符直接实例化对象。这使得程序在判断针对某个给定实例需要创建哪些对象时更加灵活。\n\n## 结构型模式\n这些设计模式关注类和对象的组合。继承的概念被用来组合接口和定义组合对象获得新功能的方式。\n\n## 行为型模式\n这些设计模式特别关注对象之间的通信。\n\n详情见：http://www.runoob.com/design-pattern/design-pattern-intro.html\n```\n\n\n### 设计模式实践的关系\n<img class=\"magplus\" title=\"设计模式之间的关系\" src=\"http://www.runoob.com/wp-content/uploads/2014/08/the-relationship-between-design-patterns.jpg\" alt=\"设计模式之间的关系\" width=\"700\" height=\"840\">\n\n### 设计模式的六大原则\n```\n1、开闭原则（Open Close Principle）\n\n开闭原则的意思是：对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。简言之，是为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。\n\n2、里氏代换原则（Liskov Substitution Principle）\n\n里氏代换原则是面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。LSP 是继承复用的基石，只有当派生类可以替换掉基类，且软件单位的功能不受到影响时，基类才能真正被复用，而派生类也能够在基类的基础上增加新的行为。里氏代换原则是对开闭原则的补充。实现开闭原则的关键步骤就是抽象化，而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。\n\n3、依赖倒转原则（Dependence Inversion Principle）\n\n这个原则是开闭原则的基础，具体内容：针对接口编程，依赖于抽象而不依赖于具体。\n\n4、接口隔离原则（Interface Segregation Principle）\n\n这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。它还有另外一个意思是：降低类之间的耦合度。由此可见，其实设计模式就是从大型软件架构出发、便于升级和维护的软件设计思想，它强调降低依赖，降低耦合。\n\n5、迪米特法则，又称最少知道原则（Demeter Principle）\n\n最少知道原则是指：一个实体应当尽量少地与其他实体之间发生相互作用，使得系统功能模块相对独立。\n\n6、合成复用原则（Composite Reuse Principle）\n\n合成复用原则是指：尽量使用合成/聚合的方式，而不是使用继承。\n```\n\n## 模式详解\n### 1.策略模式(Strategy)\n```\n定义个策略接口，不同的实现类提供不同的具体策略算法，通过context方法确定方法执行时具体执行那个子类的方法，属于行为型模式\n混合使用(https://blog.csdn.net/pengpegV5yaya/article/details/25189253)\n优点： 1、算法可以自由切换。 2、避免使用多重条件判断。 3、扩展性良好。\n缺点： 1、策略类会增多。 2、所有策略类都需要对外暴露。\n注意事项：如果一个系统的策略多于四个，就需要考虑使用混合模式，解决策略类膨胀的问题\n```\n- 示例图片<br/>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/strategy_pattern_uml_diagram.jpg\" />\n\n### 2.简单工厂模式( Simple Factory )\n```\n定义一个用以创建对象的工厂, 根据不同的条件[传参/反射]生成不同的对象，属于创建型模式\n\n- 优点：工厂类是整个模式的关键.包含了必要的逻辑判断,根据外界给定的信息,决定究竟应该创建哪个具体类的对象.通过使用工厂类,外界仅仅需要负责“消费”对象就可以了。而不必管这些对象究竟如何创建及如何组织的。\n- 缺点：由于工厂类集中了所有实例的创建逻辑，违反了高内聚责任分配原则，将全部创建逻辑集中到了一个工厂类中；它所能创建的类只能是事先考虑到的，如果需要添加新的类，则就需要改变工厂类了。当系统中的具体产品类不断增多时候，可能会出现要求工厂类根据不同条件创建不同实例的需求．这种对条件的判断和对具体产品类型的判断交错在一起，很难避免模块功能的蔓延，对系统的维护和扩展非常不利；\n```\n\n### 3.工厂模式( Factory )\n```\n针对每一种产品提供一个工厂类，通过不同的工厂实例来创建不同的产品实例。简单工厂是一种产品，工厂是多种产品\n```\n\n### 4.抽象工厂模式( Abstract Factory )\n```\nhttps://blog.csdn.net/hguisu/article/details/7505909\n应对产品族概念而生，属于创建型模式\n\n区别\n简单工厂 ： 用来生产同一等级结构中的任意产品。（对于增加新的产品，无能为力）\n工厂方法 ：用来生产同一等级结构中的固定产品。（支持增加任意产品）\n抽象工厂 ：用来生产不同产品族的全部产品。（对于增加新的产品，无能为力；支持增加产品族）\n\n1）还没有工厂时代：假如还没有工业革命，如果一个客户要一款宝马车,一般的做法是客户去创建一款宝马车，然后拿来用。\n2）简单工厂模式：后来出现工业革命。用户不用去创建车。因为客户有一个工厂来帮他创建.想要什么车，这个工厂就可以建。比如想要宝马车。工厂就创建这个系列的车。即工厂可以创建产品。\n3）工厂方法模式时代：为了满足客户，车品牌越来越多，如宝马、比亚迪等，一个工厂无法创建所有的车型。于是由单独分出来多个具体的工厂。每个具体工厂创建一种系列。即具体工厂类只能创建一个具体产品。但是轿车工厂还是个抽象。你需要指定某个具体的工厂才能生产车出来。\n4）抽象工厂模式时代：随着客户的要求越来越高，轿车必须配置空调。于是这个工厂开始生产轿车和需要的空调。\n\n最终是客户只要对轿车的销售员说：我要宝马空调车，销售员就直接给他宝马空调车了。而不用自己去创建车.\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/abstractfactory_pattern_uml_diagram.jpg\" alt=\"抽象工厂模式的 UML 图\">\n\n### 5.装饰者模式( Decorator )\n```\n动态的给一个对象添加一些额外的功能，属于结构型模式\n优点：装饰类和被装饰类可以独立发展，不会相互耦合，装饰模式是继承的一个替代模式，装饰模式可以动态扩展一个实现类的功能。\n缺点：多层装饰比较复杂。\n使用场景： 1、扩展一个类的功能。 2、动态增加功能，动态撤销。\n注意事项：可代替继承。\n\n其他：下图，RedShapeDecorator extends ShapeDecorator\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/decorator_pattern_uml_diagram.jpg\" alt=\"装饰器模式的 UML 图\"/>\n\n### 6.代理模式( Proxy )\n```\n封装被代理对象并限制外界对被代理对象的访问，属于结构型模式\n关键代码：实现与被代理类组合。\n优点： 1、职责清晰。 2、高扩展性。 3、智能化。\n缺点： 1、由于在客户端和真实主题之间增加了代理对象，因此有些类型的代理模式可能会造成请求的处理速度变慢。 2、实现代理模式需要额外的工作，有些代理模式的实现非常复杂。\n注意事项：\n1、和适配器模式的区别：适配器模式主要改变所考虑对象的接口，而代理模式不能改变所代理类的接口。\n2、和装饰器模式的区别：装饰器模式为了增强功能，而代理模式是为了加以控制。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/proxy_pattern_uml_diagram.jpg\" alt=\"代理模式的 UML 图\">\n\n### 7.模板方法模式( Template )\n```\n1.定义一个操作的算法骨架, 并将一些步骤延迟到子类中\n2.一个抽象类公开定义了执行它的方法的方式/模板。它的子类可以按需要重写方法实现，但调用将以抽象类中定义的方式进行。属于行为型模式。\n\n优点： 1、封装不变部分，扩展可变部分。 2、提取公共代码，便于维护。 3、行为由父类控制，子类实现。\n缺点：每一个不同的实现都需要一个子类来实现，导致类的个数增加，使得系统更加庞大。\n使用场景： 1、有多个子类共有的方法，且逻辑相同。 2、重要的、复杂的方法，可以考虑作为模板方法。\n注意事项：为防止恶意操作，一般模板方法都加上 final 关键词，否则扩展类就可以自己实现模板方法。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/template_pattern_uml_diagram.jpg\" alt=\"模板模式的 UML 图\">\n\n### 8.外观模式( Facade )\n```\n为系统向外界提供一个统一的接口、隐藏系统的复杂性（对使用者来说，只关系需要的结果，不关心怎么实现的）；属于结构型模式\n简单理解：电脑开机关机\n启动电脑（按一下电源键）：启动CPU、启动内存、启动硬盘\n关闭电脑（按一下电源键）：关闭硬盘、关闭内存、关闭CPU\n优点： 1、减少系统相互依赖。 2、提高灵活性。 3、提高了安全性。\n缺点：不符合开闭原则，如果要改东西很麻烦，继承重写都不合适。\n使用场景： 1、为复杂的模块或子系统提供外界访问的模块。 2、子系统相对独立。 3、预防低水平人员带来的风险。\n注意事项：在层次化结构中，可以使用外观模式定义系统中每一层的入口。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/facade_pattern_uml_diagram.jpg\" alt=\"外观模式的 UML 图\">\n\n\n### 9.适配器模式( Adapter )\n```\n将一个类的接口转换成客户希望的另一个接口。属于结构型模式\n简单理解：用于现有业务维护，整合业务逻辑，根据传入的参数来执行具体某个业务\n优点： 1、可以让任何两个没有关联的类一起运行。 2、提高了类的复用。 3、增加了类的透明度。 4、灵活性好。\n缺点：\n1、过多地使用适配器，会让系统非常零乱，不易整体进行把握。比如，明明看到调用的是 A 接口，其实内部被适配成了 B 接口的实现。因此如果不是很有必要，可以不使用适配器，而是直接对系统进行重构。\n2.由于 JAVA 至多继承一个类，所以至多只能适配一个适配者类，而且目标类必须是抽象类。\n\n使用场景：有动机地修改一个正常运行的系统的接口，这时应该考虑使用适配器模式。\n\n注意事项：适配器不是在详细设计时添加的，而是解决正在服役的项目的问题。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/adapter_pattern_uml_diagram.jpg\" alt=\"适配器模式的 UML 图\">\n\n### 10.桥接模式( Bridge )\n```\n将抽象部分与实现部分分离，使它们都可以独立的变化。属于结构型模式\n\n优点： 1、抽象和实现的分离。 2、优秀的扩展能力。 3、实现细节对客户透明。\n\n缺点：桥接模式的引入会增加系统的理解与设计难度，由于聚合关联关系建立在抽象层，要求开发者针对抽象进行设计与编程。\n\n使用场景： 1、如果一个系统需要在构件的抽象化角色和具体化角色之间增加更多的灵活性，避免在两个层次之间建立静态的继承联系，通过桥接模式可以使它们在抽象层建立一个关联关系。 2、对于那些不希望使用继承或因为多层次继承导致系统类的个数急剧增加的系统，桥接模式尤为适用。 3、一个类存在两个独立变化的维度，且这两个维度都需要进行扩展。\n\n注意事项：对于两个独立变化的维度，使用桥接模式再适合不过了。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/bridge_pattern_uml_diagram.jpg\" alt=\"桥接模式的 UML 图\">\n\n### 11.建造者模式( Builder )\n```\n使用多个简单的对象一步一步构建成一个复杂的对象。属于创建型模式\n\n优点： 1、建造者独立，易扩展。 2、便于控制细节风险。\n缺点： 1、产品必须有共同点，范围有限制。 2、如内部变化复杂，会有很多的建造类。\n注意事项：与工厂模式的区别是：建造者模式更加关注与零件装配的顺序。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/builder_pattern_uml_diagram.jpg\" alt=\"建造者模式的 UML 图\">\n\n### 12.观察者模式( Observer )\n```\n定义了一种一对多的依赖关系,让多个观察者对象同时监听某一主题对象,在它的状态发生变化时,会通知所有的观察者。观察者模式属于行为型模式。\n\n优点： 1、观察者和被观察者是抽象耦合的。 2、建立一套触发机制。\n\n缺点：\n    1、观察者太多时，通知观察者会耗时比较久\n    2、如果在观察者和观察目标之间有循环依赖的话，观察目标会触发它们之间进行循环调用，可能导致系统崩溃。\n    3、观察者模式仅仅只是知道观察目标发生了变化。\n注意事项：\n    1、JAVA 中已经有了对观察者模式的支持类。\n    2、避免循环引用。\n    3、如果顺序执行，某一观察者错误会导致系统卡壳，一般采用异步方式。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/observer_pattern_uml_diagram.jpg\" alt=\"观察者模式的 UML 图\">\n\n### 13.单例模式( Singleton )\n```\n保证一个类仅有一个实例,并提供一个访问它的全局控制点.\n优点：\n1、在内存里只有一个实例，减少了内存的开销，尤其是频繁的创建和销毁实例（比如管理学院首页页面缓存）。\n2、避免对资源的多重占用（比如写文件操作）。\n   缺点：没有接口，不能继承，与单一职责原则冲突，一个类应该只关心内部逻辑，而不关心外面怎么样来实例化。\n单例模式的几种实现方式\n1.懒汉式，线程不安全\n   不加锁 synchronized，所以严格意义上它并不算单例模式。\n这种方式 lazy loading 很明显，不要求线程安全，在多线程不能正常工作\n2.懒汉式，线程安全\n\t加锁 synchronized，方式具备很好的 lazy loading，能够在多线程中很好的工作，但是，效率很低，99% 情况下不需要同步。\n\t优点：第一次调用才初始化，避免内存浪费。\n\t缺点：必须加锁 synchronized 才能保证单例，但加锁会影响效率。\ngetInstance() 的性能对应用程序不是很关键（该方法使用不太频繁）。\n3、饿汉式\n\t优点：没有加锁，执行效率会提高。\n\t缺点：类加载时就初始化，浪费内存。\n4、双检锁/双重校验锁（DCL，即 double-checked locking）\n\t这种方式采用双锁机制，安全且在多线程情况下能保持高性能。\ngetInstance() 的性能对应用程序很关键。\n5、登记式/静态内部类\n\t这种方式能达到双检锁方式一样的功效，但实现更简单。对静态域使用延迟初始化，应使用这种方式而不是双检锁方式。这种方式只适用于静态域的情况，双检锁方式可在实例域需要延迟初始化时使用。\n6、枚举\n\t这种实现方式还没有被广泛采用，但这是实现单例模式的最佳方法。它更简洁，自动支持序列化机制，绝对防止多次实例化。\n\n经验之谈：一般情况下，不建议使用第 1 种和第 2 种懒汉方式，建议使用第 3 种饿汉方式。只有在要明确实现 lazy loading 效果时，才会使用第 5 种登记方式。如果涉及到反序列化创建对象时，可以尝试使用第 6 种枚举方式。如果有其他特殊的需求，可以考虑使用第 4 种双检锁方式。\n```\n\n### 14.命令模式( Command )\n```\n将一个请求封装成为一个对象, 使可以用不同的请求对客户进行参数化\n优点：\n1、降低了系统耦合度。\n2、新的命令可以很容易添加到系统中去。\n缺点：使用命令模式可能会导致某些系统有过多的具体命令类。\n```\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/command_pattern_uml_diagram.jpg\" alt=\"命令模式的 UML 图\">","slug":"framework/design-model","published":1,"updated":"2020-10-02T07:58:18.443Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckgup4b14001p789k3vom96u8","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:&#x2F;&#x2F;www.runoob.com&#x2F;design-pattern</span><br><span class=\"line\">设计模式在 Spring 框架中的良好实践</span><br><span class=\"line\">https:&#x2F;&#x2F;mp.weixin.qq.com&#x2F;s?__biz&#x3D;MzI4ODQ3NjE2OA&#x3D;&#x3D;&amp;mid&#x3D;2247485687&amp;idx&#x3D;2&amp;sn&#x3D;d1a405491311488c576197b556d357ec&amp;chksm&#x3D;ec3c9590db4b1c86a13ff39894dbeead2bbcee738a58da96bcb1bc404b6a948bd1f38312176a&amp;mpshare&#x3D;1&amp;scene&#x3D;1&amp;srcid&#x3D;&amp;sharer_sharetime&#x3D;1570684867528&amp;sharer_shareid&#x3D;4c8872b4436b495590f58ccf1453ba58&amp;rd2werd&#x3D;1#wechat_redirect</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"基础\"><a href=\"#基础\" class=\"headerlink\" title=\"基础\"></a>基础</h2><h3 id=\"设计模式的类型\"><a href=\"#设计模式的类型\" class=\"headerlink\" title=\"设计模式的类型\"></a>设计模式的类型</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">设计模式可以分为三大类：创建型模式（Creational Patterns）、结构型模式（Structural Patterns）、行为型模式（Behavioral Patterns）。当然，还有另一类设计模式：J2EE 设计模式。</span><br><span class=\"line\"></span><br><span class=\"line\">## 创建型模式</span><br><span class=\"line\">这些设计模式提供了一种在创建对象的同时隐藏创建逻辑的方式，而不是使用 new 运算符直接实例化对象。这使得程序在判断针对某个给定实例需要创建哪些对象时更加灵活。</span><br><span class=\"line\"></span><br><span class=\"line\">## 结构型模式</span><br><span class=\"line\">这些设计模式关注类和对象的组合。继承的概念被用来组合接口和定义组合对象获得新功能的方式。</span><br><span class=\"line\"></span><br><span class=\"line\">## 行为型模式</span><br><span class=\"line\">这些设计模式特别关注对象之间的通信。</span><br><span class=\"line\"></span><br><span class=\"line\">详情见：http:&#x2F;&#x2F;www.runoob.com&#x2F;design-pattern&#x2F;design-pattern-intro.html</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"设计模式实践的关系\"><a href=\"#设计模式实践的关系\" class=\"headerlink\" title=\"设计模式实践的关系\"></a>设计模式实践的关系</h3><img class=\"magplus\" title=\"设计模式之间的关系\" src=\"http://www.runoob.com/wp-content/uploads/2014/08/the-relationship-between-design-patterns.jpg\" alt=\"设计模式之间的关系\" width=\"700\" height=\"840\">\n\n<h3 id=\"设计模式的六大原则\"><a href=\"#设计模式的六大原则\" class=\"headerlink\" title=\"设计模式的六大原则\"></a>设计模式的六大原则</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1、开闭原则（Open Close Principle）</span><br><span class=\"line\"></span><br><span class=\"line\">开闭原则的意思是：对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。简言之，是为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。</span><br><span class=\"line\"></span><br><span class=\"line\">2、里氏代换原则（Liskov Substitution Principle）</span><br><span class=\"line\"></span><br><span class=\"line\">里氏代换原则是面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。LSP 是继承复用的基石，只有当派生类可以替换掉基类，且软件单位的功能不受到影响时，基类才能真正被复用，而派生类也能够在基类的基础上增加新的行为。里氏代换原则是对开闭原则的补充。实现开闭原则的关键步骤就是抽象化，而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。</span><br><span class=\"line\"></span><br><span class=\"line\">3、依赖倒转原则（Dependence Inversion Principle）</span><br><span class=\"line\"></span><br><span class=\"line\">这个原则是开闭原则的基础，具体内容：针对接口编程，依赖于抽象而不依赖于具体。</span><br><span class=\"line\"></span><br><span class=\"line\">4、接口隔离原则（Interface Segregation Principle）</span><br><span class=\"line\"></span><br><span class=\"line\">这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。它还有另外一个意思是：降低类之间的耦合度。由此可见，其实设计模式就是从大型软件架构出发、便于升级和维护的软件设计思想，它强调降低依赖，降低耦合。</span><br><span class=\"line\"></span><br><span class=\"line\">5、迪米特法则，又称最少知道原则（Demeter Principle）</span><br><span class=\"line\"></span><br><span class=\"line\">最少知道原则是指：一个实体应当尽量少地与其他实体之间发生相互作用，使得系统功能模块相对独立。</span><br><span class=\"line\"></span><br><span class=\"line\">6、合成复用原则（Composite Reuse Principle）</span><br><span class=\"line\"></span><br><span class=\"line\">合成复用原则是指：尽量使用合成&#x2F;聚合的方式，而不是使用继承。</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"模式详解\"><a href=\"#模式详解\" class=\"headerlink\" title=\"模式详解\"></a>模式详解</h2><h3 id=\"1-策略模式-Strategy\"><a href=\"#1-策略模式-Strategy\" class=\"headerlink\" title=\"1.策略模式(Strategy)\"></a>1.策略模式(Strategy)</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">定义个策略接口，不同的实现类提供不同的具体策略算法，通过context方法确定方法执行时具体执行那个子类的方法，属于行为型模式</span><br><span class=\"line\">混合使用(https:&#x2F;&#x2F;blog.csdn.net&#x2F;pengpegV5yaya&#x2F;article&#x2F;details&#x2F;25189253)</span><br><span class=\"line\">优点： 1、算法可以自由切换。 2、避免使用多重条件判断。 3、扩展性良好。</span><br><span class=\"line\">缺点： 1、策略类会增多。 2、所有策略类都需要对外暴露。</span><br><span class=\"line\">注意事项：如果一个系统的策略多于四个，就需要考虑使用混合模式，解决策略类膨胀的问题</span><br></pre></td></tr></table></figure>\n<ul>\n<li>示例图片<br/><img src=\"http://www.runoob.com/wp-content/uploads/2014/08/strategy_pattern_uml_diagram.jpg\" />\n\n</li>\n</ul>\n<h3 id=\"2-简单工厂模式-Simple-Factory\"><a href=\"#2-简单工厂模式-Simple-Factory\" class=\"headerlink\" title=\"2.简单工厂模式( Simple Factory )\"></a>2.简单工厂模式( Simple Factory )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">定义一个用以创建对象的工厂, 根据不同的条件[传参&#x2F;反射]生成不同的对象，属于创建型模式</span><br><span class=\"line\"></span><br><span class=\"line\">- 优点：工厂类是整个模式的关键.包含了必要的逻辑判断,根据外界给定的信息,决定究竟应该创建哪个具体类的对象.通过使用工厂类,外界仅仅需要负责“消费”对象就可以了。而不必管这些对象究竟如何创建及如何组织的。</span><br><span class=\"line\">- 缺点：由于工厂类集中了所有实例的创建逻辑，违反了高内聚责任分配原则，将全部创建逻辑集中到了一个工厂类中；它所能创建的类只能是事先考虑到的，如果需要添加新的类，则就需要改变工厂类了。当系统中的具体产品类不断增多时候，可能会出现要求工厂类根据不同条件创建不同实例的需求．这种对条件的判断和对具体产品类型的判断交错在一起，很难避免模块功能的蔓延，对系统的维护和扩展非常不利；</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-工厂模式-Factory\"><a href=\"#3-工厂模式-Factory\" class=\"headerlink\" title=\"3.工厂模式( Factory )\"></a>3.工厂模式( Factory )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">针对每一种产品提供一个工厂类，通过不同的工厂实例来创建不同的产品实例。简单工厂是一种产品，工厂是多种产品</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-抽象工厂模式-Abstract-Factory\"><a href=\"#4-抽象工厂模式-Abstract-Factory\" class=\"headerlink\" title=\"4.抽象工厂模式( Abstract Factory )\"></a>4.抽象工厂模式( Abstract Factory )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;blog.csdn.net&#x2F;hguisu&#x2F;article&#x2F;details&#x2F;7505909</span><br><span class=\"line\">应对产品族概念而生，属于创建型模式</span><br><span class=\"line\"></span><br><span class=\"line\">区别</span><br><span class=\"line\">简单工厂 ： 用来生产同一等级结构中的任意产品。（对于增加新的产品，无能为力）</span><br><span class=\"line\">工厂方法 ：用来生产同一等级结构中的固定产品。（支持增加任意产品）</span><br><span class=\"line\">抽象工厂 ：用来生产不同产品族的全部产品。（对于增加新的产品，无能为力；支持增加产品族）</span><br><span class=\"line\"></span><br><span class=\"line\">1）还没有工厂时代：假如还没有工业革命，如果一个客户要一款宝马车,一般的做法是客户去创建一款宝马车，然后拿来用。</span><br><span class=\"line\">2）简单工厂模式：后来出现工业革命。用户不用去创建车。因为客户有一个工厂来帮他创建.想要什么车，这个工厂就可以建。比如想要宝马车。工厂就创建这个系列的车。即工厂可以创建产品。</span><br><span class=\"line\">3）工厂方法模式时代：为了满足客户，车品牌越来越多，如宝马、比亚迪等，一个工厂无法创建所有的车型。于是由单独分出来多个具体的工厂。每个具体工厂创建一种系列。即具体工厂类只能创建一个具体产品。但是轿车工厂还是个抽象。你需要指定某个具体的工厂才能生产车出来。</span><br><span class=\"line\">4）抽象工厂模式时代：随着客户的要求越来越高，轿车必须配置空调。于是这个工厂开始生产轿车和需要的空调。</span><br><span class=\"line\"></span><br><span class=\"line\">最终是客户只要对轿车的销售员说：我要宝马空调车，销售员就直接给他宝马空调车了。而不用自己去创建车.</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/abstractfactory_pattern_uml_diagram.jpg\" alt=\"抽象工厂模式的 UML 图\">\n\n<h3 id=\"5-装饰者模式-Decorator\"><a href=\"#5-装饰者模式-Decorator\" class=\"headerlink\" title=\"5.装饰者模式( Decorator )\"></a>5.装饰者模式( Decorator )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">动态的给一个对象添加一些额外的功能，属于结构型模式</span><br><span class=\"line\">优点：装饰类和被装饰类可以独立发展，不会相互耦合，装饰模式是继承的一个替代模式，装饰模式可以动态扩展一个实现类的功能。</span><br><span class=\"line\">缺点：多层装饰比较复杂。</span><br><span class=\"line\">使用场景： 1、扩展一个类的功能。 2、动态增加功能，动态撤销。</span><br><span class=\"line\">注意事项：可代替继承。</span><br><span class=\"line\"></span><br><span class=\"line\">其他：下图，RedShapeDecorator extends ShapeDecorator</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/decorator_pattern_uml_diagram.jpg\" alt=\"装饰器模式的 UML 图\"/>\n\n<h3 id=\"6-代理模式-Proxy\"><a href=\"#6-代理模式-Proxy\" class=\"headerlink\" title=\"6.代理模式( Proxy )\"></a>6.代理模式( Proxy )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">封装被代理对象并限制外界对被代理对象的访问，属于结构型模式</span><br><span class=\"line\">关键代码：实现与被代理类组合。</span><br><span class=\"line\">优点： 1、职责清晰。 2、高扩展性。 3、智能化。</span><br><span class=\"line\">缺点： 1、由于在客户端和真实主题之间增加了代理对象，因此有些类型的代理模式可能会造成请求的处理速度变慢。 2、实现代理模式需要额外的工作，有些代理模式的实现非常复杂。</span><br><span class=\"line\">注意事项：</span><br><span class=\"line\">1、和适配器模式的区别：适配器模式主要改变所考虑对象的接口，而代理模式不能改变所代理类的接口。</span><br><span class=\"line\">2、和装饰器模式的区别：装饰器模式为了增强功能，而代理模式是为了加以控制。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/proxy_pattern_uml_diagram.jpg\" alt=\"代理模式的 UML 图\">\n\n<h3 id=\"7-模板方法模式-Template\"><a href=\"#7-模板方法模式-Template\" class=\"headerlink\" title=\"7.模板方法模式( Template )\"></a>7.模板方法模式( Template )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.定义一个操作的算法骨架, 并将一些步骤延迟到子类中</span><br><span class=\"line\">2.一个抽象类公开定义了执行它的方法的方式&#x2F;模板。它的子类可以按需要重写方法实现，但调用将以抽象类中定义的方式进行。属于行为型模式。</span><br><span class=\"line\"></span><br><span class=\"line\">优点： 1、封装不变部分，扩展可变部分。 2、提取公共代码，便于维护。 3、行为由父类控制，子类实现。</span><br><span class=\"line\">缺点：每一个不同的实现都需要一个子类来实现，导致类的个数增加，使得系统更加庞大。</span><br><span class=\"line\">使用场景： 1、有多个子类共有的方法，且逻辑相同。 2、重要的、复杂的方法，可以考虑作为模板方法。</span><br><span class=\"line\">注意事项：为防止恶意操作，一般模板方法都加上 final 关键词，否则扩展类就可以自己实现模板方法。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/template_pattern_uml_diagram.jpg\" alt=\"模板模式的 UML 图\">\n\n<h3 id=\"8-外观模式-Facade\"><a href=\"#8-外观模式-Facade\" class=\"headerlink\" title=\"8.外观模式( Facade )\"></a>8.外观模式( Facade )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">为系统向外界提供一个统一的接口、隐藏系统的复杂性（对使用者来说，只关系需要的结果，不关心怎么实现的）；属于结构型模式</span><br><span class=\"line\">简单理解：电脑开机关机</span><br><span class=\"line\">启动电脑（按一下电源键）：启动CPU、启动内存、启动硬盘</span><br><span class=\"line\">关闭电脑（按一下电源键）：关闭硬盘、关闭内存、关闭CPU</span><br><span class=\"line\">优点： 1、减少系统相互依赖。 2、提高灵活性。 3、提高了安全性。</span><br><span class=\"line\">缺点：不符合开闭原则，如果要改东西很麻烦，继承重写都不合适。</span><br><span class=\"line\">使用场景： 1、为复杂的模块或子系统提供外界访问的模块。 2、子系统相对独立。 3、预防低水平人员带来的风险。</span><br><span class=\"line\">注意事项：在层次化结构中，可以使用外观模式定义系统中每一层的入口。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/facade_pattern_uml_diagram.jpg\" alt=\"外观模式的 UML 图\">\n\n\n<h3 id=\"9-适配器模式-Adapter\"><a href=\"#9-适配器模式-Adapter\" class=\"headerlink\" title=\"9.适配器模式( Adapter )\"></a>9.适配器模式( Adapter )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">将一个类的接口转换成客户希望的另一个接口。属于结构型模式</span><br><span class=\"line\">简单理解：用于现有业务维护，整合业务逻辑，根据传入的参数来执行具体某个业务</span><br><span class=\"line\">优点： 1、可以让任何两个没有关联的类一起运行。 2、提高了类的复用。 3、增加了类的透明度。 4、灵活性好。</span><br><span class=\"line\">缺点：</span><br><span class=\"line\">1、过多地使用适配器，会让系统非常零乱，不易整体进行把握。比如，明明看到调用的是 A 接口，其实内部被适配成了 B 接口的实现。因此如果不是很有必要，可以不使用适配器，而是直接对系统进行重构。</span><br><span class=\"line\">2.由于 JAVA 至多继承一个类，所以至多只能适配一个适配者类，而且目标类必须是抽象类。</span><br><span class=\"line\"></span><br><span class=\"line\">使用场景：有动机地修改一个正常运行的系统的接口，这时应该考虑使用适配器模式。</span><br><span class=\"line\"></span><br><span class=\"line\">注意事项：适配器不是在详细设计时添加的，而是解决正在服役的项目的问题。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/adapter_pattern_uml_diagram.jpg\" alt=\"适配器模式的 UML 图\">\n\n<h3 id=\"10-桥接模式-Bridge\"><a href=\"#10-桥接模式-Bridge\" class=\"headerlink\" title=\"10.桥接模式( Bridge )\"></a>10.桥接模式( Bridge )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">将抽象部分与实现部分分离，使它们都可以独立的变化。属于结构型模式</span><br><span class=\"line\"></span><br><span class=\"line\">优点： 1、抽象和实现的分离。 2、优秀的扩展能力。 3、实现细节对客户透明。</span><br><span class=\"line\"></span><br><span class=\"line\">缺点：桥接模式的引入会增加系统的理解与设计难度，由于聚合关联关系建立在抽象层，要求开发者针对抽象进行设计与编程。</span><br><span class=\"line\"></span><br><span class=\"line\">使用场景： 1、如果一个系统需要在构件的抽象化角色和具体化角色之间增加更多的灵活性，避免在两个层次之间建立静态的继承联系，通过桥接模式可以使它们在抽象层建立一个关联关系。 2、对于那些不希望使用继承或因为多层次继承导致系统类的个数急剧增加的系统，桥接模式尤为适用。 3、一个类存在两个独立变化的维度，且这两个维度都需要进行扩展。</span><br><span class=\"line\"></span><br><span class=\"line\">注意事项：对于两个独立变化的维度，使用桥接模式再适合不过了。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/bridge_pattern_uml_diagram.jpg\" alt=\"桥接模式的 UML 图\">\n\n<h3 id=\"11-建造者模式-Builder\"><a href=\"#11-建造者模式-Builder\" class=\"headerlink\" title=\"11.建造者模式( Builder )\"></a>11.建造者模式( Builder )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">使用多个简单的对象一步一步构建成一个复杂的对象。属于创建型模式</span><br><span class=\"line\"></span><br><span class=\"line\">优点： 1、建造者独立，易扩展。 2、便于控制细节风险。</span><br><span class=\"line\">缺点： 1、产品必须有共同点，范围有限制。 2、如内部变化复杂，会有很多的建造类。</span><br><span class=\"line\">注意事项：与工厂模式的区别是：建造者模式更加关注与零件装配的顺序。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/builder_pattern_uml_diagram.jpg\" alt=\"建造者模式的 UML 图\">\n\n<h3 id=\"12-观察者模式-Observer\"><a href=\"#12-观察者模式-Observer\" class=\"headerlink\" title=\"12.观察者模式( Observer )\"></a>12.观察者模式( Observer )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">定义了一种一对多的依赖关系,让多个观察者对象同时监听某一主题对象,在它的状态发生变化时,会通知所有的观察者。观察者模式属于行为型模式。</span><br><span class=\"line\"></span><br><span class=\"line\">优点： 1、观察者和被观察者是抽象耦合的。 2、建立一套触发机制。</span><br><span class=\"line\"></span><br><span class=\"line\">缺点：</span><br><span class=\"line\">    1、观察者太多时，通知观察者会耗时比较久</span><br><span class=\"line\">    2、如果在观察者和观察目标之间有循环依赖的话，观察目标会触发它们之间进行循环调用，可能导致系统崩溃。</span><br><span class=\"line\">    3、观察者模式仅仅只是知道观察目标发生了变化。</span><br><span class=\"line\">注意事项：</span><br><span class=\"line\">    1、JAVA 中已经有了对观察者模式的支持类。</span><br><span class=\"line\">    2、避免循环引用。</span><br><span class=\"line\">    3、如果顺序执行，某一观察者错误会导致系统卡壳，一般采用异步方式。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/observer_pattern_uml_diagram.jpg\" alt=\"观察者模式的 UML 图\">\n\n<h3 id=\"13-单例模式-Singleton\"><a href=\"#13-单例模式-Singleton\" class=\"headerlink\" title=\"13.单例模式( Singleton )\"></a>13.单例模式( Singleton )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">保证一个类仅有一个实例,并提供一个访问它的全局控制点.</span><br><span class=\"line\">优点：</span><br><span class=\"line\">1、在内存里只有一个实例，减少了内存的开销，尤其是频繁的创建和销毁实例（比如管理学院首页页面缓存）。</span><br><span class=\"line\">2、避免对资源的多重占用（比如写文件操作）。</span><br><span class=\"line\">   缺点：没有接口，不能继承，与单一职责原则冲突，一个类应该只关心内部逻辑，而不关心外面怎么样来实例化。</span><br><span class=\"line\">单例模式的几种实现方式</span><br><span class=\"line\">1.懒汉式，线程不安全</span><br><span class=\"line\">   不加锁 synchronized，所以严格意义上它并不算单例模式。</span><br><span class=\"line\">这种方式 lazy loading 很明显，不要求线程安全，在多线程不能正常工作</span><br><span class=\"line\">2.懒汉式，线程安全</span><br><span class=\"line\">\t加锁 synchronized，方式具备很好的 lazy loading，能够在多线程中很好的工作，但是，效率很低，99% 情况下不需要同步。</span><br><span class=\"line\">\t优点：第一次调用才初始化，避免内存浪费。</span><br><span class=\"line\">\t缺点：必须加锁 synchronized 才能保证单例，但加锁会影响效率。</span><br><span class=\"line\">getInstance() 的性能对应用程序不是很关键（该方法使用不太频繁）。</span><br><span class=\"line\">3、饿汉式</span><br><span class=\"line\">\t优点：没有加锁，执行效率会提高。</span><br><span class=\"line\">\t缺点：类加载时就初始化，浪费内存。</span><br><span class=\"line\">4、双检锁&#x2F;双重校验锁（DCL，即 double-checked locking）</span><br><span class=\"line\">\t这种方式采用双锁机制，安全且在多线程情况下能保持高性能。</span><br><span class=\"line\">getInstance() 的性能对应用程序很关键。</span><br><span class=\"line\">5、登记式&#x2F;静态内部类</span><br><span class=\"line\">\t这种方式能达到双检锁方式一样的功效，但实现更简单。对静态域使用延迟初始化，应使用这种方式而不是双检锁方式。这种方式只适用于静态域的情况，双检锁方式可在实例域需要延迟初始化时使用。</span><br><span class=\"line\">6、枚举</span><br><span class=\"line\">\t这种实现方式还没有被广泛采用，但这是实现单例模式的最佳方法。它更简洁，自动支持序列化机制，绝对防止多次实例化。</span><br><span class=\"line\"></span><br><span class=\"line\">经验之谈：一般情况下，不建议使用第 1 种和第 2 种懒汉方式，建议使用第 3 种饿汉方式。只有在要明确实现 lazy loading 效果时，才会使用第 5 种登记方式。如果涉及到反序列化创建对象时，可以尝试使用第 6 种枚举方式。如果有其他特殊的需求，可以考虑使用第 4 种双检锁方式。</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"14-命令模式-Command\"><a href=\"#14-命令模式-Command\" class=\"headerlink\" title=\"14.命令模式( Command )\"></a>14.命令模式( Command )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">将一个请求封装成为一个对象, 使可以用不同的请求对客户进行参数化</span><br><span class=\"line\">优点：</span><br><span class=\"line\">1、降低了系统耦合度。</span><br><span class=\"line\">2、新的命令可以很容易添加到系统中去。</span><br><span class=\"line\">缺点：使用命令模式可能会导致某些系统有过多的具体命令类。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/command_pattern_uml_diagram.jpg\" alt=\"命令模式的 UML 图\">","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http:&#x2F;&#x2F;www.runoob.com&#x2F;design-pattern</span><br><span class=\"line\">设计模式在 Spring 框架中的良好实践</span><br><span class=\"line\">https:&#x2F;&#x2F;mp.weixin.qq.com&#x2F;s?__biz&#x3D;MzI4ODQ3NjE2OA&#x3D;&#x3D;&amp;mid&#x3D;2247485687&amp;idx&#x3D;2&amp;sn&#x3D;d1a405491311488c576197b556d357ec&amp;chksm&#x3D;ec3c9590db4b1c86a13ff39894dbeead2bbcee738a58da96bcb1bc404b6a948bd1f38312176a&amp;mpshare&#x3D;1&amp;scene&#x3D;1&amp;srcid&#x3D;&amp;sharer_sharetime&#x3D;1570684867528&amp;sharer_shareid&#x3D;4c8872b4436b495590f58ccf1453ba58&amp;rd2werd&#x3D;1#wechat_redirect</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"基础\"><a href=\"#基础\" class=\"headerlink\" title=\"基础\"></a>基础</h2><h3 id=\"设计模式的类型\"><a href=\"#设计模式的类型\" class=\"headerlink\" title=\"设计模式的类型\"></a>设计模式的类型</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">设计模式可以分为三大类：创建型模式（Creational Patterns）、结构型模式（Structural Patterns）、行为型模式（Behavioral Patterns）。当然，还有另一类设计模式：J2EE 设计模式。</span><br><span class=\"line\"></span><br><span class=\"line\">## 创建型模式</span><br><span class=\"line\">这些设计模式提供了一种在创建对象的同时隐藏创建逻辑的方式，而不是使用 new 运算符直接实例化对象。这使得程序在判断针对某个给定实例需要创建哪些对象时更加灵活。</span><br><span class=\"line\"></span><br><span class=\"line\">## 结构型模式</span><br><span class=\"line\">这些设计模式关注类和对象的组合。继承的概念被用来组合接口和定义组合对象获得新功能的方式。</span><br><span class=\"line\"></span><br><span class=\"line\">## 行为型模式</span><br><span class=\"line\">这些设计模式特别关注对象之间的通信。</span><br><span class=\"line\"></span><br><span class=\"line\">详情见：http:&#x2F;&#x2F;www.runoob.com&#x2F;design-pattern&#x2F;design-pattern-intro.html</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"设计模式实践的关系\"><a href=\"#设计模式实践的关系\" class=\"headerlink\" title=\"设计模式实践的关系\"></a>设计模式实践的关系</h3><img class=\"magplus\" title=\"设计模式之间的关系\" src=\"http://www.runoob.com/wp-content/uploads/2014/08/the-relationship-between-design-patterns.jpg\" alt=\"设计模式之间的关系\" width=\"700\" height=\"840\">\n\n<h3 id=\"设计模式的六大原则\"><a href=\"#设计模式的六大原则\" class=\"headerlink\" title=\"设计模式的六大原则\"></a>设计模式的六大原则</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1、开闭原则（Open Close Principle）</span><br><span class=\"line\"></span><br><span class=\"line\">开闭原则的意思是：对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。简言之，是为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。</span><br><span class=\"line\"></span><br><span class=\"line\">2、里氏代换原则（Liskov Substitution Principle）</span><br><span class=\"line\"></span><br><span class=\"line\">里氏代换原则是面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。LSP 是继承复用的基石，只有当派生类可以替换掉基类，且软件单位的功能不受到影响时，基类才能真正被复用，而派生类也能够在基类的基础上增加新的行为。里氏代换原则是对开闭原则的补充。实现开闭原则的关键步骤就是抽象化，而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。</span><br><span class=\"line\"></span><br><span class=\"line\">3、依赖倒转原则（Dependence Inversion Principle）</span><br><span class=\"line\"></span><br><span class=\"line\">这个原则是开闭原则的基础，具体内容：针对接口编程，依赖于抽象而不依赖于具体。</span><br><span class=\"line\"></span><br><span class=\"line\">4、接口隔离原则（Interface Segregation Principle）</span><br><span class=\"line\"></span><br><span class=\"line\">这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。它还有另外一个意思是：降低类之间的耦合度。由此可见，其实设计模式就是从大型软件架构出发、便于升级和维护的软件设计思想，它强调降低依赖，降低耦合。</span><br><span class=\"line\"></span><br><span class=\"line\">5、迪米特法则，又称最少知道原则（Demeter Principle）</span><br><span class=\"line\"></span><br><span class=\"line\">最少知道原则是指：一个实体应当尽量少地与其他实体之间发生相互作用，使得系统功能模块相对独立。</span><br><span class=\"line\"></span><br><span class=\"line\">6、合成复用原则（Composite Reuse Principle）</span><br><span class=\"line\"></span><br><span class=\"line\">合成复用原则是指：尽量使用合成&#x2F;聚合的方式，而不是使用继承。</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"模式详解\"><a href=\"#模式详解\" class=\"headerlink\" title=\"模式详解\"></a>模式详解</h2><h3 id=\"1-策略模式-Strategy\"><a href=\"#1-策略模式-Strategy\" class=\"headerlink\" title=\"1.策略模式(Strategy)\"></a>1.策略模式(Strategy)</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">定义个策略接口，不同的实现类提供不同的具体策略算法，通过context方法确定方法执行时具体执行那个子类的方法，属于行为型模式</span><br><span class=\"line\">混合使用(https:&#x2F;&#x2F;blog.csdn.net&#x2F;pengpegV5yaya&#x2F;article&#x2F;details&#x2F;25189253)</span><br><span class=\"line\">优点： 1、算法可以自由切换。 2、避免使用多重条件判断。 3、扩展性良好。</span><br><span class=\"line\">缺点： 1、策略类会增多。 2、所有策略类都需要对外暴露。</span><br><span class=\"line\">注意事项：如果一个系统的策略多于四个，就需要考虑使用混合模式，解决策略类膨胀的问题</span><br></pre></td></tr></table></figure>\n<ul>\n<li>示例图片<br/><img src=\"http://www.runoob.com/wp-content/uploads/2014/08/strategy_pattern_uml_diagram.jpg\" />\n\n</li>\n</ul>\n<h3 id=\"2-简单工厂模式-Simple-Factory\"><a href=\"#2-简单工厂模式-Simple-Factory\" class=\"headerlink\" title=\"2.简单工厂模式( Simple Factory )\"></a>2.简单工厂模式( Simple Factory )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">定义一个用以创建对象的工厂, 根据不同的条件[传参&#x2F;反射]生成不同的对象，属于创建型模式</span><br><span class=\"line\"></span><br><span class=\"line\">- 优点：工厂类是整个模式的关键.包含了必要的逻辑判断,根据外界给定的信息,决定究竟应该创建哪个具体类的对象.通过使用工厂类,外界仅仅需要负责“消费”对象就可以了。而不必管这些对象究竟如何创建及如何组织的。</span><br><span class=\"line\">- 缺点：由于工厂类集中了所有实例的创建逻辑，违反了高内聚责任分配原则，将全部创建逻辑集中到了一个工厂类中；它所能创建的类只能是事先考虑到的，如果需要添加新的类，则就需要改变工厂类了。当系统中的具体产品类不断增多时候，可能会出现要求工厂类根据不同条件创建不同实例的需求．这种对条件的判断和对具体产品类型的判断交错在一起，很难避免模块功能的蔓延，对系统的维护和扩展非常不利；</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-工厂模式-Factory\"><a href=\"#3-工厂模式-Factory\" class=\"headerlink\" title=\"3.工厂模式( Factory )\"></a>3.工厂模式( Factory )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">针对每一种产品提供一个工厂类，通过不同的工厂实例来创建不同的产品实例。简单工厂是一种产品，工厂是多种产品</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-抽象工厂模式-Abstract-Factory\"><a href=\"#4-抽象工厂模式-Abstract-Factory\" class=\"headerlink\" title=\"4.抽象工厂模式( Abstract Factory )\"></a>4.抽象工厂模式( Abstract Factory )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https:&#x2F;&#x2F;blog.csdn.net&#x2F;hguisu&#x2F;article&#x2F;details&#x2F;7505909</span><br><span class=\"line\">应对产品族概念而生，属于创建型模式</span><br><span class=\"line\"></span><br><span class=\"line\">区别</span><br><span class=\"line\">简单工厂 ： 用来生产同一等级结构中的任意产品。（对于增加新的产品，无能为力）</span><br><span class=\"line\">工厂方法 ：用来生产同一等级结构中的固定产品。（支持增加任意产品）</span><br><span class=\"line\">抽象工厂 ：用来生产不同产品族的全部产品。（对于增加新的产品，无能为力；支持增加产品族）</span><br><span class=\"line\"></span><br><span class=\"line\">1）还没有工厂时代：假如还没有工业革命，如果一个客户要一款宝马车,一般的做法是客户去创建一款宝马车，然后拿来用。</span><br><span class=\"line\">2）简单工厂模式：后来出现工业革命。用户不用去创建车。因为客户有一个工厂来帮他创建.想要什么车，这个工厂就可以建。比如想要宝马车。工厂就创建这个系列的车。即工厂可以创建产品。</span><br><span class=\"line\">3）工厂方法模式时代：为了满足客户，车品牌越来越多，如宝马、比亚迪等，一个工厂无法创建所有的车型。于是由单独分出来多个具体的工厂。每个具体工厂创建一种系列。即具体工厂类只能创建一个具体产品。但是轿车工厂还是个抽象。你需要指定某个具体的工厂才能生产车出来。</span><br><span class=\"line\">4）抽象工厂模式时代：随着客户的要求越来越高，轿车必须配置空调。于是这个工厂开始生产轿车和需要的空调。</span><br><span class=\"line\"></span><br><span class=\"line\">最终是客户只要对轿车的销售员说：我要宝马空调车，销售员就直接给他宝马空调车了。而不用自己去创建车.</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/abstractfactory_pattern_uml_diagram.jpg\" alt=\"抽象工厂模式的 UML 图\">\n\n<h3 id=\"5-装饰者模式-Decorator\"><a href=\"#5-装饰者模式-Decorator\" class=\"headerlink\" title=\"5.装饰者模式( Decorator )\"></a>5.装饰者模式( Decorator )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">动态的给一个对象添加一些额外的功能，属于结构型模式</span><br><span class=\"line\">优点：装饰类和被装饰类可以独立发展，不会相互耦合，装饰模式是继承的一个替代模式，装饰模式可以动态扩展一个实现类的功能。</span><br><span class=\"line\">缺点：多层装饰比较复杂。</span><br><span class=\"line\">使用场景： 1、扩展一个类的功能。 2、动态增加功能，动态撤销。</span><br><span class=\"line\">注意事项：可代替继承。</span><br><span class=\"line\"></span><br><span class=\"line\">其他：下图，RedShapeDecorator extends ShapeDecorator</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/decorator_pattern_uml_diagram.jpg\" alt=\"装饰器模式的 UML 图\"/>\n\n<h3 id=\"6-代理模式-Proxy\"><a href=\"#6-代理模式-Proxy\" class=\"headerlink\" title=\"6.代理模式( Proxy )\"></a>6.代理模式( Proxy )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">封装被代理对象并限制外界对被代理对象的访问，属于结构型模式</span><br><span class=\"line\">关键代码：实现与被代理类组合。</span><br><span class=\"line\">优点： 1、职责清晰。 2、高扩展性。 3、智能化。</span><br><span class=\"line\">缺点： 1、由于在客户端和真实主题之间增加了代理对象，因此有些类型的代理模式可能会造成请求的处理速度变慢。 2、实现代理模式需要额外的工作，有些代理模式的实现非常复杂。</span><br><span class=\"line\">注意事项：</span><br><span class=\"line\">1、和适配器模式的区别：适配器模式主要改变所考虑对象的接口，而代理模式不能改变所代理类的接口。</span><br><span class=\"line\">2、和装饰器模式的区别：装饰器模式为了增强功能，而代理模式是为了加以控制。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/proxy_pattern_uml_diagram.jpg\" alt=\"代理模式的 UML 图\">\n\n<h3 id=\"7-模板方法模式-Template\"><a href=\"#7-模板方法模式-Template\" class=\"headerlink\" title=\"7.模板方法模式( Template )\"></a>7.模板方法模式( Template )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.定义一个操作的算法骨架, 并将一些步骤延迟到子类中</span><br><span class=\"line\">2.一个抽象类公开定义了执行它的方法的方式&#x2F;模板。它的子类可以按需要重写方法实现，但调用将以抽象类中定义的方式进行。属于行为型模式。</span><br><span class=\"line\"></span><br><span class=\"line\">优点： 1、封装不变部分，扩展可变部分。 2、提取公共代码，便于维护。 3、行为由父类控制，子类实现。</span><br><span class=\"line\">缺点：每一个不同的实现都需要一个子类来实现，导致类的个数增加，使得系统更加庞大。</span><br><span class=\"line\">使用场景： 1、有多个子类共有的方法，且逻辑相同。 2、重要的、复杂的方法，可以考虑作为模板方法。</span><br><span class=\"line\">注意事项：为防止恶意操作，一般模板方法都加上 final 关键词，否则扩展类就可以自己实现模板方法。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/template_pattern_uml_diagram.jpg\" alt=\"模板模式的 UML 图\">\n\n<h3 id=\"8-外观模式-Facade\"><a href=\"#8-外观模式-Facade\" class=\"headerlink\" title=\"8.外观模式( Facade )\"></a>8.外观模式( Facade )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">为系统向外界提供一个统一的接口、隐藏系统的复杂性（对使用者来说，只关系需要的结果，不关心怎么实现的）；属于结构型模式</span><br><span class=\"line\">简单理解：电脑开机关机</span><br><span class=\"line\">启动电脑（按一下电源键）：启动CPU、启动内存、启动硬盘</span><br><span class=\"line\">关闭电脑（按一下电源键）：关闭硬盘、关闭内存、关闭CPU</span><br><span class=\"line\">优点： 1、减少系统相互依赖。 2、提高灵活性。 3、提高了安全性。</span><br><span class=\"line\">缺点：不符合开闭原则，如果要改东西很麻烦，继承重写都不合适。</span><br><span class=\"line\">使用场景： 1、为复杂的模块或子系统提供外界访问的模块。 2、子系统相对独立。 3、预防低水平人员带来的风险。</span><br><span class=\"line\">注意事项：在层次化结构中，可以使用外观模式定义系统中每一层的入口。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/facade_pattern_uml_diagram.jpg\" alt=\"外观模式的 UML 图\">\n\n\n<h3 id=\"9-适配器模式-Adapter\"><a href=\"#9-适配器模式-Adapter\" class=\"headerlink\" title=\"9.适配器模式( Adapter )\"></a>9.适配器模式( Adapter )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">将一个类的接口转换成客户希望的另一个接口。属于结构型模式</span><br><span class=\"line\">简单理解：用于现有业务维护，整合业务逻辑，根据传入的参数来执行具体某个业务</span><br><span class=\"line\">优点： 1、可以让任何两个没有关联的类一起运行。 2、提高了类的复用。 3、增加了类的透明度。 4、灵活性好。</span><br><span class=\"line\">缺点：</span><br><span class=\"line\">1、过多地使用适配器，会让系统非常零乱，不易整体进行把握。比如，明明看到调用的是 A 接口，其实内部被适配成了 B 接口的实现。因此如果不是很有必要，可以不使用适配器，而是直接对系统进行重构。</span><br><span class=\"line\">2.由于 JAVA 至多继承一个类，所以至多只能适配一个适配者类，而且目标类必须是抽象类。</span><br><span class=\"line\"></span><br><span class=\"line\">使用场景：有动机地修改一个正常运行的系统的接口，这时应该考虑使用适配器模式。</span><br><span class=\"line\"></span><br><span class=\"line\">注意事项：适配器不是在详细设计时添加的，而是解决正在服役的项目的问题。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/adapter_pattern_uml_diagram.jpg\" alt=\"适配器模式的 UML 图\">\n\n<h3 id=\"10-桥接模式-Bridge\"><a href=\"#10-桥接模式-Bridge\" class=\"headerlink\" title=\"10.桥接模式( Bridge )\"></a>10.桥接模式( Bridge )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">将抽象部分与实现部分分离，使它们都可以独立的变化。属于结构型模式</span><br><span class=\"line\"></span><br><span class=\"line\">优点： 1、抽象和实现的分离。 2、优秀的扩展能力。 3、实现细节对客户透明。</span><br><span class=\"line\"></span><br><span class=\"line\">缺点：桥接模式的引入会增加系统的理解与设计难度，由于聚合关联关系建立在抽象层，要求开发者针对抽象进行设计与编程。</span><br><span class=\"line\"></span><br><span class=\"line\">使用场景： 1、如果一个系统需要在构件的抽象化角色和具体化角色之间增加更多的灵活性，避免在两个层次之间建立静态的继承联系，通过桥接模式可以使它们在抽象层建立一个关联关系。 2、对于那些不希望使用继承或因为多层次继承导致系统类的个数急剧增加的系统，桥接模式尤为适用。 3、一个类存在两个独立变化的维度，且这两个维度都需要进行扩展。</span><br><span class=\"line\"></span><br><span class=\"line\">注意事项：对于两个独立变化的维度，使用桥接模式再适合不过了。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/bridge_pattern_uml_diagram.jpg\" alt=\"桥接模式的 UML 图\">\n\n<h3 id=\"11-建造者模式-Builder\"><a href=\"#11-建造者模式-Builder\" class=\"headerlink\" title=\"11.建造者模式( Builder )\"></a>11.建造者模式( Builder )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">使用多个简单的对象一步一步构建成一个复杂的对象。属于创建型模式</span><br><span class=\"line\"></span><br><span class=\"line\">优点： 1、建造者独立，易扩展。 2、便于控制细节风险。</span><br><span class=\"line\">缺点： 1、产品必须有共同点，范围有限制。 2、如内部变化复杂，会有很多的建造类。</span><br><span class=\"line\">注意事项：与工厂模式的区别是：建造者模式更加关注与零件装配的顺序。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/builder_pattern_uml_diagram.jpg\" alt=\"建造者模式的 UML 图\">\n\n<h3 id=\"12-观察者模式-Observer\"><a href=\"#12-观察者模式-Observer\" class=\"headerlink\" title=\"12.观察者模式( Observer )\"></a>12.观察者模式( Observer )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">定义了一种一对多的依赖关系,让多个观察者对象同时监听某一主题对象,在它的状态发生变化时,会通知所有的观察者。观察者模式属于行为型模式。</span><br><span class=\"line\"></span><br><span class=\"line\">优点： 1、观察者和被观察者是抽象耦合的。 2、建立一套触发机制。</span><br><span class=\"line\"></span><br><span class=\"line\">缺点：</span><br><span class=\"line\">    1、观察者太多时，通知观察者会耗时比较久</span><br><span class=\"line\">    2、如果在观察者和观察目标之间有循环依赖的话，观察目标会触发它们之间进行循环调用，可能导致系统崩溃。</span><br><span class=\"line\">    3、观察者模式仅仅只是知道观察目标发生了变化。</span><br><span class=\"line\">注意事项：</span><br><span class=\"line\">    1、JAVA 中已经有了对观察者模式的支持类。</span><br><span class=\"line\">    2、避免循环引用。</span><br><span class=\"line\">    3、如果顺序执行，某一观察者错误会导致系统卡壳，一般采用异步方式。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/observer_pattern_uml_diagram.jpg\" alt=\"观察者模式的 UML 图\">\n\n<h3 id=\"13-单例模式-Singleton\"><a href=\"#13-单例模式-Singleton\" class=\"headerlink\" title=\"13.单例模式( Singleton )\"></a>13.单例模式( Singleton )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">保证一个类仅有一个实例,并提供一个访问它的全局控制点.</span><br><span class=\"line\">优点：</span><br><span class=\"line\">1、在内存里只有一个实例，减少了内存的开销，尤其是频繁的创建和销毁实例（比如管理学院首页页面缓存）。</span><br><span class=\"line\">2、避免对资源的多重占用（比如写文件操作）。</span><br><span class=\"line\">   缺点：没有接口，不能继承，与单一职责原则冲突，一个类应该只关心内部逻辑，而不关心外面怎么样来实例化。</span><br><span class=\"line\">单例模式的几种实现方式</span><br><span class=\"line\">1.懒汉式，线程不安全</span><br><span class=\"line\">   不加锁 synchronized，所以严格意义上它并不算单例模式。</span><br><span class=\"line\">这种方式 lazy loading 很明显，不要求线程安全，在多线程不能正常工作</span><br><span class=\"line\">2.懒汉式，线程安全</span><br><span class=\"line\">\t加锁 synchronized，方式具备很好的 lazy loading，能够在多线程中很好的工作，但是，效率很低，99% 情况下不需要同步。</span><br><span class=\"line\">\t优点：第一次调用才初始化，避免内存浪费。</span><br><span class=\"line\">\t缺点：必须加锁 synchronized 才能保证单例，但加锁会影响效率。</span><br><span class=\"line\">getInstance() 的性能对应用程序不是很关键（该方法使用不太频繁）。</span><br><span class=\"line\">3、饿汉式</span><br><span class=\"line\">\t优点：没有加锁，执行效率会提高。</span><br><span class=\"line\">\t缺点：类加载时就初始化，浪费内存。</span><br><span class=\"line\">4、双检锁&#x2F;双重校验锁（DCL，即 double-checked locking）</span><br><span class=\"line\">\t这种方式采用双锁机制，安全且在多线程情况下能保持高性能。</span><br><span class=\"line\">getInstance() 的性能对应用程序很关键。</span><br><span class=\"line\">5、登记式&#x2F;静态内部类</span><br><span class=\"line\">\t这种方式能达到双检锁方式一样的功效，但实现更简单。对静态域使用延迟初始化，应使用这种方式而不是双检锁方式。这种方式只适用于静态域的情况，双检锁方式可在实例域需要延迟初始化时使用。</span><br><span class=\"line\">6、枚举</span><br><span class=\"line\">\t这种实现方式还没有被广泛采用，但这是实现单例模式的最佳方法。它更简洁，自动支持序列化机制，绝对防止多次实例化。</span><br><span class=\"line\"></span><br><span class=\"line\">经验之谈：一般情况下，不建议使用第 1 种和第 2 种懒汉方式，建议使用第 3 种饿汉方式。只有在要明确实现 lazy loading 效果时，才会使用第 5 种登记方式。如果涉及到反序列化创建对象时，可以尝试使用第 6 种枚举方式。如果有其他特殊的需求，可以考虑使用第 4 种双检锁方式。</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"14-命令模式-Command\"><a href=\"#14-命令模式-Command\" class=\"headerlink\" title=\"14.命令模式( Command )\"></a>14.命令模式( Command )</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">将一个请求封装成为一个对象, 使可以用不同的请求对客户进行参数化</span><br><span class=\"line\">优点：</span><br><span class=\"line\">1、降低了系统耦合度。</span><br><span class=\"line\">2、新的命令可以很容易添加到系统中去。</span><br><span class=\"line\">缺点：使用命令模式可能会导致某些系统有过多的具体命令类。</span><br></pre></td></tr></table></figure>\n<img src=\"http://www.runoob.com/wp-content/uploads/2014/08/command_pattern_uml_diagram.jpg\" alt=\"命令模式的 UML 图\">"}],"PostAsset":[],"PostCategory":[{"post_id":"ckgup4b000000789kdhcef3xp","category_id":"ckgup4b070001789kbbicb4bk","_id":"ckgup4b0a0005789k6qgtem3n"},{"post_id":"ckgup4b000000789kdhcef3xp","category_id":"ckgup4b0a0004789k11bd6yal","_id":"ckgup4b0a0006789kbcil4x0l"},{"post_id":"ckgup4b0d0007789kedxocmid","category_id":"ckgup4b0g0009789k0t36bv09","_id":"ckgup4b0u000x789k8yv83v5o"},{"post_id":"ckgup4b0d0007789kedxocmid","category_id":"ckgup4b0s000r789kdp1e0isn","_id":"ckgup4b0w0010789khal135wr"},{"post_id":"ckgup4b0f0008789k3qk23798","category_id":"ckgup4b0j000e789kfg3l2seg","_id":"ckgup4b0x0015789kbg7zbppx"},{"post_id":"ckgup4b0f0008789k3qk23798","category_id":"ckgup4b0w0012789kg0bwd81o","_id":"ckgup4b0y0017789kaw0bfhi9"},{"post_id":"ckgup4b0p000l789khs5ze95f","category_id":"ckgup4b0g0009789k0t36bv09","_id":"ckgup4b0z0019789k6hpe31sj"},{"post_id":"ckgup4b0p000l789khs5ze95f","category_id":"ckgup4b0x0016789kayfz0fg1","_id":"ckgup4b0z001b789k65boh5tp"},{"post_id":"ckgup4b0g000b789k5k6i7o17","category_id":"ckgup4b0j000e789kfg3l2seg","_id":"ckgup4b10001c789khe497rfx"},{"post_id":"ckgup4b0g000b789k5k6i7o17","category_id":"ckgup4b0y0018789k9s2oa3hs","_id":"ckgup4b10001e789kd8oo7rcf"},{"post_id":"ckgup4b0h000c789k9p5ya71t","category_id":"ckgup4b0r000n789kcfgk9igq","_id":"ckgup4b11001f789kfz4s0273"},{"post_id":"ckgup4b0h000c789k9p5ya71t","category_id":"ckgup4b0z001a789k60de5kgq","_id":"ckgup4b11001h789kcpbvg75c"},{"post_id":"ckgup4b0i000d789k9cr0dr40","category_id":"ckgup4b0t000u789kgr862wee","_id":"ckgup4b12001j789kb76iei1w"},{"post_id":"ckgup4b0i000d789k9cr0dr40","category_id":"ckgup4b10001d789kbgz9d34i","_id":"ckgup4b12001k789kb0e7a1kw"},{"post_id":"ckgup4b0k000h789k8u1fep6s","category_id":"ckgup4b0t000u789kgr862wee","_id":"ckgup4b12001l789k4bss7hdb"},{"post_id":"ckgup4b0k000h789k8u1fep6s","category_id":"ckgup4b10001d789kbgz9d34i","_id":"ckgup4b12001m789kahev15ep"},{"post_id":"ckgup4b0l000i789kdp8qcqo3","category_id":"ckgup4b0x0014789k02wjhv3n","_id":"ckgup4b12001n789ka3iy2dc7"},{"post_id":"ckgup4b0l000i789kdp8qcqo3","category_id":"ckgup4b11001i789kfoss4yt9","_id":"ckgup4b13001o789kaa3ah8gb"},{"post_id":"ckgup4b14001p789k3vom96u8","category_id":"ckgup4b070001789kbbicb4bk","_id":"ckgup4b17001t789k47q754pw"},{"post_id":"ckgup4b14001p789k3vom96u8","category_id":"ckgup4b17001r789k970g45zn","_id":"ckgup4b17001u789k96lecoqw"}],"PostTag":[{"post_id":"ckgup4b000000789kdhcef3xp","tag_id":"ckgup4b080002789kgwta489m","_id":"ckgup4b090003789k12eoeehu"},{"post_id":"ckgup4b0d0007789kedxocmid","tag_id":"ckgup4b0g000a789k0usucojg","_id":"ckgup4b0k000g789kfo272jy8"},{"post_id":"ckgup4b0f0008789k3qk23798","tag_id":"ckgup4b0j000f789k4bwo8n0t","_id":"ckgup4b0q000m789k1w695gf1"},{"post_id":"ckgup4b0p000l789khs5ze95f","tag_id":"ckgup4b0g000a789k0usucojg","_id":"ckgup4b0s000p789k0wqrctga"},{"post_id":"ckgup4b0g000b789k5k6i7o17","tag_id":"ckgup4b0m000k789ke4gngggh","_id":"ckgup4b0s000q789kaeqib5hx"},{"post_id":"ckgup4b0h000c789k9p5ya71t","tag_id":"ckgup4b0r000o789k3f8b3u4z","_id":"ckgup4b0t000t789k59nzeiwb"},{"post_id":"ckgup4b0i000d789k9cr0dr40","tag_id":"ckgup4b0t000s789k35g029ma","_id":"ckgup4b0u000w789kd7uhggc8"},{"post_id":"ckgup4b0k000h789k8u1fep6s","tag_id":"ckgup4b0t000s789k35g029ma","_id":"ckgup4b0w0011789k4msw5go8"},{"post_id":"ckgup4b0l000i789kdp8qcqo3","tag_id":"ckgup4b0v000z789kac9pgkmt","_id":"ckgup4b0x0013789k8wt103pk"},{"post_id":"ckgup4b14001p789k3vom96u8","tag_id":"ckgup4b16001q789k2m0yext9","_id":"ckgup4b17001s789k7s9sa87p"}],"Tag":[{"name":"DDD","_id":"ckgup4b080002789kgwta489m"},{"name":"tool","_id":"ckgup4b0g000a789k0usucojg"},{"name":"canal","_id":"ckgup4b0j000f789k4bwo8n0t"},{"name":"mysql","_id":"ckgup4b0m000k789ke4gngggh"},{"name":"zookeeper","_id":"ckgup4b0r000o789k3f8b3u4z"},{"name":"utils","_id":"ckgup4b0t000s789k35g029ma"},{"name":"思维方式","_id":"ckgup4b0v000z789kac9pgkmt"},{"name":"设计模式","_id":"ckgup4b16001q789k2m0yext9"}]}}